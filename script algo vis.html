
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="Sorting is a very classic problem of reordering items (that can be compared, e.g., integers, floating-point numbers, strings, etc) of an array (or a list) in a certain order (increasing, non-decreasing (increasing or flat), decreasing, non-increasing (decreasing or flat), lexicographical, etc).There are many different sorting algorithms, each has its own advantages and limitations.Sorting is commonly used as the introductory problem in various Computer Science classes to showcase a range of algorithmic ideas.Without loss of generality, we assume that we will sort only Integers, not necessarily distinct, in non-decreasing order in this visualization. Try clicking Bubble Sort for a sample animation of sorting the list of 5 jumbled integers (with duplicate) above.">
<meta name="keywords" content="Sorting Bubble Select Selection Insert Insertion Merge Random Quick Counting Radix">
 
<meta name="csrf-token" content="Igr1Q7wWkU6FYvLCkaEYAlKzTLWzJqbvb6rmFHPa">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<meta property="og:image" content="https://visualgo.net/img/png/sorting.png">
<title>Sorting (Bubble, Selection, Insertion, Merge, Quick, Counting, Radix) - VisuAlgo</title>
<link rel="icon" href="https://visualgo.net/img/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="https://visualgo.net/img/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" href="https://visualgo.net/img/favicon.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://visualgo.net/img/favicon.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://visualgo.net/img/favicon.png">
<link rel="stylesheet" href="https://visualgo.net/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://visualgo.net/fonts/silkscreen/stylesheet.css">
<link rel="stylesheet" type="text/css" href="https://visualgo.net/css/common-1.0.0.css">
<link rel="stylesheet" href="https://visualgo.net/css/viz-1.0.3.css">
<link rel="stylesheet" href="https://visualgo.net/css/visual.css">
<link rel="stylesheet" href="https://visualgo.net/css/drawgraph-1.0.1.css">
<style>
      #e-lecture {
        top: 45px;
        right: 130px;
        width: 400px;
        display: block;
        background: none;
        /*overflow: normal;*/
        white-space: normal;
        text-align: right;
        color: black; font-weight: bold; font-size: 20px;
        z-index: 8001;
      }
      #e-lecture-timeline {
        top: 80px;
        right: 130px;
        display: flex;
        position: absolute;
        z-index: 10000;
      }
      .e-lecture-timeline-slide {
        height: 5px;
        width: 2px;
        background: black;
        float: left;
      }
      .e-lecture-timeline-checkpoint {
        height: 20px;
        width: 3px;
        margin-left: 2px;
        margin-top: -7.5px;
        background: black;
        float: left;
      }

      #e-lecture-f1map {
        top: 102.5px;
        right: 130px;
        display: flex;
        position: absolute;
        z-index: 10000;
      }

      .e-lecture-f1map-sector {
        flex-grow: 1;
        background: black;
        float: left;
        height: 5px;
        margin-right: 1px;
      }

      .e-lecture-f1map-sector:last-child {
        margin-right: 0px;
      }

      .electure-prev, .electure-next { /* force update, copied from viz.css */
        position: absolute;
        /* bottom: -12px; */
        top: -20px;
        /*bottom: '';*/
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
      }

      .electure-read-status {
        position: absolute;
        bottom: 4px;
        right: 4px;
        font-size: 14px;
        cursor: default;
        color: #00FF7F;
        display: none;
      }

      .electure-prev {
        left: -10px;
        /* right: 30px; */
      }
      .electure-next {
        right: -10px;
        color: white;
      }
      .electure-print, .electure-end {
        position: fixed;
        top: 45px;
        height: 20px;
        width: 17px;
        right: 80px;
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
        text-align: center;
      }
      .electure-end {
        right: 45px; /* beside the X */
      }

      #change-lang-popup {
        position: fixed;
        background: green;
        left: 40px;
        top: 50px;
        width: 250px;
        height: 125px;
        border: transparent;
        border-radius: 10px;
        padding: 10px 20px;
        z-index: 9000;
      }

      #change-lang-popup p {
        font-size: medium;
        color: white;
        line-height: 2;
        font-family: "PT Sans", sans-serif;
      }

      #change-lang-popup-btn {
        text-decoration: underline;
        margin-left: 50px;
      }

      #change-lang-popup-btn:hover {
        cursor: pointer;
      }

      #rotateDeviceOverlay {
        z-index: 10000;
        width: 90%;
        height: 100%;
        align-items: center;
        justify-content: center;
        background-color: white;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        display: flex;
        padding-right: 5%;
        padding-left: 5%;
        overflow: hidden;
      }

      #mobile-playback-overlay {
        z-index: 9600;
        width: 90%;
        height: 100%;
        align-items: center;
        justify-content: center;
        gap: 100px;
        background-color: black;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        display: flex;
        padding-right: 5%;
        padding-left: 5%;
        opacity: 0.3;
        overflow: hidden;
      }
      .mobile-playback-item {
        min-width: 2.5%;
        max-width: 35px;
      }
      .mobile-playback-item img {
        width: 100%
      }
      .mobile-playback-label {
        opacity: 0;
        color: white;
        font-size: 25px;
        font-weight: bold;
        min-width: 1.5%;
        max-width: 25px;
        transition: opacity 0.25s ease-out;
        -webkit-backface-visibility: hidden;
      }
      #mobile-playback-rewind-label {
        margin-right: -70px;
      }
      #mobile-playback-forward-label {
        margin-left: -70px;
      }
      #viz-speed-value {
          font-size: 15px;
          width: 10%;
      }
    </style>
<style>
#create-userdefined-input input { width: 300px; }

text {
  fill: black;
  font: 20px sans-serif;
  text-anchor: middle;
}

#viz-radix-sort-canvas {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -250px;
  margin-left: -500px;
  height: 500px;
  width: 1000px;
}

div .radix-sort-element {
  position: absolute;
  border: 1px solid black;
  width: 55px;
  font: 20px sans-serif;
  color: black;
}

#radix-sort-bucket-labels-collection {
  position: absolute;
  bottom: 0px;
  left: 0px;
}

.radix-sort-bucket-label {
  position: absolute;
  border-top: 1px solid black;
  width: 57px;
  font: 20px sans-serif;
  color: black;
}

#sort-viz {
  width: 100%;
  text-align: center;
  overflow: hidden;
  padding-top: 10px;
}
</style>
<style>
/* copied here from common.css (perhaps need to use version numbering) until caches worldwide settles */
#gdpr-popup, #reload-mobile-popup, #message-popup {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  min-width: 320px;
  bottom: 62px;
  height: 300px;
  background-color: #0275d8;
  border-radius: 15px;
  padding: 30px 40px;
  z-index: 9500;
}
#reload-mobile-popup {
  background-color: green;
  height: 200px;
}
#message-popup {
  z-index: 9000;
  width: 40%;
  height: 130px;
  background-color: #d9534f;
}

#gdpr-popup p, #reload-mobile-popup p, #message-popup p {
  font-size: large;
  color: white;
  line-height: 2;
  font-family: "PT Sans", sans-serif;
}

#gdpr-popup .gdpr-button, #reload-mobile-popup .inner-button, #message-popup .inner-button {
  border: white solid 2px;
  border-radius: 4px;
  font-weight: bold;
  font-size: x-large;
  padding: 2px 8px;
  color: white;
  width: 90px;
  text-align: center;
  position: absolute;
  letter-spacing: 1px;
  text-decoration: none;
  cursor: pointer;
}

#gdpr-accept, #reload-mobile-button, #dismiss-message-btn {
  bottom: 30px;
  right: 40px;
}

#gdpr-reject, #cancel-reload-mobile-button {
  bottom: 30px;
  right: 170px;
}
    </style>
</head>
<body>
<div id="body-container" style="display: flex; flex-direction: column; min-height: 100vh;">
<style>
  #topbar {
    background-color: rgb(0,0,0);
    font-family: "PT Sans", sans-serif;
    font-size: 13px;
    height: 40px;

    padding-left: 40px;
    padding-right: 40px;

    display: flex;
    flex-wrap: wrap;
    align-items: center;
    position: relative;
    justify-content: flex-start;
  }

  #topbar a:hover {
    text-decoration: none;
  }

  #account-dropdown-btn {
    color: #198754;
    font-size: 1rem;
    padding: 0 0.5rem;
    margin-left: 0.5rem;

    border: 2px solid;
    border-radius: 0.25rem;
    height: 24px;
    line-height: 1.5;
  }

  #account-dropdown-btn:hover {
    color: #0a58ca!important;
    border-color: #198754;
    text-decoration: none;
  }

  #login-button {
    color: #198754;
    font-size: 1rem;
    padding: 0 0.5rem;
    margin-left: 0.5rem;

    border: 2px solid;
    border-radius: 0.25rem;

    height: 24px;
    line-height: 1.5;
  }

  #login-button a:hover {
    color: #0a58ca!important;
    text-decoration: none;
  }

  #account-dropdown-menu {
    display: none;
    position: absolute;
    background-color: white;
    z-index: 1000;
    min-width: 10rem;
    padding: 0.5rem 0;
    margin: 0;
    font-size: 1rem;
    color: rgb(0,0,0);
    text-align: left;
    list-style: none;
    background-clip: padding-box;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 0.25rem;
    top: 45px;
    right: 40px;
    line-height: 1.5;
  }

  .account-dropdown-item {
    display: block;
    width: auto;
    padding: 0.25rem 1rem;
    clear: both;
    font-weight: 400;
    color: rgb(0,0,0);
    text-align: inherit;
    text-decoration: none;
    white-space: nowrap;
    background-color: transparent;
    border: 0;
    height: 24px;
    font-family: SilkscreenNormal, sans-serif;
  }

  .account-dropdown-item:hover {
    background-color: #e9ecef;
    color: #0a58ca;
    text-decoration: none;
  }
</style>
<nav id="topbar">
<span style="margin-right: 0.25rem">
<a href="https://www.comp.nus.edu.sg/~stevenha" style="text-decoration: none; color: white">
<span class="colour" style="border: 1px solid; border-color: #198754!important; border-radius: .25rem!important">7</span>
</a>
<a href="https://visualgo.net" style="font-family: SilkscreenNormal,sans-serif; font-size: 20px; margin-left: 4px;">
<span style="color: white">Visu</span><span class="colour">Algo</span><span style="font-size: 40%; color: white">.net</span>
</a>
<span style="color: white">/</span>
<select id="Language" class="select2-dropdown" onchange="changeURL()">
<option value="en" selected>en</option>
<option value="zh">zh</option>
<option value="id">id</option>
</select>
<span style="color: white; font-family: monospace">/sorting</span>
</span>
<span style="max-height: 30px">
<span id="title">
<a id='title-Bubble' class='selected-viz'>Bubble</a>
<a id='title-Selection'>Select</a>
<a id='title-Insertion'>Insert</a>
<a id='title-Merge'>Merge</a>
<a id='title-Quick'>Quick</a>
<a id='title-RandomizedQuick'>R-Quick</a>
<a id='title-Counting'>Count</a>
<a id='title-Radix'>Radix</a>
</span>
</span>
<span style="max-height: 30px; background-color:rgb(0,0,0)!important; color: white; margin-left: auto">
<div id="mode-menu">
<div id='mode-button' style="background-color: rgb(0,0,0)!important;" title='exploration'>Exploration Mode &#9663;</div>
<div id='other-modes' style="background-color: rgb(0,0,0)!important; padding-top: 11px">
<a title='e-Lecture' style="background-color: rgb(0,0,0)!important;">e-Lecture Mode</a>
</div>
</div>
</span>
<span id="login-button" style="font-family: SilkscreenNormal,sans-serif">
<a href="https://visualgo.net/login">Login</a>
</span>
</nav>
<ul id="account-dropdown-menu">
<li><a class="account-dropdown-item" href="https://visualgo.net/profile">Profile</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/training">Training</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/tests">Tests</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/logout">Log Out</a></li>
</ul>
<script>
  function changeURL() {
    let URL = window.location.href.split('/');
    URL[3] = document.getElementById("Language").value;
    window.location.assign(URL.join('/'));
  }

  function changeDefaultLanguageAndURL() {
    let URL = window.location.href.split('/');
    let val = document.getElementById("Language").value;
    URL[3] = val;

    let data = {
      '_token': "Igr1Q7wWkU6FYvLCkaEYAlKzTLWzJqbvb6rmFHPa",
      'lang'  : val
    }
    $.post('https://visualgo.net/changeLanguage', data, function (res, status) {
      if(res['status'] === 'success') {
        window.location.assign(URL.join('/'));
      } else if (res['status'] === 'failed') {
        alert(res['message']);
      } else {
        alert('An unknown error occurred');
      }
    })
  }
</script>
<div id="dark-overlay"></div>
<div id="main-content-container" style="flex: 1">

<div id="mobile-playback-overlay" class="playing" style="display: none;">
<span id="mobile-playback-rewind-label" class="mobile-playback-label">-7</span>
<span id="mobile-playback-rewind" class="mobile-playback-item" onclick=mobilePlaybackRewind()><img src="https://visualgo.net/img/prevFrame.png" alt="rewind 7 frames"></span>
<span id="mobile-playback-pause" class="mobile-playback-item" onclick=mobilePlaybackPauseOrPlay()><img src="https://visualgo.net/img/pause.png" alt="pause"></span>
<span id="mobile-playback-play" class="mobile-playback-item" style="display: none;" onclick=mobilePlaybackPauseOrPlay()><img src="https://visualgo.net/img/play.png" alt="play"></span>
<span id="mobile-playback-forward" class="mobile-playback-item" onclick=mobilePlaybackForward()><img src="https://visualgo.net/img/nextFrame.png" alt="forward 7 frames"></span>
<span id="mobile-playback-forward-label" class="mobile-playback-label">+7</span>
</div>
<div id="status" class="panel"><p></p></div>
<div id="status-hide" class="panel-hide"><img src="https://visualgo.net/img/arrow_white_right.png" alt=">" title="show/hide status panel" /></div>
<div id="codetrace" class="panel">
<p id="code1" style="padding-top: 10px;"></p>
<p id="code2"></p>
<p id="code3"></p>
<p id="code4"></p>
<p id="code5"></p>
<p id="code6"></p>
<p id="code7" style="padding-bottom: 10px;"></p>
</div>
<div id="codetrace-hide" class="panel-hide"><img src="https://visualgo.net/img/arrow_white_right.png" alt=">" title="show/hide codetrace panel" /></div>
<div id="left-bar"></div>
<div id="right-bar"></div>
<div id="media-controls">
<div id='speed-control'><div id='speed-input'></div><div id='viz-speed-value'>1x</div></div>
<span id="go-to-beginning" class="media-control-button" title="go to beginning" onclick=goToBeginning()><img src="https://visualgo.net/img/goToBeginning.png" alt="go to beginning"></span>
<span id="previous" class="media-control-button" title="step backward" onclick=stepBackward()><img src="https://visualgo.net/img/prevFrame.png" alt="previous frame"></span>
<span id="pause" class="media-control-button" title="pause" onclick=pause()><img src="https://visualgo.net/img/pause.png" alt="pause"></span>
<span id="play" class="media-control-button" title="play" onclick=play()><img src="https://visualgo.net/img/play.png" alt="play"></span>
<span id="next" class="media-control-button" title="step forward" onclick=stepForward()><img src="https://visualgo.net/img/nextFrame.png" alt="next frame"></span>
<span id="go-to-end" class="media-control-button" title="go to end" onclick=goToEnd()><img src="https://visualgo.net/img/goToEnd.png" alt="go to end"></span>
<div id="progress-bar" class="media-control-button"></div>
</div>
<div id='e-lecture' class='panel'></div> 
<div id='e-lecture-timeline'></div>
<div id='e-lecture-f1map'>
<div class="e-lecture-f1map-sector" sectorNo=1></div>
<div class="e-lecture-f1map-sector" sectorNo=2></div>
<div class="e-lecture-f1map-sector" sectorNo=3></div>
</div>
<div id="overlay" hidden onclick="end_eLecture()"> 
<div id='electure-dropdown'>
<select class="lecture-dropdown" style="width:100%">
<option value="1">1. Sorting Problem and Sorting Algorithms</option>
<option value="1-1">&nbsp;&nbsp;&nbsp;1-1. Motivation - Interesting CS Ideas</option>
<option value="1-2">&nbsp;&nbsp;&nbsp;1-2. Motivation - Applications</option>
<option value="1-3">&nbsp;&nbsp;&nbsp;1-3. Some Hints</option>
<option value="2">2. Actions</option>
<option value="2-1">&nbsp;&nbsp;&nbsp;2-1. Define Your Own Input</option>
<option value="2-2">&nbsp;&nbsp;&nbsp;2-2. Execute the Selected Sorting Algorithm</option>
<option value="3">3. Visualisation</option>
<option value="4">4. Common Sorting Algorithms</option>
<option value="4-1">&nbsp;&nbsp;&nbsp;4-1. Abbreviations</option>
<option value="5">5. 3 O(N^2) Comparison-based Sorting Algorithms</option>
<option value="6">6. Analysis of Algorithms (Basics)</option>
<option value="6-1">&nbsp;&nbsp;&nbsp;6-1. Mathematical Pre-requisites</option>
<option value="6-2">&nbsp;&nbsp;&nbsp;6-2. What Is It?</option>
<option value="6-3">&nbsp;&nbsp;&nbsp;6-3. Measuring the Actual Running Time?</option>
<option value="6-4">&nbsp;&nbsp;&nbsp;6-4. Counting # of Operations (1)</option>
<option value="6-5">&nbsp;&nbsp;&nbsp;6-5. Counting # of Operations (2)</option>
<option value="6-6">&nbsp;&nbsp;&nbsp;6-6. Asymptotic Analysis</option>
<option value="6-7">&nbsp;&nbsp;&nbsp;6-7. Ignoring Coefficient of the Leading Term</option>
<option value="6-8">&nbsp;&nbsp;&nbsp;6-8. Upper Bound: The Big-O Notation</option>
<option value="6-9">&nbsp;&nbsp;&nbsp;6-9. Big-O Notation (Mathematics)</option>
<option value="6-10">&nbsp;&nbsp;&nbsp;6-10. Growth Terms</option>
<option value="6-11">&nbsp;&nbsp;&nbsp;6-11. Growth Terms (Visualized/Compared)</option>
<option value="7">7. Bubble Sort</option>
<option value="7-1">&nbsp;&nbsp;&nbsp;7-1. Bubble Sort, C++ Code &amp; Analysis</option>
<option value="7-2">&nbsp;&nbsp;&nbsp;7-2. Bubble Sort: Early Termination</option>
<option value="7-3">&nbsp;&nbsp;&nbsp;7-3. The Answer</option>
<option value="8">8. Selection Sort</option>
<option value="8-1">&nbsp;&nbsp;&nbsp;8-1. Selection Sort, C++ Code &amp; Analysis</option>
<option value="8-2">&nbsp;&nbsp;&nbsp;8-2. Mini Quiz</option>
<option value="9">9. Insertion Sort</option>
<option value="9-1">&nbsp;&nbsp;&nbsp;9-1. Insertion Sort, C++ Code and Analysis 1</option>
<option value="9-2">&nbsp;&nbsp;&nbsp;9-2. Insertion Sort: Analysis 2</option>
<option value="9-3">&nbsp;&nbsp;&nbsp;9-3. Mini Quiz</option>
<option value="10">10. 2.5 O(N log N) Comparison-based Sorting</option>
<option value="11">11. Merge Sort</option>
<option value="11-1">&nbsp;&nbsp;&nbsp;11-1. Important Subroutine, O(N) Merge</option>
<option value="11-2">&nbsp;&nbsp;&nbsp;11-2. Merge Subroutine C++ Implementation</option>
<option value="11-3">&nbsp;&nbsp;&nbsp;11-3. Divide and Conquer Paradigm</option>
<option value="11-4">&nbsp;&nbsp;&nbsp;11-4. Merge Sort as a D&C Algorithm</option>
<option value="11-5">&nbsp;&nbsp;&nbsp;11-5. Merge Sort C++ Implementation</option>
<option value="11-6">&nbsp;&nbsp;&nbsp;11-6. Demonstration</option>
<option value="11-7">&nbsp;&nbsp;&nbsp;11-7. Merge Sort: Analysis Part 1</option>
<option value="11-8">&nbsp;&nbsp;&nbsp;11-8. Merge Sort: Analysis Part 2</option>
<option value="11-9">&nbsp;&nbsp;&nbsp;11-9. Merge Sort: Analysis Part 3</option>
<option value="11-10">&nbsp;&nbsp;&nbsp;11-10. Pros and Cons</option>
<option value="11-11">&nbsp;&nbsp;&nbsp;11-11. The Answer</option>
<option value="12">12. Quick Sort</option>
<option value="12-1">&nbsp;&nbsp;&nbsp;12-1. Quick Sort as a D&amp;C Algorithm</option>
<option value="12-2">&nbsp;&nbsp;&nbsp;12-2. Important Sub-routine, O(N) Partition</option>
<option value="12-3">&nbsp;&nbsp;&nbsp;12-3. The Answer</option>
<option value="12-4">&nbsp;&nbsp;&nbsp;12-4. Partition - Continued</option>
<option value="12-5">&nbsp;&nbsp;&nbsp;12-5. Partition - Case when a[k] &gt; p</option>
<option value="12-6">&nbsp;&nbsp;&nbsp;12-6. Partition - Case when a[k] &lt; p</option>
<option value="12-7">&nbsp;&nbsp;&nbsp;12-7. Partition C++ Implementation</option>
<option value="12-8">&nbsp;&nbsp;&nbsp;12-8. Quick Sort C++ Implementation</option>
<option value="12-9">&nbsp;&nbsp;&nbsp;12-9. Demonstration</option>
<option value="12-10">&nbsp;&nbsp;&nbsp;12-10. Quick Sort: Analysis Part 1</option>
<option value="12-11">&nbsp;&nbsp;&nbsp;12-11. Quick Sort: Analysis Part 2</option>
<option value="12-12">&nbsp;&nbsp;&nbsp;12-12. Quick Sort: Analysis Part 3</option>
<option value="12-13">&nbsp;&nbsp;&nbsp;12-13. Quick Sort: Best Case (Rare)</option>
<option value="13">13. Random Quick Sort</option>
<option value="13-1">&nbsp;&nbsp;&nbsp;13-1. Magical Analysis</option>
<option value="13-2">&nbsp;&nbsp;&nbsp;13-2. The Answer</option>
<option value="14">14. 2 O(N) Non Comparison-based Sorting Algorithms</option>
<option value="14-1">&nbsp;&nbsp;&nbsp;14-1. Lower Bound of Sorting Algorithm</option>
<option value="15">15. Counting Sort</option>
<option value="16">16. Radix Sort</option>
<option value="16-1">&nbsp;&nbsp;&nbsp;16-1. The Best Sorting Algorithm for Integers?</option>
<option value="16-2">&nbsp;&nbsp;&nbsp;16-2. The Answer</option>
<option value="17">17. Additional Properties of Sorting Algorithms</option>
<option value="17-1">&nbsp;&nbsp;&nbsp;17-1. In-Place Sorting</option>
 <option value="17-2">&nbsp;&nbsp;&nbsp;17-2. Stable Sort</option>
<option value="17-3">&nbsp;&nbsp;&nbsp;17-3. Caching Performance</option>
<option value="18">18. Quizzes</option>
<option value="18-1">&nbsp;&nbsp;&nbsp;18-1. Quiz #1</option>
<option value="18-2">&nbsp;&nbsp;&nbsp;18-2. Quiz #2</option>
<option value="19">19. Extras</option>
<option value="19-1">&nbsp;&nbsp;&nbsp;19-1. Challenge</option>
<option value="19-2">&nbsp;&nbsp;&nbsp;19-2. Inversion Index/Count</option>
<option value="19-3">&nbsp;&nbsp;&nbsp;19-3. Implementation</option>
<option value="19-4">&nbsp;&nbsp;&nbsp;19-4. Online Quiz</option>
<option value="19-5">&nbsp;&nbsp;&nbsp;19-5. Online Judge Exercises</option>
</select>
</div>
<div class='electure-print' title='Print the e-Lecture note' style='z-index=8001;'>&#9997;</div>
<div class='electure-end' title='Close the e-Lecture mode' style='z-index=8001;'>&#10008;</div>
</div>
<div id="dropdown-temp-holder" hidden></div>

<div id="electure-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Sorting is a very classic problem of reordering items (that can be compared, e.g., integers, floating-point numbers, strings, etc) of an array (or a list) in a certain order (increasing, non-decreasing (increasing or flat), decreasing, non-increasing (decreasing or flat), lexicographical, etc).</p><br><p>There are many different sorting algorithms, each has its own advantages and limitations.</p><br><p>Sorting is commonly used as the introductory problem in various Computer Science classes to showcase a range of algorithmic ideas.</p><br><p>Without loss of generality, we assume that we will sort only <b>Integers</b>, not necessarily distinct, in <b>non-decreasing order</b> in this visualization. Try clicking <span class="slide-actions" onclick="doButtonAction11()">Bubble Sort</span> for a sample animation of sorting the list of 5 jumbled integers (with duplicate) above.</p>
<div class="electure-addition">
<hr>
<p><b>Remarks</b>: By default, we show e-Lecture Mode for first time (or non logged-in) visitor.<br>
If you are an NUS student and a repeat visitor, please <a href="https://visualgo.net/login"><u>login</u></a>.</p>
</div>
<div class='electure-next' data-nextid="1-1" title='Go to the next slide 1-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-1-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Sorting problem has a variety of interesting algorithmic solutions that embody many Computer Science ideas:</p><ol><li><a href="?slide=5"><u>Comparison</u></a> versus <a href="?slide=14"><u>non-comparison</u></a> based strategies,</li><li>Iterative versus Recursive implementation,</li><li>Divide-and-Conquer paradigm (e.g., <a href="?slide=11-4"><u>Merge Sort</u></a> or <a href="?slide=12-1"><u>Quick Sort</u></a>),</li><li>Best/Worst/Average-case Time Complexity analysis,</li><li><a href="?slide=13"><u>Randomized Algorithms</u></a>, etc.</li></ol>
<div class="electure-addition">
<hr>
<p>Pro-tip 1: Since you are not <a href="https://visualgo.net/login"><u>logged-in</u></a>, you may be a first time visitor (or not an NUS student) who are not aware of the following keyboard shortcuts to navigate this e-Lecture mode: <b>[PageDown]</b>/<b>[PageUp]</b> to go to the next/previous slide, respectively, (and if the drop-down box is highlighted, you can also use <b>[&rarr; or &darr;/&larr; or &uarr;]</b> to do the same),and <b>[Esc]</b> to toggle between this e-Lecture mode and exploration mode.</p>
</div>
<div class='electure-prev' data-nextid="1" title='Go to the previous slide 1'>&larr;</div>
<div class='electure-next' data-nextid="1-2" title='Go to the next slide 1-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-1-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>When an (integer) array <b>A</b> is sorted, many problems involving <b>A</b> become easy (or easier):</p><ol><li>Searching for a specific value <b>v</b> in array <b>A</b>,</li><li>Finding the min/max or the k-th smallest/largest value in (static) array <b>A</b>,</li><li>Testing for uniqueness and deleting duplicates in array <b>A</b>,</li><li>Counting how many time a specific value <b>v</b> appear in array <b>A</b>,</li><li>Set intersection/union between array <b>A</b> and another sorted array <b>B</b>,</li><li>Finding a target pair <b>x</b> ∈ <b>A</b> and <b>y</b> ∈ <b>A</b> such that <b>x+y</b> equals to a target <b>z</b>,</li><li>Counting how many values in array <b>A</b> is inside range [<b>lo</b>..<b>hi</b>], etc.</li></ol><p>Discussion: In real-life classes, the instructor may elaborate more on these applications.</p>
<div class="electure-addition">
<hr>
<p>Pro-tip 2: We designed this visualization and this e-Lecture mode to look good on 1366x768 resolution <b>or larger</b> (typical modern laptop resolution in 2021). We recommend using Google Chrome to access VisuAlgo. Go to full screen mode (<b>F11</b>) to enjoy this setup. However, you can use zoom-in (<b>Ctrl +</b>) or zoom-out (<b>Ctrl -</b>) to calibrate this.</p>
</div>
<div class='electure-prev' data-nextid="1-1" title='Go to the previous slide 1-1'>&larr;</div>
<div class='electure-next' data-nextid="1-3" title='Go to the next slide 1-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-1-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
<hr>
<p>Pro-tip 3: Other than using the typical media UI at the bottom of the page, you can also control the animation playback using keyboard shortcuts (in Exploration Mode): <b>Spacebar</b> to play/pause/replay the animation, <b>&larr;</b>/<b>&rarr;</b> to step the animation backwards/forwards, respectively, and <b>-</b>/<b>+</b> to decrease/increase the animation speed, respectively.</p>
</div>
<div class='electure-prev' data-nextid="1-2" title='Go to the previous slide 1-2'>&larr;</div>
<div class='electure-next' data-nextid="2" title='Go to the next slide 2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-2" class="electure-dialog" style="bottom:140px;left:60px;width:500px;">
<p class="notforprint">There are two actions that you can do in this visualization.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="1-3" title='Go to the previous slide 1-3'>&larr;</div>
<div class='electure-next' data-nextid="2-1" title='Go to the next slide 2-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-2-1" class="electure-dialog" style="bottom:140px;left:60px;width:500px;">
<p>The first action is about defining <b>your own</b> input, an array/a list <b>A</b> that is:</p><ol><li>Totally random,</li><li>Random but sorted (in non-decreasing or non-increasing order),</li><li>Random but <b>nearly</b> sorted&nbsp;(in non-decreasing or non-increasing order),</li><li>Random and contain many duplicates (thus small range of integers), or</li><li>Defined solely by yourself.</li></ol><p class="notforprint">In Exploration mode, you can experiment with various sorting algorithms provided in this visualization to figure out their best and worst case inputs.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="2" title='Go to the previous slide 2'>&larr;</div>
<div class='electure-next' data-nextid="2-2" title='Go to the next slide 2-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-2-2" class="electure-dialog" style="bottom:140px;left:60px;width:500px;">
<div class="notforprint"><p>The second action is the most important one: Execute the active sorting algorithm by clicking the "Sort" button.</p><br><p>Remember that you can switch active algorithm by clicking the <a href="?slide=4-1"><u>respective abbreviation</u></a> on the top side of this visualization page.</p></div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="2-1" title='Go to the previous slide 2-1'>&larr;</div>
<div class='electure-next' data-nextid="3" title='Go to the next slide 3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-3" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div class="notforprint"><p>View the visualisation/animation of the chosen sorting algorithm here.</p><br><p>Without loss of generality, we only show Integers in this visualization and our objective is to sort them from the initial state into non-decreasing order state. Remember, non-decreasing means mostly ascending (or increasing) order, but because there can be duplicates, there can be flat/equal line between two adjacent equal integers.</p></div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="2-2" title='Go to the previous slide 2-2'>&larr;</div>
<div class='electure-next' data-nextid="4" title='Go to the next slide 4'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-4" class="electure-dialog" style="top:60px;left:220px;width:500px;">
<span class="notforprint"><p>At the top, you will see the list of commonly taught sorting algorithms in Computer Science classes. To activate each algorithm, select the <a href="?slide=4-1"><u>abbreviation</u></a> of respective algorithm name before clicking "Sort".</p><br><p>To facilitate more diversity, we randomize the active algorithm upon each page load.</p></span><br><p>The first six algorithms in this module are <b>comparison-based</b> sorting algorithms while the last two are not. We will discuss this idea <a href="?slide=13"><u>midway through</u></a> this e-Lecture.</p><br><p>The middle three algorithms are <b>recursive</b> sorting algorithms while the rest are usually implemented iteratively.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="3" title='Go to the previous slide 3'>&larr;</div>
<div class='electure-next' data-nextid="4-1" title='Go to the next slide 4-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-4-1" class="electure-dialog" style="top:60px;left:220px;width:500px;">
<p>To save screen space, we abbreviate algorithm names into three characters each:</p><ol><li>Comparison-based Sorting Algorithms:<ol><li>BUB - Bubble Sort,</li><li>SEL - Selection Sort,</li><li>INS - Insertion Sort,</li><li>MER - Merge Sort (recursive implementation),</li><li>QUI - Quick Sort (recursive implementation),</li><li>R-Q - Random Quick Sort (recursive implementation).</li></ol></li><li>Not Comparison-based Sorting Algorithms:<ol><li>COU - Counting Sort,</li><li>RAD - Radix Sort.</li></ol></li></ol>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="4" title='Go to the previous slide 4'>&larr;</div>
<div class='electure-next' data-nextid="5" title='Go to the next slide 5'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-5" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We will discuss three comparison-based sorting algorithms in the next few slides:</p><ol><li><a href="?slide=6"><u>Bubble Sort</u></a>,</li><li><a href="?slide=7"><u>Selection Sort</u></a>,</li><li><a href="?slide=8"><u>Insertion Sort</u></a>.</li></ol><p>They are called <b>comparison-based</b> as they compare pairs of elements of the array and decide whether to swap them or not.</p><br><p>These three sorting algorithms are the easiest to implement but also not the most efficient, as they run in O(<b>N</b><sup>2</sup>).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="4-1" title='Go to the previous slide 4-1'>&larr;</div>
<div class='electure-next' data-nextid="6" title='Go to the next slide 6'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Before we start with the discussion of various sorting algorithms, it may be a good idea to discuss the basics of asymptotic algorithm analysis, so that you can follow the discussions of the various O(<b>N</b>^2), O(<b>N</b> log <b>N</b>), and special O(<b>N</b>) sorting algorithms later.</p><br><p>This section can be skipped if you already know this topic.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="5" title='Go to the previous slide 5'>&larr;</div>
<div class='electure-next' data-nextid="6-1" title='Go to the next slide 6-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>You need to already understand/remember all these:<br>-. Logarithm and Exponentiation, e.g., log<sub>2</sub>(1024) = 10, 2<sup>10</sup> = 1024<br>-. Arithmetic progression, e.g., 1+2+3+4+…+10 = 10*11/2 = 55<br>-. Geometric progression, e.g., 1+2+4+8+..+1024 = 1*(1-2<sup>11</sup>)/(1-2) = 2047<br>-. Linear/Quadratic/Cubic function, e.g., f1(x) = x+2, f2(x) = x<sup>2</sup>+x-1, f3(x) = x<sup>3</sup>+2x<sup>2</sup>-x+7<br>-. Ceiling, Floor, and Absolute function, e.g., ceil(3.1) = 4, floor(3.1) = 3, abs(-7) = 7</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6" title='Go to the previous slide 6'>&larr;</div>
<div class='electure-next' data-nextid="6-2" title='Go to the next slide 6-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Analysis of Algorithm is a process to evaluate rigorously the resources (time and space) needed by an algorithm and represent the result of the evaluation with a (simple) formula.</p><br><p>The time/space requirement of an algorithm is also called the time/space complexity of the algorithm, respectively.</p><br><p>For this module, we focus more on time requirement of various sorting algorithms.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-1" title='Go to the previous slide 6-1'>&larr;</div>
<div class='electure-next' data-nextid="6-3" title='Go to the next slide 6-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We can measure the actual running time of a program by using wall clock time or by inserting timing-measurement code into our program, e.g., see the code shown in <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.cpp" target="_blank"><u>SpeedTest.cpp</u></a> | <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.py" target="_blank"><u>py</u></a> | <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.java" target="_blank"><u>java</u></a>.</p><br><p>However, actual running time is not meaningful when comparing two algorithms as they are possibly coded in different languages, using different data sets, or running on different computers.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-2" title='Go to the previous slide 6-2'>&larr;</div>
<div class='electure-next' data-nextid="6-4" title='Go to the next slide 6-4'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-4" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Instead of measuring the actual timing, we count the # of operations (arithmetic, assignment, comparison, etc). This is a way to assess its efficiency as an algorithm&#39;s execution time is correlated to the # of operations that it requires.</p><br><p>See the code shown in <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.cpp" target="_blank"><u>SpeedTest.cpp</u></a> | <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.py" target="_blank"><u>py</u></a> | <a href="https://www.comp.nus.edu.sg/~stevenha/cs2040c/demos/SpeedTest.java" target="_blank"><u>java</u></a> and the comments (especially on how to get the final value of variable counter).</p><br><p>Knowing the (precise) number of operations required by the algorithm, we can state something like this: Algorithm <b>X</b> takes <b>2n<sup>2</sup> + 100n</b> operations to solve problem of size <b>n</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-3" title='Go to the previous slide 6-3'>&larr;</div>
<div class='electure-next' data-nextid="6-5" title='Go to the next slide 6-5'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-5" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>If the time <b>t</b> needed for one operation is known, then we can state that algorithm <b>X</b> takes <b>(2n<sup>2</sup> + 100n)t</b> time units to solve problem of size <b>n</b>.</p><br><p>However, time <b>t</b> is dependent on the factors mentioned earlier, e.g., different languages, compilers and computers, etc.</p><br><p>Therefore, instead of tying the analysis to actual time <b>t</b>, we can state that algorithm <b>X</b> takes time that is <b>proportional to 2n<sup>2</sup> + 100n</b> to solving problem of size <b>n</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-4" title='Go to the previous slide 6-4'>&larr;</div>
<div class='electure-next' data-nextid="6-6" title='Go to the next slide 6-6'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-6" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Asymptotic analysis is an analysis of algorithms that focuses on analyzing problems of <b>large input size n</b>, considers <b>only the leading term</b> of the formula, and <b>ignores the coefficient</b> of the leading term.</p><br><p>We choose the leading term because the lower order terms contribute lesser to the overall cost as the input grows larger, e.g., for f(n) = 2n<sup>2</sup> + 100n, we have:<br>f(1000) = 2*1000<sup>2</sup> + 100*1000 = 2.1M, vs<br>f(100000) = 2*100000<sup>2</sup> + 100*100000 = 20010M.<br>(notice that the lower order term 100n has lesser contribution).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-5" title='Go to the previous slide 6-5'>&larr;</div>
<div class='electure-next' data-nextid="6-7" title='Go to the next slide 6-7'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-7" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Suppose two algorithms have 2n<sup>2</sup> and 30n<sup>2</sup> as the leading terms, respectively.</p><br><p>Although actual time will be different due to the different constants, the growth rates of the running time are the same.</p><br><p>Compared with another algorithm with leading term of n<sup>3</sup>, the difference in growth rate is a much more dominating factor.</p><br><p>Hence, we can drop the coefficient of leading term when studying algorithm complexity.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-6" title='Go to the previous slide 6-6'>&larr;</div>
<div class='electure-next' data-nextid="6-8" title='Go to the next slide 6-8'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-8" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>If algorithm A requires time proportional to <b>f(n)</b>, we say that algorithm A is of the order of f(n).</p><br><p>We write that algorithm A has time complexity of <b>O(f(n))</b>, where <b>f(n)</b> is the growth rate function for algorithm A.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-7" title='Go to the previous slide 6-7'>&larr;</div>
<div class='electure-next' data-nextid="6-9" title='Go to the next slide 6-9'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-9" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Mathematically, an algorithm A is of O(<b>f(n)</b>) if there exist a constant <b>k</b> and a positive integer <b>n0</b> such that algorithm A requires no more than <b>k*f(n)</b> time units to solve a problem of size <b>n ≥ n0</b>, i.e., when the problem size is larger than <b>n0</b>, then algorithm A is (always) bounded from above by this simple formula <b>k*f(n)</b>.</p><br><center><img src="https://visualgo.net/img/big_O_notation.png" width="300" alt="Big-O Notation"></center><br><p>Note that: <b>n0</b> and <b>k</b> are not unique and there can be many possible valid <b>f(n)</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-8" title='Go to the previous slide 6-8'>&larr;</div>
<div class='electure-next' data-nextid="6-10" title='Go to the next slide 6-10'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-10" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>In asymptotic analysis, a formula can be simplified to a single term with coefficient 1.</p><br><p>Such a term is called a growth term (rate of growth, order of growth, order of magnitude).</p><br><p>The most common growth terms can be ordered from fastest to slowest as follows:<br>O(<b>1</b>)/constant time &lt; O(log <b>n</b>)/logarithmic time &lt; O(<b>n</b>)/linear time &lt;<br>O(<b>n</b> log <b>n</b>)/quasilinear time &lt; O(<b>n</b><sup>2</sup>)/quadratic time &lt; O(<b>n</b><sup>3</sup>)/cubic time &lt;<br>O(2<sup><b>n</b></sup>)/exponential time &lt; O(<b>n</b>!)/also-exponential time &lt; &infin; (e.g., an infinite loop).</p><br><p>Note that a few other common time complexities are not shown (also see the visualization in the next slide).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-9" title='Go to the previous slide 6-9'>&larr;</div>
<div class='electure-next' data-nextid="6-11" title='Go to the next slide 6-11'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-6-11" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<img src="https://visualgo.net/img/growth_rates.png" width="500" alt="Common Growth Terms"><br><p>We will see three different growth rates O(<b>n<sup>2</sup></b>), O(<b>n log n</b>), and O(<b>n</b>) throughout the remainder of this sorting module.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-10" title='Go to the previous slide 6-10'>&larr;</div>
<div class='electure-next' data-nextid="7" title='Go to the next slide 7'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-7" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Given an array of <b>N</b> elements, Bubble Sort will:</p><ol><li><b>Compare</b> a pair of adjacent items (a, b),</li><li>Swap that pair if the items are out of order (in this case, when a &gt; b),</li><li>Repeat Step 1 and 2 until we reach the end of array<br>(the last pair is the (<b>N</b>-2)-th and (<b>N</b>-1)-th items as we use 0-based indexing),</li><li>By now, the largest item will be at the last position.<br>We then reduce <b>N</b> by 1 and repeat Step 1 until we have <b>N = 1</b>.</li></ol><span class="notforprint"><p>Without further ado, let&#39;s try <span class="slide-actions" onclick="doButtonAction11()">Bubble Sort</span> on the small example array [29, 10, 14, 37, 14].</p><br><p>You should see a &#39;bubble-like&#39; animation if you imagine the larger items &#39;bubble up&#39; (actually &#39;float to the right side of the array&#39;).</p></span>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="6-11" title='Go to the previous slide 6-11'>&larr;</div>
<div class='electure-next' data-nextid="7-1" title='Go to the next slide 7-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-7-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void bubbleSort(int a[], int N) { // the standard version<br>  for (; N > 0; --N) // N iterations<br>    for (int i = 0; i < N-1; ++i) // except the last, O(N)<br>      if (a[i] > a[i+1]) // not in non-decreasing order<br>        swap(a[i], a[i+1]); // swap in O(1)<br>}</pre><p>Comparison and swap require time that is bounded by a constant, let&#39;s call it <b>c</b>. Then, there are two nested loops in (the standard) Bubble Sort. The outer loop runs for exactly <b>N</b> iterations. But the inner loop runs get shorter and shorter:</p><ol><li>When i=0, (<b>N</b>−1) iterations (of comparisons and possibly swaps),</li><li>When i=1, (<b>N</b>−2) iterations,<br>...,</li><li>When i=(<b>N</b>−2), 1 iteration,</li><li>When i=(<b>N</b>−1), 0 iteration.</li></ol><p>Thus, the total number of iterations = (<b>N</b>−1)+(<b>N</b>−2)+...+1+0 = <b>N</b>*(<b>N</b>−1)/2 (<a href="https://en.wikipedia.org/wiki/Arithmetic_progression#Sum" target="_blank"><u>derivation</u></a>).</p><p>Total time = c*<b>N</b>*(<b>N</b>−1)/2 = O(<b>N</b>^2).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="7" title='Go to the previous slide 7'>&larr;</div>
<div class='electure-next' data-nextid="7-2" title='Go to the next slide 7-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-7-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Bubble Sort is actually inefficient with its <b>O(N^2)</b> time complexity. Imagine that we have <b>N</b> = 10<sup>5</sup> numbers. Even if our computer is super fast and can compute 10<sup>8</sup> operations in 1 second, Bubble Sort will need about 100 seconds to complete.</p><br><p>However, it can be terminated early, e.g. on the small sorted ascending example shown above [3, 6, 11, 25, 39], <span class="slide-actions" onclick="doButtonAction11()">Bubble Sort</span> can terminates in O(<b>N</b>) time.</p><br><p>The improvement idea is simple: If we go through the inner loop with <b>no swapping</b> at all, it means that the array is <b>already sorted</b> and we can stop Bubble Sort at that point.</p><br><p>Discussion: Although it makes Bubble Sort runs faster in general cases, this improvement idea does not change <b>O(N^2)</b> time complexity of Bubble Sort... Why?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="7-1" title='Go to the previous slide 7-1'>&larr;</div>
<div class='electure-next' data-nextid="7-3" title='Go to the next slide 7-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-7-3" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="7-2" title='Go to the previous slide 7-2'>&larr;</div>
<div class='electure-next' data-nextid="8" title='Go to the next slide 8'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-8" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Given an array of <b>N</b> items and <b>L</b> = 0, Selection Sort will:</p><ol><li>Find the position <b>X</b> of the smallest item&nbsp;in the range of [<b>L</b>...<b>N</b>−1],</li><li>Swap <b>X</b>-th item with the <b>L</b>-th item,</li><li>Increase the lower-bound <b>L</b> by 1 and repeat Step 1 until <b>L</b> = <b>N</b>-2.</li></ol><p class="notforprint">Let&#39;s try <span class="slide-actions" onclick="doButtonAction8()">Selection Sort</span> on the same small example array [29, 10, 14, 37, 13].</p><br><p>Without loss of generality, we can also implement Selection Sort in reverse:<br>Find the position of the largest item <b>Y</b> and swap it with the last item.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="7-3" title='Go to the previous slide 7-3'>&larr;</div>
<div class='electure-next' data-nextid="8-1" title='Go to the next slide 8-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-8-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void selectionSort(int a[], int N) {<br>  for (int L = 0; L &lt;= N-2; ++L) { // O(<b>N</b>)<br>    int X = min_element(a+L, a+N) - a; // O(<b>N</b>)<br>    swap(a[X], a[L]); // O(1), X may be equal to L (no actual swap)<br>  }<br>}</pre><p>Total: O(<b>N</b><sup>2</sup>) — To be precise, it is similar to <a href="?slide=7-1"><u>Bubble Sort analysis</u></a>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="8" title='Go to the previous slide 8'>&larr;</div>
<div class='electure-next' data-nextid="8-2" title='Go to the next slide 8-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-8-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<span class="notforprint"><input class="mcq-answer" id="mcq-answer-4" value="26" hidden><p>Quiz: <b>How many (real) swaps are required to sort [29, 10, 14, 37, 13] by Selection Sort?</b></p><form><input type="radio" name="mcq-4-choice" value="25"> 2<br><input type="radio" name="mcq-4-choice" value="26"> 3<br><input type="radio" name="mcq-4-choice" value="27"> 4<br><input type="radio" name="mcq-4-choice" value="24"> 1<br></form><button class="mcq-submit" id="submit-4">Submit</button> <span id="answer-status-4"></span></span>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="8-1" title='Go to the previous slide 8-1'>&larr;</div>
<div class='electure-next' data-nextid="9" title='Go to the next slide 9'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-9" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Insertion sort is similar to how most people arrange a hand of poker cards. <img src="https://puu.sh/vfi6a/e532309371.png" alt="Poker hand"></p><ol><li>Start with one card in your hand,</li><li>Pick the next card and insert it into its proper sorted order,</li><li>Repeat previous step for all cards.</li></ol><p class="notforprint">Let&#39;s try <span class="slide-actions" onclick="doButtonAction10()">Insertion Sort</span> on the small example array [40, 13, 20, 8].</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="8-2" title='Go to the previous slide 8-2'>&larr;</div>
<div class='electure-next' data-nextid="9-1" title='Go to the next slide 9-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-9-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void insertionSort(int a[], int N) {<br>  for (int i = 1; i &lt; N; ++i) { // O(N)<br>    int X = a[i]; // X is the item to be inserted<br>    int j = i-1;<br>    for (; j &gt;= 0 &amp;&amp; a[j] &gt; X; --j) // can be fast or slow<br>      a[j+1] = a[j]; // make a place for X<br>    a[j+1] = X; // index j+1 is the insertion point<br>  }<br>}</pre>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="9" title='Go to the previous slide 9'>&larr;</div>
<div class='electure-next' data-nextid="9-2" title='Go to the next slide 9-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-9-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>The outer loop executes <b>N</b>−1 times, that&#39;s quite clear.</p><br><p>But the number of times the inner-loop is executed depends on the input:</p><ol><li>In best-case scenario, the array is already sorted and (a[j] &gt; X) is always false<br>So no shifting of data is necessary and the inner loop runs in O(<b>1</b>),</li><li>In worst-case scenario, the array is reverse sorted and (a[j] &gt; X) is always true<br>Insertion always occur at the front of the array and the inner loop runs in O(<b>N</b>).</li></ol><p>Thus, the best-case time is O(<b>N &times; 1</b>) = O(<b>N</b>) and the worst-case time is O(<b>N &times; N</b>) = O(<b>N</b><sup>2</sup>).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="9-1" title='Go to the previous slide 9-1'>&larr;</div>
<div class='electure-next' data-nextid="9-3" title='Go to the next slide 9-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-9-3" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<span class="notforprint"><input class="mcq-answer" id="mcq-answer-5" value="31" hidden><p>Quiz: <b>What is the complexity of Insertion Sort on any input array?</b></p><form><input type="radio" name="mcq-5-choice" value="29"> O(N)<br><input type="radio" name="mcq-5-choice" value="31"> O(N^2)<br><input type="radio" name="mcq-5-choice" value="30"> O(N log N)<br><input type="radio" name="mcq-5-choice" value="28"> O(1)<br></form><button class="mcq-submit" id="submit-5">Submit</button> <span id="answer-status-5"></span><br><br><p>Ask your instructor if you are not clear on this or read similar remarks on <a href="?slide=11-10"><u>this slide</u></a>.</p></span>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="9-2" title='Go to the previous slide 9-2'>&larr;</div>
<div class='electure-next' data-nextid="10" title='Go to the next slide 10'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-10" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We will discuss two (and a half) comparison-based sorting algorithms soon:</p><ol><li><a href="?slide=11"><u>Merge Sort</u></a>,</li><li><a href="?slide=12"><u>Quick Sort</u></a> and its <a href="?slide=13"><u>Randomized version</u></a> (which only has one change).</li></ol><p>These sorting algorithms are usually implemented recursively, use Divide and Conquer problem solving paradigm, and run in O(<b>N</b> log <b>N</b>) time for Merge Sort and O(<b>N</b> log <b>N</b>) time <i>in expectation</i> for Randomized Quick Sort.</p><br><p>PS: The non-randomized version of Quick Sort runs in O(<b>N<sup>2</sup></b>) though.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="9-3" title='Go to the previous slide 9-3'>&larr;</div>
<div class='electure-next' data-nextid="11" title='Go to the next slide 11'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Given an array of <b>N</b> items, Merge Sort will:</p><ol><li>Merge each pair of individual element (which is by default, sorted) into sorted arrays of 2 elements,</li><li>Merge each pair of sorted arrays of 2 elements into sorted arrays of 4 elements,<br>Repeat the process...,</li><li>Final step: Merge 2 sorted arrays of <b>N</b>/2 elements (for simplicity of this discussion, we assume that <b>N</b> is even) to obtain a fully sorted array of <b>N</b> elements.</li></ol><p>This is just the general idea and we need a few more details before we can discuss the true form of Merge Sort.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="10" title='Go to the previous slide 10'>&larr;</div>
<div class='electure-next' data-nextid="11-1" title='Go to the next slide 11-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>We will dissect this Merge Sort algorithm by first discussing its most important sub-routine: The O(<b>N</b>) <samp>merge</samp>.</p><br><p>Given two sorted array, A and B, of size <b>N<sub>1</sub></b> and <b>N<sub>2</sub></b>, we can efficiently merge them into one larger combined sorted array of size <b>N</b> = <b>N<sub>1</sub></b>+<b>N<sub>2</sub></b>, in O(<b>N</b>) time.</p><br><p>This is achieved by simply comparing the front of the two arrays and take the smaller of the two at all times. However, this simple but fast O(<b>N</b>) <samp>merge</samp> sub-routine will need additional array to do this merging correctly.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11" title='Go to the previous slide 11'>&larr;</div>
<div class='electure-next' data-nextid="11-2" title='Go to the next slide 11-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void merge(int a[], int low, int mid, int high) {<br>  // subarray1 = a[low..mid], subarray2 = a[mid+1..high], both sorted<br>  int N = high-low+1;<br>  int b[N]; // discuss: why do we need a temporary array b?<br>  int left = low, right = mid+1, bIdx = 0;<br>  while (left &lt;= mid &amp;&amp; right &lt;= high) // the merging<br>    b[bIdx++] = (a[left] &lt;= a[right]) ? a[left++] : a[right++];<br>  while (left &lt;= mid) b[bIdx++] = a[left++]; // leftover, if any<br>  while (right &lt;= high) b[bIdx++] = a[right++]; // leftover, if any<br>  for (int k = 0; k &lt; N; ++k) a[low+k] = b[k]; // copy back<br>}<br></pre><p class="notforprint">Try <span class="slide-actions" onclick="doButtonAction12()">Merge Sort</span> on the example array [1, 5, 19, 20, 2, 11, 15, 17] that have its first half already sorted [1, 5, 19, 20] and its second half also already sorted [2, 11, 15, 17]. Concentrate on the last merge of the Merge Sort algorithm.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-1" title='Go to the previous slide 11-1'>&larr;</div>
<div class='electure-next' data-nextid="11-3" title='Go to the next slide 11-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-3" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Before we continue, let&#39;s talk about Divide and Conquer (abbreviated as D&amp;C), a powerful problem solving paradigm.</p><br><p>Divide and Conquer algorithm solves (certain kind of) problem — like our sorting problem — in the following steps:</p><ol><li>Divide step: Divide the large, original problem into smaller sub-problems and recursively solve the smaller sub-problems,</li><li>Conquer step: Combine the results of the smaller sub-problems to produce the result of the larger, original problem.</li></ol>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-2" title='Go to the previous slide 11-2'>&larr;</div>
<div class='electure-next' data-nextid="11-4" title='Go to the next slide 11-4'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-4" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Merge Sort is a Divide and Conquer sorting algorithm.</p><br><p>The divide step is simple: Divide the current array into two halves (perfectly equal if <b>N</b> is even or one side is slightly greater by one element if <b>N</b> is odd) and then recursively sort the two halves.</p><br><p>The conquer step is the one that does the most work: Merge the two (sorted) halves to form a sorted array, using the merge sub-routine <a href="?slide=11-2"><u>discussed earlier</u></a>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-3" title='Go to the previous slide 11-3'>&larr;</div>
<div class='electure-next' data-nextid="11-5" title='Go to the next slide 11-5'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-5" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void mergeSort(int a[], int low, int high) {<br>  // the array to be sorted is a[low..high]<br>  if (low &lt; high) { // base case: low &gt;= high (0 or 1 item)<br>    int mid = (low+high) / 2;	<br>    mergeSort(a, low  , mid ); // divide into two halves<br>    mergeSort(a, mid+1, high); // then recursively sort them<br>    merge(a, low, mid, high); // conquer: the merge subroutine<br>  }<br>}</pre>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-4" title='Go to the previous slide 11-4'>&larr;</div>
<div class='electure-next' data-nextid="11-6" title='Go to the next slide 11-6'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-6" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Contrary to what many other CS printed textbooks usually show (as textbooks are static), the actual execution of Merge Sort does <b>not</b> split to two subarrays <b>level by level</b>, but it will recursively sort the <b>left</b> subarray first before dealing with the <b>right</b> subarray.</p><br><p>That&#39;s it, running <span class="slide-actions" onclick="doButtonAction12()">Merge Sort</span> on the example array [7, 2, 6, 3, 8, 4, 5], it will recurse to [7, 2, 6, 3], then [7, 2], then [7] (a single element, sorted by default), backtrack, recurse to [2] (sorted), backtrack, then finally merge [7, 2] into [2, 7], before it continue processing [6, 3] and so on.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-5" title='Go to the previous slide 11-5'>&larr;</div>
<div class='electure-next' data-nextid="11-7" title='Go to the next slide 11-7'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-7" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>In Merge Sort, the bulk of work is done in the conquer/merge step as the divide step does not really do anything (treated as O(<b>1</b>)).</p><br><p>When we call <samp>merge(a, low, mid, high)</samp>, we process <b>k = (high-low+1)</b> items.<br>There will be at most <b>k-1</b> comparisons.<br>There are <b>k</b> moves from original array <b>a</b> to temporary array <b>b</b> and another <b>k</b> moves back.<br>In total, number of operations inside <samp>merge</samp> sub-routine is &lt; 3<b>k</b>-1 = O(<b>k</b>).</p><br><p>The important question is how many times this <samp>merge</samp> sub-routine is called?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-6" title='Go to the previous slide 11-6'>&larr;</div>
<div class='electure-next' data-nextid="11-8" title='Go to the next slide 11-8'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-8" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<img src="https://visualgo.net/img/merge.png" width="500" alt="The Recursion Tree of Merge Sort">
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-7" title='Go to the previous slide 11-7'>&larr;</div>
<div class='electure-next' data-nextid="11-9" title='Go to the next slide 11-9'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-9" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Level 1: 2^0=1 calls to merge() with <b>N</b>/2^1 items each, O(2^0 x 2 x <b>N</b>/2^1) = O(<b>N</b>)<br>Level 2: 2^1=2 calls to merge() with <b>N</b>/2^2 items each, O(2^1 x 2 x <b>N</b>/2^2) = O(<b>N</b>)<br>Level 3: 2^2=4 calls to merge() with <b>N</b>/2^3 items each, O(2^2 x 2 x <b>N</b>/2^3) = O(<b>N</b>)<br>...<br>Level (log <b>N</b>): 2^(log <b>N</b>-1) (or <b>N</b>/2) calls to merge() with <b>N</b>/2^log <b>N</b> (or 1) item each, O(<b>N</b>)</p><br><p>There are log <b>N</b> levels and in each level, we perform O(<b>N</b>) work, thus the overall time complexity is O(<b>N</b> log <b>N</b>). We will <a href="?slide=14-1"><u>later</u></a> see that this is an optimal (comparison-based) sorting algorithm, i.e., we cannot do better than this.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-8" title='Go to the previous slide 11-8'>&larr;</div>
<div class='electure-next' data-nextid="11-10" title='Go to the next slide 11-10'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-10" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>The most important good part of Merge Sort is its O(<b>N</b> log <b>N</b>) performance guarantee, regardless of the original ordering of the input. That&#39;s it, there is <b>no</b> adversary test case that can make Merge Sort runs longer than O(<b>N</b> log <b>N</b>) for <b>any</b> array of <b>N</b> elements.</p><br><p>Merge Sort is therefore very suitable to sort extremely large number of inputs as O(<b>N</b> log <b>N</b>) grows much slower than the O(<b>N</b><sup>2</sup>) sorting algorithms that we have <a href="?slide=5"><u>discussed earlier</u></a>.</p><br><p>There are however, several not-so-good parts of Merge Sort. First, it is actually not easy to implement from scratch (<a href="?slide=19-3"><u>but we don&#39;t have to</u></a>). Second, it requires additional O(<b>N</b>) storage during <a href="?slide=11-2"><u>merging operation</u></a>, thus not really memory efficient and <a href="?slide=17-1"><u>not in-place</u></a>. Btw, if you are interested to see what have been done to address these (classic) Merge Sort not-so-good parts, you can read <a href="https://en.wikipedia.org/wiki/Merge_sort#Variants" target="_blank"><u>this</u></a>.</p><br><p>Merge Sort is also a <a href="?slide=17-2"><u>stable sort</u></a> algorithm. Discussion: Why?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-9" title='Go to the previous slide 11-9'>&larr;</div>
<div class='electure-next' data-nextid="11-11" title='Go to the next slide 11-11'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-11-11" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-10" title='Go to the previous slide 11-10'>&larr;</div>
<div class='electure-next' data-nextid="12" title='Go to the next slide 12'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Quick Sort is another Divide and Conquer sorting algorithm (the other one discussed in this visualization page is <a href="?slide=11"><u>Merge Sort</u></a>).</p><br><p>We will see that this deterministic, non randomized version of Quick Sort can have bad time complexity of O(<b>N</b><sup>2</sup>) on adversary input before continuing with the <a href="?slide=13"><u>randomized</u></a> and usable version later.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="11-11" title='Go to the previous slide 11-11'>&larr;</div>
<div class='electure-next' data-nextid="12-1" title='Go to the next slide 12-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Divide step: Choose an item <b>p</b> (known as the pivot)<br>Then partition the items of <b>a[i..j]</b> into three parts: <b>a[i..m-1]</b>, <b>a[m]</b>, and <b>a[m+1..j]</b>.<br><b>a[i..m-1]</b> (possibly empty) contains items that are smaller than (or equal to) <b>p</b>.<br><b>a[m] = p</b>, i.e., index <b>m</b> is the correct position for <b>p</b> in the sorted order of array <b>a</b>.<br><b>a[m+1..j]</b> (possibly empty) contains items that are greater than (or equal to) <b>p</b>.<br>Then, recursively sort the two parts.</p><br><p>Conquer step: Don&#39;t be surprised... We do nothing :O!</p><br><p>If you compare this with <a href="?slide=11-4"><u>Merge Sort</u></a>, you will see that Quick Sort D&amp;C steps are totally opposite with Merge Sort.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12" title='Go to the previous slide 12'>&larr;</div>
<div class='electure-next' data-nextid="12-2" title='Go to the next slide 12-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>We will dissect this Quick Sort algorithm by first discussing its most important sub-routine: The O(<b>N</b>) <samp>partition</samp> (classic version).</p><br><p>To partition <b>a[i..j]</b>, we first choose <b>a[i]</b> as the pivot <b>p</b>.<br></p><p>The remaining items (i.e., <b>a[i+1..j]</b>) are divided into 3 regions:</p><ol><li><b>S1</b> = <b>a[i+1..m]</b> where items are &le; <b>p</b>,</li><li><b>S2</b> = <b>a[m+1..k-1]</b> where items are &ge; <b>p</b>, and</li><li>Unknown = <b>a[k..j]</b>, where items are yet to be assigned to either <b>S1</b> or <b>S2</b>.</li></ol><p>Discussion: Why do we choose <b>p</b> = <b>a[i]</b>? Are there other choices?</p><br><p>Harder Discussion: If <b>a[k] == p</b>, should we put it in region S1 or S2?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-1" title='Go to the previous slide 12-1'>&larr;</div>
<div class='electure-next' data-nextid="12-3" title='Go to the next slide 12-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-3" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-2" title='Go to the previous slide 12-2'>&larr;</div>
<div class='electure-next' data-nextid="12-4" title='Go to the next slide 12-4'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-4" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Initially, both <b>S1</b> and <b>S2</b> regions are empty, i.e., all items excluding the designated pivot <b>p</b> are in the unknown region.</p><br><p>Then, for each item <b>a[k]</b> in the unknown region, we compare <b>a[k]</b> with <b>p</b> and decide one of the three cases:</p><ol><li>If <b>a[k]</b> &gt; <b>p</b>, put <b>a[k]</b> into <b>S2</b>,</li><li>If <b>a[k]</b> &lt; <b>p</b>, put <b>a[k]</b> into <b>S1</b>,</li><li>If <b>a[k]</b> == <b>p</b>, throw a coin and put <b>a[k]</b> into <b>S1</b>/<b>S2</b> if it lands head/tail, respectively.</ol><p>These three cases are elaborated in the next two slides.</p><br><p>Lastly, we swap <b>a[i]</b> and <b>a[m]</b> to put pivot <b>p</b> right in the middle of <b>S1</b> and <b>S2</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-3" title='Go to the previous slide 12-3'>&larr;</div>
<div class='electure-next' data-nextid="12-5" title='Go to the next slide 12-5'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-5" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<img src="https://visualgo.net/img/partition1.png" width="500" alt="Case when a[k] &ge; p, increment k, extend S2 by 1 item">
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-4" title='Go to the previous slide 12-4'>&larr;</div>
<div class='electure-next' data-nextid="12-6" title='Go to the next slide 12-6'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-6" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<img src="https://visualgo.net/img/partition2.png" width="500" alt="Case when a[k] &lt; p, increment m, swap a[k] with a[m], increment k, extend S1 by 1 item">
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-5" title='Go to the previous slide 12-5'>&larr;</div>
<div class='electure-next' data-nextid="12-7" title='Go to the next slide 12-7'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-7" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>int partition(int a[], int i, int j) {<br>  int p = a[i]; // p is the pivot<br>  int m = i; // S1 and S2 are initially empty<br>  for (int k = i+1; k &lt;= j; ++k) { // explore the unknown region<br>    if ((a[k] &lt; p) || ((a[k] == p) && (rand()%2 == 0)))  { // case 2+3<br>      ++m;<br>      swap(a[k], a[m]); // C++ STL algorithm std::swap<br>    } // notice that we do nothing in case 1: a[k] &gt; p<br>  }<br>  swap(a[i], a[m]); // final step, swap pivot with a[m]<br>  return m; // return the index of pivot<br>}</pre>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-6" title='Go to the previous slide 12-6'>&larr;</div>
<div class='electure-next' data-nextid="12-8" title='Go to the next slide 12-8'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-8" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<pre>void quickSort(int a[], int low, int high) {<br>  if (low &lt; high) {<br>    int m = partition(a, low, high); // O(N)<br>    // a[low..high] ~&gt; a[low..m–1], pivot, a[m+1..high]<br>    quickSort(a, low, m-1); // recursively sort left subarray<br>    // a[m] = pivot is already sorted after partition<br>    quickSort(a, m+1, high); // then sort right subarray<br>  }<br>}</pre>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-7" title='Go to the previous slide 12-7'>&larr;</div>
<div class='electure-next' data-nextid="12-9" title='Go to the next slide 12-9'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-9" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Try <span class="slide-actions" onclick="doButtonAction13()">Quick Sort</span> on example array [27, 38, 12, 39, 29, 16]. We shall elaborate the first partition step as follows:<br>We set <b>p = a[0] = 27</b>.<br>We set <b>a[1] = 38</b> as part of <b>S2</b> so <b>S1 = {}</b> and <b>S2 = {38}</b>.<br>We swap <b>a[1] = 38</b> with <b>a[2] = 12</b> so <b>S1 = {12}</b> and <b>S2 = {38}</b>.<br>We set <b>a[3] = 39</b> and later <b>a[4] = 29</b> as part of <b>S2</b> so <b>S1 = {12}</b> and <b>S2 = {38,39,29}</b>.<br>We swap <b>a[2] = 38</b> with <b>a[5] = 16</b> so <b>S1 = {12,16}</b> and <b>S2 = {39,29,38}</b>.<br>We swap <b>p = a[0] = 27</b> with <b>a[2] = 16</b> so <b>S1 = {16,12}</b>, <b>p = {27}</b>, and <b>S2 = {39,29,38}</b>.</p><br><p>After this, <b>a[2] = 27</b> is guaranteed to be sorted and now Quick Sort recursively sorts the left side <b>a[0..1]</b> first and later recursively sorts the right side <b>a[3..5]</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-8" title='Go to the previous slide 12-8'>&larr;</div>
<div class='electure-next' data-nextid="12-10" title='Go to the next slide 12-10'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-10" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>First, we analyze the cost of one call of <samp>partition</samp>.</p><br><p>Inside <samp>partition(a, i, j)</samp>, there is only a single for-loop that iterates through (j-i) times. As j can be as big as <b>N</b>-1 and i can be as low as 0, then the time complexity of partition is O(<b>N</b>).</p><br><p>Similar to <a href="?slide=11-7"><u>Merge Sort analysis</u></a>, the time complexity of Quick Sort is then dependent on the number of times <samp>partition(a, i, j)</samp> is called.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-9" title='Go to the previous slide 12-9'>&larr;</div>
<div class='electure-next' data-nextid="12-11" title='Go to the next slide 12-11'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-11" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>When the array <b>a</b> is already in ascending order, e.g., <b>a</b> = [5, 18, 23, 39, 44, 50], <span class="slide-actions" onclick="doButtonAction13()">Quick Sort</span> will set <b>p = a[0] = 5</b>, and will return <b>m = 0</b>, thereby making <b>S1</b> region <b>empty</b> and <b>S2</b> region: Everything else other than the pivot (<b>N</b>-1 items).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-10" title='Go to the previous slide 12-10'>&larr;</div>
<div class='electure-next' data-nextid="12-12" title='Go to the next slide 12-12'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-12" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>On such worst case input scenario, this is what happens:</p><br><img src="https://visualgo.net/img/qsort_worstcase.png" width="250" alt="Worst Case analysis of Quick Sort"><br><p>The first partition takes O(<b>N</b>) time, splits <b>a</b> into 0, 1, <b>N</b>-1 items, then recurse right.<br>The second one takes O(<b>N</b>-1) time, splits <b>a</b> into 0, 1, <b>N</b>-2 items, then recurse right again.<br>...<br>Until the last, <b>N</b>-th partition splits <b>a</b> into 0, 1, 1 item, and Quick Sort recursion stops.<br></p><br><p>This is the classic <b>N+(N-1)+(N-2)+...+1</b> pattern, which is O(<b>N</b><sup>2</sup>), similar analysis as the one <a href="?slide=7-1"><u>in this Bubble Sort analysis slide</u></a>...</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-11" title='Go to the previous slide 12-11'>&larr;</div>
<div class='electure-next' data-nextid="12-13" title='Go to the next slide 12-13'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-12-13" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>The best case scenario of Quick Sort occurs when partition always splits the array into <b>two equal halves</b>, like <a href="?slide=11-8"><u>Merge Sort</u></a>.</p><br><p>When that happens, the depth of recursion is only O(log <b>N</b>).</p><br><p>As each level takes O(<b>N</b>) comparisons, the time complexity is O(<b>N</b> log <b>N</b>).</p><br><p>Try <span class="slide-actions" onclick="doButtonAction13()">Quick Sort</span> on this hand-crafted example input array [4, 1, 3, 2, 6, 5, 7].<br>In practice, this is rare, thus we need to devise a better way: <a href="?slide=13"><u>Randomized Quick Sort</u></a>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-12" title='Go to the previous slide 12-12'>&larr;</div>
<div class='electure-next' data-nextid="13" title='Go to the next slide 13'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-13" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Same as <b>Quick Sort</b> except just before executing the partition algorithm, it <b>randomly</b> select the pivot between <b>a[i..j]</b> instead of always choosing <b>a[i]</b> (or any other fixed index between <b>[i..j]</b>) deterministically.</p><br><p>Mini exercise: Implement the idea above to the implementation shown in <a href="?slide=12-7"><u>this slide</u></a>!</p><br><p>Running <span class="slide-actions" onclick="doButtonAction14()">Random Quick Sort</span> on this large and somewhat random example array <b>a</b> = [3,44,38,5,47,15,36,26,27,2,46,4,19,50,48] feels fast.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="12-13" title='Go to the previous slide 12-13'>&larr;</div>
<div class='electure-next' data-nextid="13-1" title='Go to the next slide 13-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-13-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>It will take about 1 hour lecture to properly explain why this randomized version of Quick Sort has expected time complexity of O(<b>N</b> log <b>N</b>) on <b>any</b> input array of <b>N</b> elements.</p><br><p>In this e-Lecture, we will assume that it is true.</p><br><p>If you need non formal explanation: Just imagine that on randomized version of Quick Sort that randomizes the pivot selection, we will <b>not</b> always get extremely bad split of 0 (empty), 1 (pivot), and <b>N</b>-1 other items. This combination of lucky (half-pivot-half), somewhat lucky, somewhat unlucky, and extremely unlucky (empty, pivot, the rest) yields an average time complexity of O(<b>N</b> log <b>N</b>).</p><br><p>Discussion: For the implementation of <a href="?slide=12-4"><u>Partition</u></a>, what happen if <b>a[k] == p</b>, we <i>always</i> put <b>a[k]</b> on either side (<b>S1</b> or <b>S2</b>) deterministically?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="13" title='Go to the previous slide 13'>&larr;</div>
<div class='electure-next' data-nextid="13-2" title='Go to the next slide 13-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-13-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="13-1" title='Go to the previous slide 13-1'>&larr;</div>
<div class='electure-next' data-nextid="14" title='Go to the next slide 14'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-14" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We will discuss two <b>non comparison-based</b> sorting algorithms in the next few slides:</p><ol><li><a href="?slide=15"><u>Counting Sort</u></a>,</li><li><a href="?slide=16"><u>Radix Sort</u></a>.</li></ol><p>These sorting algorithms can be faster than the lower bound of comparison-based sorting algorithm of &Omega;(<b>N</b> log <b>N</b>) by <b>not</b> comparing the items of the array.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="13-2" title='Go to the previous slide 13-2'>&larr;</div>
<div class='electure-next' data-nextid="14-1" title='Go to the next slide 14-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-14-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>It is known (also not proven in this visualization as it will take another 1 hour lecture to do so) that all <b>comparison-based</b> sorting algorithms have a lower bound time complexity of Ω(<b>N</b> log <b>N</b>).</p><br><p>Thus, any comparison-based sorting algorithm with worst-case complexity O(<b>N</b> log <b>N</b>), like <a href="?slide=11-9"><u>Merge Sort</u></a> is considered an optimal algorithm, i.e., we cannot do better than that.</p><br><p>However, we can achieve faster sorting algorithm &mdash; i.e., in O(<b>N</b>) &mdash; if certain assumptions of the input array exist and thus we can avoid comparing the items to determine the sorted order.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="14" title='Go to the previous slide 14'>&larr;</div>
<div class='electure-next' data-nextid="15" title='Go to the next slide 15'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-15" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p><b>Assumption</b>: If the items to be sorted are <b>Integers with small range</b>, we can count the frequency of occurrence of each Integer (in that small range) and then loop through that small range to output the items in sorted order.</p><br><p>Try <span class="slide-actions" onclick="doButtonAction15()">Counting Sort</span> on the example array above where all Integers are within [1..9], thus we just need to count how many times Integer 1 appears, Integer 2 appears, ..., Integer 9 appears, and then loop through 1 to 9 to print out <b>x</b> copies of Integer <b>y</b> if frequency[<b>y</b>] = <b>x</b>.</p><br><p>The time complexity is O(<b>N</b>) to count the frequencies and O(<b>N+k</b>) to print out the output in sorted order where <b>k</b> is the range of the input Integers, which is 9-1+1 = 9 in this example. The time complexity of Counting Sort is thus O(<b>N+k</b>), which is O(<b>N</b>) if <b>k</b> is small.</p><br><p>We will not be able to do the counting part of Counting Sort when <b>k</b> is relatively big due to memory limitation, as we need to store frequencies of those <b>k</b> integers.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="14-1" title='Go to the previous slide 14-1'>&larr;</div>
<div class='electure-next' data-nextid="16" title='Go to the next slide 16'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-16" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p><b>Assumption</b>: If the items to be sorted are <b>Integers with large range but of few digits</b>, we can combine <a href="?slide=15"><u>Counting Sort</u></a> idea with Radix Sort to achieve the linear time complexity.</p><br><p>In Radix Sort, we treat each item to be sorted as a string of <b>w</b> digits (we pad Integers that have less than <b>w</b> digits with leading zeroes if necessary).</p><br><p>For the least significant (rightmost) digit to the most significant digit (leftmost), we pass through the <b>N</b> items and put them according to the active digit into 10 Queues (one for each digit [0..9]), which is like a <i>modified</i> Counting Sort as this one preserves <a href="?slide=17-2"><u>stability</u></a>. Then we re-concatenate the groups again for subsequent iteration.</p><br><p>Try <span class="slide-actions" onclick="doButtonAction16()">Radix Sort</span> on the example array above for clearer explanation.</p><br><p>Notice that we only perform O(<b>w &times; (N+k)</b>) iterations. In this example, <b>w = 4</b> and <b>k = 10</b>.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="15" title='Go to the previous slide 15'>&larr;</div>
<div class='electure-next' data-nextid="16-1" title='Go to the next slide 16-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-16-1" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<p>Now, having discussed about Radix Sort, should we use it for <b>every</b> sorting situation?</p><br><p>For example, it should be theoretically faster to sort many (<b>N</b> is very large) 32-bit signed integers as <b>w &le; 10</b> digits and <b>k = 10</b> if we interpret those 32-bit signed integers in Decimal. O(10 &times; (<b>N</b>+10)) = O(<b>N</b>).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="16" title='Go to the previous slide 16'>&larr;</div>
<div class='electure-next' data-nextid="16-2" title='Go to the next slide 16-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-16-2" class="electure-dialog" style="top:310px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="16-1" title='Go to the previous slide 16-1'>&larr;</div>
<div class='electure-next' data-nextid="17" title='Go to the next slide 17'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-17" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>There are a few other properties that can be used to differentiate sorting algorithms on top of whether they are comparison or non-comparison, recursive or iterative.</p><br><p>In this section, we will talk about in-place versus not in-place, stable versus not stable, and caching performance of sorting algorithms.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="16-2" title='Go to the previous slide 16-2'>&larr;</div>
<div class='electure-next' data-nextid="17-1" title='Go to the next slide 17-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-17-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>A sorting algorithm is said to be an <b>in-place sorting</b> algorithm if it requires only a constant amount (i.e. O(<b>1</b>)) of extra space during the sorting process. That&#39;s it, a few, constant number of extra variables is OK but we are not allowed to have variables that has variable length depending on the input size <b>N</b>.</p><br><p><a href="?slide=11-2"><u>Merge Sort</u></a> (the classic version), due to its <samp>merge</samp> sub-routine that requires additional temporary array of size <b>N</b>, is not in-place.</p><br><p>Discussion: How about Bubble Sort, Selection Sort, Insertion Sort, Quick Sort (randomized or not), Counting Sort, and Radix Sort. Which ones are in-place?</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="17" title='Go to the previous slide 17'>&larr;</div>
<div class='electure-next' data-nextid="17-2" title='Go to the next slide 17-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-17-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>A sorting algorithm is called <b>stable</b> if the relative order of elements <b>with the same key value</b> is preserved by the algorithm after sorting is performed.</p><br><p>Example application of stable sort: Assume that we have student names that have been sorted in alphabetical order. Now, if this list is sorted again by tutorial group number (recall that one tutorial group usually has many students), a stable sort algorithm would ensure that all students in the same tutorial group still appear in alphabetical order of their names.</p><br><p>Discussion: Which of the sorting algorithms discussed in this e-Lecture are stable?<br>Try sorting array A = {3, 4a, 2, 4b, 1}, i.e. there are two copies of 4 (4a first, then 4b).</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="17-1" title='Go to the previous slide 17-1'>&larr;</div>
<div class='electure-next' data-nextid="17-3" title='Go to the next slide 17-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-17-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="17-2" title='Go to the previous slide 17-2'>&larr;</div>
<div class='electure-next' data-nextid="18" title='Go to the next slide 18'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-18" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We are nearing the end of this e-Lecture.</p><br><p>Time for a few simple questions.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="17-3" title='Go to the previous slide 17-3'>&larr;</div>
<div class='electure-next' data-nextid="18-1" title='Go to the next slide 18-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-18-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<input class="mcq-answer" id="mcq-answer-1" value="5" hidden><p>Quiz: <b>Which of these algorithms run in O(N log N) on any input array of size N?</b></p><form><input type="radio" name="mcq-1-choice" value="2"> Bubble Sort<br><input type="radio" name="mcq-1-choice" value="3"> Insertion Sort<br><input type="radio" name="mcq-1-choice" value="4"> Quick Sort (Deterministic)<br><input type="radio" name="mcq-1-choice" value="5"> Merge Sort<br></form><button class="mcq-submit" id="submit-1">Submit</button> <span id="answer-status-1"></span>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="18" title='Go to the previous slide 18'>&larr;</div>
<div class='electure-next' data-nextid="18-2" title='Go to the next slide 18-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-18-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<input class="msq-answer" id="msq-answer-3" value="13,15,16" hidden><p>Quiz: <b>Which of these algorithms has worst case time complexity of Θ(N^2) for sorting N integers?</b></p><input type="checkbox" class="msq-choice" id="msq-3-choice-15"> Insertion Sort<br><input type="checkbox" class="msq-choice" id="msq-3-choice-16"> Selection Sort<br><input type="checkbox" class="msq-choice" id="msq-3-choice-14"> Merge Sort<br><input type="checkbox" class="msq-choice" id="msq-3-choice-23"> Radix Sort<br><input type="checkbox" class="msq-choice" id="msq-3-choice-13"> Bubble Sort<br><button class="msq-submit" id="submit-3">Submit</button> <span id="answer-status-3"></span><br><br><p>Θ is a tight time complexity analysis where the best case &Omega; and the worst case big-O analysis match.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="18-1" title='Go to the previous slide 18-1'>&larr;</div>
<div class='electure-next' data-nextid="19" title='Go to the next slide 19'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>We have reached the end of sorting e-Lecture.</p><br><p>However, there are two other sorting algorithms in VisuAlgo that are embedded in other data structures: <a href="./heap"><u>Heap Sort</u></a> and <a href="./bst"><u>Balanced BST Sort</u></a>. We will discuss them when you go through the e-Lecture of those two data structures.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="18-2" title='Go to the previous slide 18-2'>&larr;</div>
<div class='electure-next' data-nextid="19-1" title='Go to the next slide 19-1'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="19" title='Go to the previous slide 19'>&larr;</div>
<div class='electure-next' data-nextid="19-2" title='Go to the next slide 19-2'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="19-1" title='Go to the previous slide 19-1'>&larr;</div>
<div class='electure-next' data-nextid="19-3" title='Go to the next slide 19-3'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Actually, the C++ source code for many of these basic sorting algorithms are already scattered throughout these e-Lecture slides. For other programming languages, you can translate the given C++ source code to the other programming language.</p><br><p>Usually, sorting is just a small part in problem solving process and nowadays, most of programming languages have their own sorting functions so we don&#39;t really have to re-code them <i>unless absolutely necessary</i>.</p><br><p>In C++, you can use <a href="http://en.cppreference.com/w/cpp/algorithm/sort" target="_blank"><u>std::sort</u></a> (most likely a hybrid sorting algorithm: Introsort), <a href="http://en.cppreference.com/w/cpp/algorithm/stable_sort" target="_blank"><u>std::stable_sort</u></a> (most likely Merge Sort), or <a href="http://en.cppreference.com/w/cpp/algorithm/partial_sort" target="_blank"><u>std::partial_sort</u></a> (most likely Binary Heap) in STL algorithm.<br>In Python, you can use&nbsp;<a href="https://docs.python.org/3/library/stdtypes.html#list.sort" target="_blank"><u>sort</u></a>&nbsp;(most likely a hybrid sorting algorithm: Timsort).<br>In Java, you can use <a href="https://docs.oracle.com/javase/9/docs/api/java/util/Collections.html#sort-java.util.List-" target="_blank"><u>Collections.sort</u></a>.<br>In OCaml, you can use <a href="https://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html" target="_blank"><u>List.sort compare list_name</u></a>.<br></p><br><p>If the comparison function is problem-specific, we may need to supply additional comparison function to those built-in sorting routines.</p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="19-2" title='Go to the previous slide 19-2'>&larr;</div>
<div class='electure-next' data-nextid="19-4" title='Go to the next slide 19-4'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19-4" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Now it is time for you to see if you have understand the basics of various sorting algorithms discussed so far.</p><br><p><span class="slide-actions" onclick="doButtonAction17()">Test your understanding here!</span></p>
<div class="electure-addition">
</div>
<div class='electure-prev' data-nextid="19-3" title='Go to the previous slide 19-3'>&larr;</div>
<div class='electure-next' data-nextid="19-5" title='Go to the next slide 19-5'>&rarr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="electure-19-5" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Now that you have reached the end of this e-Lecture, do you think sorting problem is just as simple as calling built-in sort routine?</p><br><p>Try these online judge problems to find out more:<br><a href="https://open.kattis.com/problems/mjehuric" target="_blank"><u>Kattis - mjehuric</u></a><br><a href="https://open.kattis.com/problems/sortofsorting" target="_blank"><u>Kattis - sortofsorting</u></a>, or<br><a href="https://open.kattis.com/problems/sidewayssorting" target="_blank"><u>Kattis - sidewayssorting</u></a></p><br><p>This is not the end of the topic of sorting. When you explore other topics in VisuAlgo, you will realise that sorting is a pre-processing step for many other advanced algorithms for harder problems, e.g. as the pre-processing step for <a href="./mst"><u>Kruskal&#39;s algorithm</u></a>, creatively used in <a href="./suffixarray"><u>Suffix Array</u></a> data structure, etc.</p>
<div class="electure-addition">
<hr>
<p>You have reached the last slide. Return to 'Exploration Mode' to start exploring!</p>
<p>Note that if you notice any bug in this visualization or if you want to request for a new visualization feature, do not hesitate to drop an email to the project leader: Dr Steven Halim via his email address: stevenhalim at gmail dot com.</p>
</div>
<div class='electure-prev' data-nextid="19-4" title='Go to the previous slide 19-4'>&larr;</div>
<div class="electure-read-status" title='Spend some more time reading this slide'>&#128337;</div>
</div>
<div id="popup" hidden>
<div id="popup-content"></div>
<span id="hide-popup" hidden>X <u>Close</u></span>
</div>
<div id="rotateDeviceOverlay" style="display: none;">
<div id="rotateDeviceText" style="font-size: 50px; font-weight: bold; text-align: center">Please rotate your device to landscape mode for a better experience</div>
<div id="widenDeviceText" style="font-size: 50px; font-weight: bold; text-align: center">Please make the window wider for a better experience</div>
</div>
<div id="sort-viz">
<svg id="viz"></svg><br>
<svg id="viz-counting-sort-secondary-canvas"></svg>
<div id="viz-radix-sort-canvas">
<span id="radix-sort-bucket-labels-collection">
<span class="radix-sort-bucket-label">0</span>
<span class="radix-sort-bucket-label">1</span>
<span class="radix-sort-bucket-label">2</span>
<span class="radix-sort-bucket-label">3</span>
<span class="radix-sort-bucket-label">4</span>
<span class="radix-sort-bucket-label">5</span>
<span class="radix-sort-bucket-label">6</span>
<span class="radix-sort-bucket-label">7</span>
<span class="radix-sort-bucket-label">8</span>
<span class="radix-sort-bucket-label">9</span>
</span>
</div>
</div>
<div id="current-action" class="panel"><p></p></div>

<style>
        .create {
            bottom: 92px
        }
    </style>
<style>
        .sort {
            bottom: 65px
        }
    </style>
<div id="actions" class="panel">
<p id="create">Create(A)</p>
<p class="execAction" id="sort" onClick="sort()">Sort</p>
</div>
<div id="actions-hide" class="panel-hide"><span style="color:white; font-size: x-large; display: inline-block;">&gt;</span></div>
<div id="actions-extras">
<div class="create action-menu-pullout">
<div id="create-random" class="execAction new-menu-option coloured-menu-option" onClick="createList(&#039;random&#039;)">
<p>Random</p>
</div>
<div id="create-sorted" class="execAction new-menu-option coloured-menu-option" onClick="toggleChildExtras(&#039;create&#039;, &#039;create-sorted&#039;)">
<p>Sorted</p>
<div id="create-sorted-third-tier" class="create-sorted-third-tier new-menu-option" style="display: none;">
 <div id="create-sorted-non-increasing" class="execAction coloured-menu-option" style="float: right;" onClick="createList(&#039;sorted-non-increasing&#039;)">
<p>Non-increasing</p>
</div>
<div id="create-sorted-non-decreasing" class="execAction coloured-menu-option" style="float: right;" onClick="createList(&#039;sorted-non-decreasing&#039;)">
<p>Non-decreasing</p>
</div>
</div>
</div>
<div id="create-nearly-sorted" class="execAction new-menu-option coloured-menu-option" onClick="toggleChildExtras(&#039;create&#039;, &#039;create-nearly-sorted&#039;)">
<p>Nearly sorted</p>
<div id="create-nearly-sorted-third-tier" class="create-nearly-sorted-third-tier new-menu-option" style="display: none;">
<div id="create-nearly-sorted-decreasing" class="execAction coloured-menu-option" style="float: right;" onClick="createList(&#039;nearly-sorted-non-increasing&#039;)">
<p>Non-increasing</p>
</div>
<div id="create-nearly-sorted-increasing" class="execAction coloured-menu-option" style="float: right;" onClick="createList(&#039;nearly-sorted-non-decreasing&#039;)">
<p>Non-decreasing</p>
</div>
</div>
</div>
<div id="create-many-duplicates" class="execAction new-menu-option coloured-menu-option" onClick="createList(&#039;many-duplicates&#039;)">
<p>Many Duplicates</p>
</div>
<div id="create-userdefined-input" class="new-menu-option">
A = <input id="userdefined-input" type="text" title="Enter a list of numbers, separated by commas." autocomplete="off" value="3,44,38,5,47,15,36,26,27,2,46,4,19,50,48"> </div>
<div id="create-userdefined-go" class="execAction new-menu-option coloured-menu-option" onClick="createList(&#039;userdefined&#039;)">
<p>Go</p>
</div>
<div id="create-err" class="err" style="float: left;"></div>
</div>
<div class="sort action-menu-pullout">
<div id="sort-err" class="err" style="float: left;"></div>
</div>
</div>

</div>
<div id="bottom-bar">
<a id="trigger-about">About</a>
<a id="trigger-team">Team</a>
<a id="trigger-terms">Terms of use</a>
<a id="trigger-privacy">Privacy Policy</a>
</div>
<div id="about" class="overlays">
<h4>About</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p>VisuAlgo was conceptualised in 2011 by Dr Steven Halim as a tool to help his students better understand data structures and algorithms, by allowing them to learn the basics on their own and at their own pace.</p><p>VisuAlgo contains many advanced algorithms that are discussed in Dr Steven Halim&#39;s book (&#39;Competitive Programming&#39;, co-authored with his brother Dr Felix Halim and his friend Dr Suhendry Effendy) and beyond. Today, a few of these advanced algorithms visualization/animation can only be found in VisuAlgo.</p><p>Though specifically designed for National University of Singapore (NUS) students taking various data structure and algorithm classes (e.g., CS1010/equivalent, CS2040/equivalent, CS3230, CS3233, and CS4234), as advocators of online learning, we hope that curious minds around the world will find these visualizations useful too.</p><p>VisuAlgo is not designed to work well on small touch screens (e.g., smartphones) from the outset due to the need to cater for many complex algorithm visualizations that require lots of pixels and click-and-drag gestures for interaction. The minimum screen resolution for a respectable user experience is 1024x768 and only the landing page is relatively mobile-friendly. However, we are currently experimenting with a mobile (lite) version of VisuAlgo to be ready by April 2022.</p><p>VisuAlgo is an ongoing project and more complex visualizations are still being developed.</p><p>The most exciting development is the automated question generator and verifier (the online quiz system) that allows students to test their knowledge of basic data structures and algorithms. The questions are randomly generated via some rules and students&#39; answers are instantly and automatically graded upon submission to our grading server. This online quiz system, when it is adopted by more CS instructors worldwide, should technically eliminate manual basic data structure and algorithm questions from typical Computer Science examinations in many Universities. By setting a small (but non-zero) weightage on passing the online quiz, a CS instructor can (significantly) increase his/her students mastery on these basic questions as the students have virtually infinite number of training questions that can be verified instantly before they take the online quiz. The training mode currently contains questions for 12 visualization modules. We will soon add the remaining 12 visualization modules so that every visualization module in VisuAlgo have online quiz component.</p><p>We have translated VisuAlgo pages into three main languages: English, Chinese, and Indonesian. Currently, we have also written public notes about VisuAlgo in various languages:</p>
<a href='https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689' target='_blank'><u>id</u></a>,
<a href="https://blog.naver.com/visualgo_nus" target='_blank'><u>kr</u></a>,
<a href='https://www.facebook.com/groups/163215593699283/permalink/824003417620494/' target='_blank'><u>vn</u></a>,
<a href='http://pantip.com/topic/32736343' target='_blank'><u>th</u></a>.
</div>
</div>
<div id="team" class="overlays">
<h4>Team</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p>
<strong><span style='line-height: 150%;'>Project Leader &amp; Advisor (Jul 2011-present)</span></strong><br>
<a href='https://www.comp.nus.edu.sg/~stevenha/' target='_blank'>Dr Steven Halim</a>, Senior Lecturer, School of Computing (SoC), National University of Singapore (NUS)<br>
<a href='https://felix-halim.net/' target='_blank'>Dr Felix Halim</a>, Senior Software Engineer, Google (Mountain View)
</p>
<p>
<strong><span style='line-height: 150%;'>Undergraduate Student Researchers 1 (Jul 2011-Apr 2012)</span></strong><br>
Koh Zi Chun, <a href='https://roticv.rantx.com/' target='_blank'>Victor Loh Bo Huai</a>
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 1 (Jul 2012-Dec 2013)</span></strong><br>
Phan Thi Quynh Trang, Peter Phandi, Albert Millardo Tjindradinata, Nguyen Hoang Duy
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 2 (Jun 2013-Apr 2014)</span></strong><br>
<a href='https://www.rosemarietan.com/' target='_blank'>Rose Marie Tan Zhao Yun</a>, Ivan Reinaldo
</p>
<p>
<strong><span style='line-height: 150%;'>Undergraduate Student Researchers 2 (May 2014-Jul 2014)</span></strong><br>
Jonathan Irvin Gunawan, Nathan Azaria, Ian Leow Tze Wei, Nguyen Viet Dung, Nguyen Khac Tung, Steven Kester Yuwono, Cao Shengze, Mohan Jishnu
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 3 (Jun 2014-Apr 2015)</span></strong><br>
Erin Teo Yi Ling, Wang Zi
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 4 (Jun 2016-Dec 2017)</span></strong><br>
Truong Ngoc Khanh, John Kevin Tjahjadi, Gabriella Michelle, Muhammad Rais Fathin Mudzakir
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 5 (Aug 2021-Dec 2022)</span></strong><br>
Liu Guangyuan, Manas Vegi, Sha Long, Vuong Hoang Long
</p>
<p>
<strong><span style='line-height: 150%;'>Final Year Project/UROP students 6 (Aug 2022-Apr 2023)</span></strong><br>
Lim Dewen Aloysius, Ting Xiao
</p>
<p>
List of translators who have contributed &ge;100 translations can be found at <a href="https://visualgo.net/statistics">statistics</a> page.
</p>
<p>
<strong><span style='line-height: 150%;'>Acknowledgements</span></strong><br>
This project is made possible by the generous Teaching Enhancement Grant from NUS Centre for Development of Teaching and Learning (CDTL).
</p>
</div>
</div>
<div id="termsofuse" class="overlays">
<h4>Terms of use</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p>VisuAlgo is free of charge for Computer Science community on earth. If you like VisuAlgo, the only "payment" that we ask of you is for you to <b>tell the existence of VisuAlgo to other Computer Science students/instructors</b> that you know =) via Facebook/Twitter/Instagram/TikTok posts, course webpages, blog reviews, emails, etc.</p> <p>If you are a data structure and algorithm <b>student/instructor</b>, you are allowed to use this website directly for your classes. If you take screen shots (videos) from this website, you can use the screen shots (videos) elsewhere as long as you cite the URL of this website (https://visualgo.net) and/or list of publications below as reference. However, you are <b>NOT</b> allowed to download VisuAlgo (client-side) files and <b>host it</b> on your own website as it is <b>plagiarism</b>. As of now, we do <b>NOT</b> allow other people to fork this project and create variants of VisuAlgo. Using the offline copy of (client-side) VisuAlgo for your personal usage is fine.</p> <p>Note that VisuAlgo&#39;s online quiz component is by nature has heavy server-side component and there is no easy way to save the server-side scripts and databases locally. Currently, the general public can only use the &#39;training mode&#39; to access these online quiz system. Currently the &#39;test mode&#39; is a more controlled environment for using these randomly generated questions and automatic verification for&nbsp;<b>real</b> examinations in NUS.</p> <p><strong><span style="line-height: 200%;">List of Publications</span></strong></p> <p>This work has been presented briefly at the CLI Workshop at the ICPC World Finals 2012 (Poland, Warsaw) and at the IOI Conference at IOI 2012 (Sirmione-Montichiari, Italy). You can click <a href="https://ioinformatics.org/journal/INFOL099.pdf" target="_blank">this link</a> to read our 2012 paper about this system (it was not yet called VisuAlgo back in 2012) and <a href="https://ioinformatics.org/journal/v9_2015_243_245.pdf" target="_blank">this link</a> for the short update in 2015 (to link VisuAlgo name with the previous project).</p><p>This work is done mostly by my past students.&nbsp;</p> <p><strong><span style="line-height: 200%;">Bug Reports or Request for New Features</span></strong></p> <p>VisuAlgo is not a finished project. Dr Steven Halim is still actively improving VisuAlgo. If you are using VisuAlgo and spot a bug in any of our visualization page/online quiz tool or if you want to request for new features, please contact Dr Steven Halim. His contact is the concatenation of his name and add gmail dot com.</p>
</div>
</div>
<div id="privacy-policy" class="overlays">
<h4>Privacy Policy</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p><b>Version 1.1 (Updated Fri, 14 Jan 2022).</b></p><p>Disclosure to all visitors: We currently use Google Analytics to get an overview understanding of our site visitors. We now give option for user to Accept or Reject this tracker.</p><p>Since Wed, 22 Dec 2021, only National University of Singapore (NUS) staffs/students and approved CS lecturers outside of NUS who have written a request to Steven can login to VisuAlgo, anyone else in the world will have to use VisuAlgo as an anonymous user that is not really trackable other than what are tracked by Google Analytics.</p><p>For NUS students enrolled in modules that uses VisuAlgo: By using a VisuAlgo account (a tuple of NUS official email address, NUS official student name as in the class roster, and a password that is encrypted on the server side — no other personal data is stored), you are giving a consent for your module lecturer to keep track of your e-lecture slides reading and online quiz training progresses that is needed to run the module smoothly. Your VisuAlgo account will also be needed for taking NUS official VisuAlgo Online Quizzes and thus passing your account credentials to another person to do the Online Quiz on your behalf constitutes an academic offense. Your user account will be purged after the conclusion of the module unless you choose to keep your account (OPT-IN). Access to the full VisuAlgo database (with encrypted passwords) is limited to Steven himself.</p><p>For other NUS students, you can self-register a VisuAlgo account by yourself (OPT-IN).</p><p>For other CS lecturers worldwide who have written to Steven, a VisuAlgo account (your (non-NUS) email address, you can use any display name, and encrypted password) is needed to distinguish your online credential versus the rest of the world. Your account will be tracked similarly as a normal NUS student account above but it will have CS lecturer specific features, namely the ability to see the hidden slides that contain (interesting) answers to the questions presented in the preceding slides before the hidden slides. You can also access Hard setting of the VisuAlgo Online Quizzes. You can freely use the material to enhance your data structures and algorithm classes. Note that there can be other CS lecturer specific features in the future.</p><p>For anyone with VisuAlgo account, you can remove your own account by yourself should you wish to no longer be associated with VisuAlgo tool.</p>
</div>
</div>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://unpkg.com/d3-force-boundary@0.0.1/dist/d3-force-boundary.min.js"></script>
<script>
  $(function () {
    // overlays stuffs
    $('#trigger-about').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#about').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-team').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#team').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-terms').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#termsofuse').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-privacy').click(function () {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#privacy-policy').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    })

    $('.close-overlay').click(function() {
      $('.overlays').fadeOut(function() {
        $('#dark-overlay').fadeOut();
      });
    });

    $('#dark-overlay').click(function() {
      $('.overlays').fadeOut();
      $('#dark-overlay').fadeOut();
    });
  })
</script>
<script>
      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': "Igr1Q7wWkU6FYvLCkaEYAlKzTLWzJqbvb6rmFHPa"
        }
      });

      // handles account dropdown menu
      $(function () {
        $('#language-dropdown-btn').click(function (e) {
          $('#language-dropdown-menu').css('display', 'block');
          $('#account-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function () {
          $('#language-dropdown-menu').css('display', 'none')
        })
      })

      $(function () {
        $('#account-dropdown-btn').click(function (e) {
          $('#account-dropdown-menu').css('display', 'block')
          $('#language-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function (e) {
          $('#account-dropdown-menu').css('display', 'none')
        })
      })

      // var PHP_DOMAIN = ""; // is this still used? I turn it off on 4 Jan 2022, see if causes issue

      // surprise colour!
      // Referenced to in  home.js and viz.js also
      var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#2ebbd1", "#d9513c", "#fec515", "#4b65ba", "#ff8a27", "#a7d41e"]; // green, pink, blue, red, yellow, indigo, orange, lime

      function disableScroll() { $('html').css('overflow', 'hidden'); }

      function enableScroll() { $('html').css('overflow', 'visible'); }

      function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }

      function getColours() {
        var generatedColours = new Array();
        while (generatedColours.length < 4) {
          var n = (Math.floor(Math.random() * colourArray.length));
          if ($.inArray(n, generatedColours) == -1)
            generatedColours.push(n);
        }
        return generatedColours;
      }

      function isOn(value, position) {
        return (value>>position) & 1 === 1;
      }

      function customAlert(msg) {
        $('#custom-alert p').html(msg);
        var m = -1 * ($('#custom-alert').outerHeight()/2);
        $('#custom-alert').css('margin-top', m+'px');
        $('#dark-overlay').fadeIn(function() {
          $('#custom-alert').fadeIn(function() {
            setTimeout(function() {
              $('#custom-alert').fadeOut(function() {
                $('#dark-overlay').fadeOut();
              });
            }, 1000);
          });
        });
      }

      function showLoadingScreen() {
        $('#loading-overlay').show();
        $('#loading-message').show();
      }

      function hideLoadingScreen() {
        $('#loading-overlay').hide();
      }

      function commonAction(retval, msg) {
        if (retval) {
          $('#current-action').show();
          $('#current-action').html(mode == "exploration" ? msg : ("e-Lecture Example (auto play until done)<br>" + msg));
          $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
          triggerRightPanels();
          isPlaying = true;
        }
      }

      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; ++i) {
          var pair = vars[i].split('=');
//console.log(variable + " : " + pair[0] + " -> " + pair[1]);
          if (decodeURIComponent(pair[0]) == variable)
            return decodeURIComponent(pair[1]);
        }
        return "";
      }

      const MOBILE_WIDTH = 1000;
      const matchMediaMobile = window.matchMedia(`only screen and (max-width: ${MOBILE_WIDTH}px)`);
      const matchMediaNarrow = window.matchMedia(`only screen and (max-width: 500px)`);
      function isMobile() {
        return matchMediaMobile.matches;
      }
      //To fix the issue of a narrow desktop window being asked to rotate, I am now checking for it based on the navigator.userAgent to see if its mobile or not. 
      //This may change in the future if browsers decide to change the naming of userAgent for mobile browsers so may need to keep an eye on this.
      function isMobileOS() {
        return /Mobi/i.test(navigator.userAgent) && !/ipad/i.test(navigator.userAgent);
      }
      let portraitMatcher = window.matchMedia("(orientation:portrait)");
      function isPortrait() {
        return portraitMatcher.matches;
      }

      var generatedColours = getColours();
      var surpriseColour = colourArray[generatedColours[0]];
      var colourTheSecond = colourArray[generatedColours[1]];
      var colourTheThird = colourArray[generatedColours[2]];
      var colourTheFourth = colourArray[generatedColours[3]];

      $(function() {
        $('.links').css('background', surpriseColour);
        $('.colour').css("color", surpriseColour);
        $('h4').css("background-color", surpriseColour); // about, contact us etc. button background

        // title
        $('#title a').click(function() {
          $('#title a').removeClass('selected-viz');
          $(this).addClass('selected-viz');
        });
      });

/*
// test drop on 4 Jan 2022, see if got issues
      function checkLogin() {
        $.get('/checklogin', function(data) {
          var url = data['url'];
          window.location.href = '/' + url;
        });
      }
*/

      // big question mark on 4 Jan 2022: should I drop this GA for a better privacy policy?

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }

              $(function () {
          ga('create', 'UA-1566631-4', 'auto');
          ga('send', 'pageview');
        })
      
      $('#gdpr-privacy-policy').click(function () {
        if ($(window).width() > 600) {
          $('#dark-overlay').fadeIn(function() {
            $('#privacy-policy').fadeIn();
          });
        }
        else
          alert('Sorry, this dialog is too big. Please load it on bigger screen');
      })
    </script>

<script src="https://visualgo.net/js/jquery-ui.min.js"></script>

<script src="https://visualgo.net/js/d3.min.js"></script>
<script src="https://visualgo.net/js/viz-1.0.6.js"></script>


<script src="/js/graph_library-1.0.8.js"></script>
<script>
      $(function () {
        let defaultPlaybackSpeed = 1;
                createPlaybackSpeedSlider(defaultPlaybackSpeed);
        $('#account-dropdown-btn').click(function (e) {
          $('#account-dropdown-menu').css('display', 'block')
          $('#language-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function (e) {
          $('#account-dropdown-menu').css('display', 'none')
        });
        //Mobile Design Related DOM Manipulations
        if (isMobile()) {
          $("#status").css({
            "bottom": "10%",
            "height": "12%",
            "max-height": "54px"
          });
          $("#current-action").css("bottom", "22%");
          $('#status-hide').remove();
          $('#left-bar').remove();
          $('#right-bar').remove();
          $("#mode-menu").remove();
          $("#codetrace").css("z-index", 1);
          $("#bottom-bar a").hide();
          $("#bottom-bar").css("height", $("#topbar").css("height"));
          $(".speed-dropup-btn").show();
          $("#go-to-beginning").remove();
          $("#go-to-end").remove();
          $("#pause").remove();
          $("#play").remove();
          $("#previous").remove();
          $("#next").remove();

          //make progress bar longer
          $("#progress-bar").css({
            left: "30%",
            width: "60%",
            'margin-left': 0
          })
        }
      })

      let mobilePlaybackOverlayTimeout;
      $(function() {
        $("#viz").on("click", () => {
          if (isMobile()) {
            if ($("#mobile-playback-overlay").is(":hidden") && isPlaying) {
              $("#mobile-playback-overlay").fadeIn();
              hideMobilePlaybackOverlay(6000);
            } else {
              $("#mobile-playback-overlay").fadeOut();
            }
          }
        });
        $("#mobile-playback-overlay").on("click", (event) => {
          if (event.target === event.currentTarget) //to ensure clicks on the controls dont fade the overlay
            $("#mobile-playback-overlay").fadeOut();
          else
            hideMobilePlaybackOverlay(5000);
        })
      });
      function hideMobilePlaybackOverlay(timeOut) {
        if (mobilePlaybackOverlayTimeout)
          clearTimeout(mobilePlaybackOverlayTimeout);
        mobilePlaybackOverlayTimeout = setTimeout(() => {
            $("#mobile-playback-overlay").fadeOut();
        }, timeOut);
      }
      function mobilePlaybackPauseOrPlay() { 
        if ($("#mobile-playback-overlay").hasClass("playing")) {
          pause();
          hideMobilePlaybackOverlay(5000);
        } else {
          play();
          hideMobilePlaybackOverlay(3000);
        }
      }
      let rewindLabelTimeout, forwardLabelTimeout;
      function mobilePlaybackRewind() {
        $("#mobile-playback-rewind-label").css("opacity", 1);
        if (rewindLabelTimeout)
          clearTimeout(rewindLabelTimeout);
        rewindLabelTimeout = setTimeout(() => {
          $("#mobile-playback-rewind-label").css("opacity", 0);
        }, 800);
        stepBackward(7);
      }
      function mobilePlaybackForward() {
        $("#mobile-playback-forward-label").css("opacity", 1);
        if (forwardLabelTimeout)
          clearTimeout(forwardLabelTimeout);
        forwardLabelTimeout = setTimeout(() => {
          $("#mobile-playback-forward-label").css("opacity", 0);
        }, 800);
        stepForward(7);
      }

      //let eLectureSessionHistory = {};
      const sectorColors = ['#05a4d0', '#f1c706', '#fa0202'];
      function setSlideTimelineColor(slideNo) {
        const sectionNo = slideNo.split('-')[0];
        $(`[slideNo="${slideNo}"]`).css('background', sectorColors[(parseInt(sectionNo) % 3)]);
      }

      let currSlideTimer = null; //global so that we can clear the timeout when required

      const lectureIds = [{"id":75,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":1,"showCodetracePanel":0,"created_at":"2017-02-12 21:12:52","updated_at":"2022-01-04 08:38:11","section":-1,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.bubbleSort, \"29,10,14,37,14\");","section_order":-1,"value":"1","text":"<p>Sorting is a very classic problem of reordering items (that can be compared, e.g., integers, floating-point numbers, strings, etc) of an array (or a list) in a certain order (increasing, non-decreasing (increasing or flat), decreasing, non-increasing (decreasing or flat), lexicographical, etc).<\/p><br><p>There are many different sorting algorithms, each has its own advantages and limitations.<\/p><br><p>Sorting is commonly used as the introductory problem in various Computer Science classes to showcase a range of algorithmic ideas.<\/p><br><p>Without loss of generality, we assume that we will sort only <b>Integers<\/b>, not necessarily distinct, in <b>non-decreasing order<\/b> in this visualization. Try clicking <span class=\"slide-actions\" onclick=\"doButtonAction11()\">Bubble Sort<\/span> for a sample animation of sorting the list of 5 jumbled integers (with duplicate) above.<\/p>","title":"Sorting Problem and Sorting Algorithms"},{"id":541,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-31 08:07:04","updated_at":"2022-03-16 13:00:45","section":75,"code":"","section_order":1,"value":"1-1","text":"<p>Sorting problem has a variety of interesting algorithmic solutions that embody many Computer Science ideas:<\/p><ol><li><a href=\"?slide=5\"><u>Comparison<\/u><\/a> versus <a href=\"?slide=14\"><u>non-comparison<\/u><\/a> based strategies,<\/li><li>Iterative versus Recursive implementation,<\/li><li>Divide-and-Conquer paradigm (e.g., <a href=\"?slide=11-4\"><u>Merge Sort<\/u><\/a> or <a href=\"?slide=12-1\"><u>Quick Sort<\/u><\/a>),<\/li><li>Best\/Worst\/Average-case Time Complexity analysis,<\/li><li><a href=\"?slide=13\"><u>Randomized Algorithms<\/u><\/a>, etc.<\/li><\/ol>","title":"Motivation - Interesting CS Ideas"},{"id":542,"category":"sorting","order":2,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-31 08:10:32","updated_at":"2022-01-04 13:03:58","section":75,"code":"","section_order":1,"value":"1-2","text":"<p>When an (integer) array <b>A<\/b> is sorted, many problems involving <b>A<\/b> become easy (or easier):<\/p><ol><li>Searching for a specific value <b>v<\/b> in array <b>A<\/b>,<\/li><li>Finding the min\/max or the k-th smallest\/largest value in (static) array <b>A<\/b>,<\/li><li>Testing for uniqueness and deleting duplicates in array <b>A<\/b>,<\/li><li>Counting how many time a specific value <b>v<\/b> appear in array <b>A<\/b>,<\/li><li>Set intersection\/union between array <b>A<\/b> and another sorted array <b>B<\/b>,<\/li><li>Finding a target pair <b>x<\/b> \u2208 <b>A<\/b> and <b>y<\/b> \u2208 <b>A<\/b> such that <b>x+y<\/b> equals to a target <b>z<\/b>,<\/li><li>Counting how many values in array <b>A<\/b> is inside range [<b>lo<\/b>..<b>hi<\/b>], etc.<\/li><\/ol><p>Discussion: In real-life classes, the instructor may elaborate more on these applications.<\/p>","title":"Motivation - Applications"},{"id":769,"category":"sorting","order":3,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2021-12-26 14:14:40","updated_at":"2022-01-04 13:04:43","section":75,"code":"","section_order":1,"value":"1-3","text":"<ol><li>We can use O(log <b>N<\/b>) binary search on a sorted array,<\/li><li>A[0]\/A[k-1]\/A[N-k]\/A[N-1] are the min\/k-th smallest\/k-th largest\/max value in (static sorted) array <b>A<\/b>,<\/li><li>Duplicates, if any, will be next to each other in a sorted array <b>A<\/b>,<\/li><li>Same as above,<\/li><li>We can use modifications of merge routine of Merge Sort,<\/li><li>We can use two pointers method,<\/li><li>The index of <b>y<\/b> - the index of <b>x<\/b> + 1 (use two binary searches).<\/ol><p>There can be other ways.<\/p>","title":"Some Hints"},{"id":78,"category":"sorting","order":2,"top":"","right":"","bottom":"140px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-13 04:46:36","updated_at":"2022-01-04 13:27:08","section":-1,"code":"$(\"#create\").click().addClass(\"menu-highlighted\");","section_order":-1,"value":"2","text":"<p class=\"notforprint\">There are two actions that you can do in this visualization.<\/p>","title":"Actions"},{"id":544,"category":"sorting","order":1,"top":"","right":"","bottom":"140px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 04:43:12","updated_at":"2022-02-02 13:59:19","section":78,"code":"$(\"#create\").click().addClass(\"menu-highlighted\");","section_order":2,"value":"2-1","text":"<p>The first action is about defining <b>your own<\/b> input, an array\/a list <b>A<\/b> that is:<\/p><ol><li>Totally random,<\/li><li>Random but sorted (in non-decreasing or non-increasing order),<\/li><li>Random but <b>nearly<\/b> sorted&nbsp;(in non-decreasing or non-increasing order),<\/li><li>Random and contain many duplicates (thus small range of integers), or<\/li><li>Defined solely by yourself.<\/li><\/ol><p class=\"notforprint\">In Exploration mode, you can experiment with various sorting algorithms provided in this visualization to figure out their best and worst case inputs.<\/p>","title":"Define Your Own Input"},{"id":545,"category":"sorting","order":2,"top":"","right":"","bottom":"140px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 04:45:26","updated_at":"2022-01-05 02:18:17","section":78,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");","section_order":2,"value":"2-2","text":"<div class=\"notforprint\"><p>The second action is the most important one: Execute the active sorting algorithm by clicking the \"Sort\" button.<\/p><br><p>Remember that you can switch active algorithm by clicking the <a href=\"?slide=4-1\"><u>respective abbreviation<\/u><\/a> on the top side of this visualization page.<\/p><\/div>","title":"Execute the Selected Sorting Algorithm"},{"id":77,"category":"sorting","order":3,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-13 04:45:18","updated_at":"2022-01-05 02:19:29","section":-1,"code":"","section_order":-1,"value":"3","text":"<div class=\"notforprint\"><p>View the visualisation\/animation of the chosen sorting algorithm here.<\/p><br><p>Without loss of generality, we only show Integers in this visualization and our objective is to sort them from the initial state into non-decreasing order state. Remember, non-decreasing means mostly ascending (or increasing) order, but because there can be duplicates, there can be flat\/equal line between two adjacent equal integers.<\/p><\/div>","title":"Visualisation"},{"id":76,"category":"sorting","order":4,"top":"60px","right":"","bottom":"","left":"220px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-12 21:53:26","updated_at":"2022-01-04 14:01:01","section":-1,"code":"","section_order":-1,"value":"4","text":"<span class=\"notforprint\"><p>At the top, you will see the list of commonly taught sorting algorithms in Computer Science classes. To activate each algorithm, select the <a href=\"?slide=4-1\"><u>abbreviation<\/u><\/a> of respective algorithm name before clicking \"Sort\".<\/p><br><p>To facilitate more diversity, we randomize the active algorithm upon each page load.<\/p><\/span><br><p>The first six algorithms in this module are <b>comparison-based<\/b> sorting algorithms while the last two are not. We will discuss this idea <a href=\"?slide=13\"><u>midway through<\/u><\/a> this e-Lecture.<\/p><br><p>The middle three algorithms are <b>recursive<\/b> sorting algorithms while the rest are usually implemented iteratively.<\/p>","title":"Common Sorting Algorithms"},{"id":540,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"220px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-31 07:14:49","updated_at":"2017-05-31 07:15:06","section":76,"code":"","section_order":4,"value":"4-1","text":"<p>To save screen space, we abbreviate algorithm names into three characters each:<\/p><ol><li>Comparison-based Sorting Algorithms:<ol><li>BUB - Bubble Sort,<\/li><li>SEL - Selection Sort,<\/li><li>INS - Insertion Sort,<\/li><li>MER - Merge Sort (recursive implementation),<\/li><li>QUI - Quick Sort (recursive implementation),<\/li><li>R-Q - Random Quick Sort (recursive implementation).<\/li><\/ol><\/li><li>Not Comparison-based Sorting Algorithms:<ol><li>COU - Counting Sort,<\/li><li>RAD - Radix Sort.<\/li><\/ol><\/li><\/ol>","title":"Abbreviations"},{"id":554,"category":"sorting","order":5,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:05:09","updated_at":"2017-06-01 07:05:14","section":-1,"code":"","section_order":-1,"value":"5","text":"<p>We will discuss three comparison-based sorting algorithms in the next few slides:<\/p><ol><li><a href=\"?slide=6\"><u>Bubble Sort<\/u><\/a>,<\/li><li><a href=\"?slide=7\"><u>Selection Sort<\/u><\/a>,<\/li><li><a href=\"?slide=8\"><u>Insertion Sort<\/u><\/a>.<\/li><\/ol><p>They are called <b>comparison-based<\/b> as they compare pairs of elements of the array and decide whether to swap them or not.<\/p><br><p>These three sorting algorithms are the easiest to implement but also not the most efficient, as they run in O(<b>N<\/b><sup>2<\/sup>).<\/p>","title":"3 O(N^2) Comparison-based Sorting Algorithms"},{"id":735,"category":"sorting","order":6,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:41:02","updated_at":"2022-01-04 14:03:09","section":-1,"code":"","section_order":-1,"value":"6","text":"<p>Before we start with the discussion of various sorting algorithms, it may be a good idea to discuss the basics of asymptotic algorithm analysis, so that you can follow the discussions of the various O(<b>N<\/b>^2), O(<b>N<\/b> log <b>N<\/b>), and special O(<b>N<\/b>) sorting algorithms later.<\/p><br><p>This section can be skipped if you already know this topic.<\/p>","title":"Analysis of Algorithms (Basics)"},{"id":736,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:43:03","updated_at":"2020-10-06 04:43:03","section":735,"code":"","section_order":6,"value":"6-1","text":"<p>You need to already understand\/remember all these:<br>-. Logarithm and Exponentiation, e.g., log<sub>2<\/sub>(1024) = 10, 2<sup>10<\/sup> = 1024<br>-. Arithmetic progression, e.g., 1+2+3+4+\u2026+10 = 10*11\/2 = 55<br>-. Geometric progression, e.g., 1+2+4+8+..+1024 = 1*(1-2<sup>11<\/sup>)\/(1-2) = 2047<br>-. Linear\/Quadratic\/Cubic function, e.g., f1(x) = x+2, f2(x) = x<sup>2<\/sup>+x-1, f3(x) = x<sup>3<\/sup>+2x<sup>2<\/sup>-x+7<br>-. Ceiling, Floor, and Absolute function, e.g., ceil(3.1) = 4, floor(3.1) = 3, abs(-7) = 7<\/p>","title":"Mathematical Pre-requisites"},{"id":737,"category":"sorting","order":2,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:47:21","updated_at":"2020-10-06 04:47:21","section":735,"code":"","section_order":6,"value":"6-2","text":"<p>Analysis of Algorithm is a process to evaluate rigorously the resources (time and space) needed by an algorithm and represent the result of the evaluation with a (simple) formula.<\/p><br><p>The time\/space requirement of an algorithm is also called the time\/space complexity of the algorithm, respectively.<\/p><br><p>For this module, we focus more on time requirement of various sorting algorithms.<\/p>","title":"What Is It?"},{"id":738,"category":"sorting","order":3,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:49:12","updated_at":"2021-12-26 14:22:25","section":735,"code":"","section_order":6,"value":"6-3","text":"<p>We can measure the actual running time of a program by using wall clock time or by inserting timing-measurement code into our program, e.g., see the code shown in <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.cpp\" target=\"_blank\"><u>SpeedTest.cpp<\/u><\/a> | <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.py\" target=\"_blank\"><u>py<\/u><\/a> | <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.java\" target=\"_blank\"><u>java<\/u><\/a>.<\/p><br><p>However, actual running time is not meaningful when comparing two algorithms as they are possibly coded in different languages, using different data sets, or running on different computers.<\/p>","title":"Measuring the Actual Running Time?"},{"id":739,"category":"sorting","order":4,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:53:49","updated_at":"2021-12-26 14:22:51","section":735,"code":"","section_order":6,"value":"6-4","text":"<p>Instead of measuring the actual timing, we count the # of operations (arithmetic, assignment, comparison, etc). This is a way to assess its efficiency as an algorithm&#39;s execution time is correlated to the # of operations that it requires.<\/p><br><p>See the code shown in <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.cpp\" target=\"_blank\"><u>SpeedTest.cpp<\/u><\/a> | <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.py\" target=\"_blank\"><u>py<\/u><\/a> | <a href=\"https:\/\/www.comp.nus.edu.sg\/~stevenha\/cs2040c\/demos\/SpeedTest.java\" target=\"_blank\"><u>java<\/u><\/a> and the comments (especially on how to get the final value of variable counter).<\/p><br><p>Knowing the (precise) number of operations required by the algorithm, we can state something like this: Algorithm <b>X<\/b> takes <b>2n<sup>2<\/sup> + 100n<\/b> operations to solve problem of size <b>n<\/b>.<\/p>","title":"Counting # of Operations (1)"},{"id":740,"category":"sorting","order":5,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:55:58","updated_at":"2020-10-06 04:55:58","section":735,"code":"","section_order":6,"value":"6-5","text":"<p>If the time <b>t<\/b> needed for one operation is known, then we can state that algorithm <b>X<\/b> takes <b>(2n<sup>2<\/sup> + 100n)t<\/b> time units to solve problem of size <b>n<\/b>.<\/p><br><p>However, time <b>t<\/b> is dependent on the factors mentioned earlier, e.g., different languages, compilers and computers, etc.<\/p><br><p>Therefore, instead of tying the analysis to actual time <b>t<\/b>, we can state that algorithm <b>X<\/b> takes time that is <b>proportional to 2n<sup>2<\/sup> + 100n<\/b> to solving problem of size <b>n<\/b>.<\/p>","title":"Counting # of Operations (2)"},{"id":741,"category":"sorting","order":6,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 04:58:45","updated_at":"2020-10-06 04:58:45","section":735,"code":"","section_order":6,"value":"6-6","text":"<p>Asymptotic analysis is an analysis of algorithms that focuses on analyzing problems of <b>large input size n<\/b>, considers <b>only the leading term<\/b> of the formula, and <b>ignores the coefficient<\/b> of the leading term.<\/p><br><p>We choose the leading term because the lower order terms contribute lesser to the overall cost as the input grows larger, e.g., for f(n) = 2n<sup>2<\/sup> + 100n, we have:<br>f(1000) = 2*1000<sup>2<\/sup> + 100*1000 = 2.1M, vs<br>f(100000) = 2*100000<sup>2<\/sup> + 100*100000 = 20010M.<br>(notice that the lower order term 100n has lesser contribution).<\/p>","title":"Asymptotic Analysis"},{"id":742,"category":"sorting","order":7,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 05:04:16","updated_at":"2020-10-06 05:04:16","section":735,"code":"","section_order":6,"value":"6-7","text":"<p>Suppose two algorithms have 2n<sup>2<\/sup> and 30n<sup>2<\/sup> as the leading terms, respectively.<\/p><br><p>Although actual time will be different due to the different constants, the growth rates of the running time are the same.<\/p><br><p>Compared with another algorithm with leading term of n<sup>3<\/sup>, the difference in growth rate is a much more dominating factor.<\/p><br><p>Hence, we can drop the coefficient of leading term when studying algorithm complexity.<\/p>","title":"Ignoring Coefficient of the Leading Term"},{"id":743,"category":"sorting","order":8,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 05:06:54","updated_at":"2020-10-06 05:06:54","section":735,"code":"","section_order":6,"value":"6-8","text":"<p>If algorithm A requires time proportional to <b>f(n)<\/b>, we say that algorithm A is of the order of f(n).<\/p><br><p>We write that algorithm A has time complexity of <b>O(f(n))<\/b>, where <b>f(n)<\/b> is the growth rate function for algorithm A.<\/p>","title":"Upper Bound: The Big-O Notation"},{"id":746,"category":"sorting","order":9,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 05:19:30","updated_at":"2022-01-31 15:17:25","section":735,"code":"","section_order":6,"value":"6-9","text":"<p>Mathematically, an algorithm A is of O(<b>f(n)<\/b>) if there exist a constant <b>k<\/b> and a positive integer <b>n0<\/b> such that algorithm A requires no more than <b>k*f(n)<\/b> time units to solve a problem of size <b>n \u2265 n0<\/b>, i.e., when the problem size is larger than <b>n0<\/b>, then algorithm A is (always) bounded from above by this simple formula <b>k*f(n)<\/b>.<\/p><br><center><img src=\"https:\/\/visualgo.net\/img\/big_O_notation.png\" width=\"300\" alt=\"Big-O Notation\"><\/center><br><p>Note that: <b>n0<\/b> and <b>k<\/b> are not unique and there can be many possible valid <b>f(n)<\/b>.<\/p>","title":"Big-O Notation (Mathematics)"},{"id":744,"category":"sorting","order":10,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 05:08:38","updated_at":"2022-01-04 14:07:15","section":735,"code":"","section_order":6,"value":"6-10","text":"<p>In asymptotic analysis, a formula can be simplified to a single term with coefficient 1.<\/p><br><p>Such a term is called a growth term (rate of growth, order of growth, order of magnitude).<\/p><br><p>The most common growth terms can be ordered from fastest to slowest as follows:<br>O(<b>1<\/b>)\/constant time &lt; O(log <b>n<\/b>)\/logarithmic time &lt; O(<b>n<\/b>)\/linear time &lt;<br>O(<b>n<\/b> log <b>n<\/b>)\/quasilinear time &lt; O(<b>n<\/b><sup>2<\/sup>)\/quadratic time &lt; O(<b>n<\/b><sup>3<\/sup>)\/cubic time &lt;<br>O(2<sup><b>n<\/b><\/sup>)\/exponential time &lt; O(<b>n<\/b>!)\/also-exponential time &lt; &infin; (e.g., an infinite loop).<\/p><br><p>Note that a few other common time complexities are not shown (also see the visualization in the next slide).<\/p>","title":"Growth Terms"},{"id":745,"category":"sorting","order":11,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2020-10-06 05:15:27","updated_at":"2020-10-06 05:19:44","section":735,"code":"","section_order":6,"value":"6-11","text":"<img src=\"https:\/\/visualgo.net\/img\/growth_rates.png\" width=\"500\" alt=\"Common Growth Terms\"><br><p>We will see three different growth rates O(<b>n<sup>2<\/sup><\/b>), O(<b>n log n<\/b>), and O(<b>n<\/b>) throughout the remainder of this sorting module.<\/p>","title":"Growth Terms (Visualized\/Compared)"},{"id":175,"category":"sorting","order":7,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 15:14:08","updated_at":"2022-01-04 14:08:38","section":-1,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.bubbleSort, \"29,10,14,37,14\");","section_order":-1,"value":"7","text":"<p>Given an array of <b>N<\/b> elements, Bubble Sort will:<\/p><ol><li><b>Compare<\/b> a pair of adjacent items (a, b),<\/li><li>Swap that pair if the items are out of order (in this case, when a &gt; b),<\/li><li>Repeat Step 1 and 2 until we reach the end of array<br>(the last pair is the (<b>N<\/b>-2)-th and (<b>N<\/b>-1)-th items as we use 0-based indexing),<\/li><li>By now, the largest item will be at the last position.<br>We then reduce <b>N<\/b> by 1 and repeat Step 1 until we have <b>N = 1<\/b>.<\/li><\/ol><span class=\"notforprint\"><p>Without further ado, let&#39;s try <span class=\"slide-actions\" onclick=\"doButtonAction11()\">Bubble Sort<\/span> on the small example array [29, 10, 14, 37, 14].<\/p><br><p>You should see a &#39;bubble-like&#39; animation if you imagine the larger items &#39;bubble up&#39; (actually &#39;float to the right side of the array&#39;).<\/p><\/span>","title":"Bubble Sort"},{"id":206,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:36:47","updated_at":"2022-01-05 08:33:05","section":175,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.bubbleSort, \"29,10,14,37,14\");","section_order":7,"value":"7-1","text":"<pre>void bubbleSort(int a[], int N) { \/\/ the standard version<br>  for (; N > 0; --N) \/\/ N iterations<br>    for (int i = 0; i < N-1; ++i) \/\/ except the last, O(N)<br>      if (a[i] > a[i+1]) \/\/ not in non-decreasing order<br>        swap(a[i], a[i+1]); \/\/ swap in O(1)<br>}<\/pre><p>Comparison and swap require time that is bounded by a constant, let&#39;s call it <b>c<\/b>. Then, there are two nested loops in (the standard) Bubble Sort. The outer loop runs for exactly <b>N<\/b> iterations. But the inner loop runs get shorter and shorter:<\/p><ol><li>When i=0, (<b>N<\/b>\u22121) iterations (of comparisons and possibly swaps),<\/li><li>When i=1, (<b>N<\/b>\u22122) iterations,<br>...,<\/li><li>When i=(<b>N<\/b>\u22122), 1 iteration,<\/li><li>When i=(<b>N<\/b>\u22121), 0 iteration.<\/li><\/ol><p>Thus, the total number of iterations = (<b>N<\/b>\u22121)+(<b>N<\/b>\u22122)+...+1+0 = <b>N<\/b>*(<b>N<\/b>\u22121)\/2 (<a href=\"https:\/\/en.wikipedia.org\/wiki\/Arithmetic_progression#Sum\" target=\"_blank\"><u>derivation<\/u><\/a>).<\/p><p>Total time = c*<b>N<\/b>*(<b>N<\/b>\u22121)\/2 = O(<b>N<\/b>^2).<\/p>","title":"Bubble Sort, C++ Code &amp; Analysis"},{"id":207,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:39:59","updated_at":"2022-01-04 14:10:17","section":175,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.bubbleSort, \"3,6,11,25,39\");","section_order":7,"value":"7-2","text":"<p>Bubble Sort is actually inefficient with its <b>O(N^2)<\/b> time complexity. Imagine that we have <b>N<\/b> = 10<sup>5<\/sup> numbers. Even if our computer is super fast and can compute 10<sup>8<\/sup> operations in 1 second, Bubble Sort will need about 100 seconds to complete.<\/p><br><p>However, it can be terminated early, e.g. on the small sorted ascending example shown above [3, 6, 11, 25, 39], <span class=\"slide-actions\" onclick=\"doButtonAction11()\">Bubble Sort<\/span> can terminates in O(<b>N<\/b>) time.<\/p><br><p>The improvement idea is simple: If we go through the inner loop with <b>no swapping<\/b> at all, it means that the array is <b>already sorted<\/b> and we can stop Bubble Sort at that point.<\/p><br><p>Discussion: Although it makes Bubble Sort runs faster in general cases, this improvement idea does not change <b>O(N^2)<\/b> time complexity of Bubble Sort... Why?<\/p>","title":"Bubble Sort: Early Termination"},{"id":543,"category":"sorting","order":3,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2017-05-31 09:26:35","updated_at":"2022-02-02 14:10:41","section":175,"code":"$('#title-Bubble').click();\n$(\"#sort\").addClass(\"menu-highlighted\");","section_order":7,"value":"7-3","text":"<p>Try <span class=\"slide-actions\" onclick=\"doButtonAction33()\">Bubble Sort Extreme Case<\/span> where we run Bubble Sort on a small reverse sorted input array. We will encounter the O(<b>N<\/b><sup>2<\/sup>) time complexity again.<\/p><br><p>Note that running Bubble Sort on a `nearly sorted&#39; array like [2,3,4,5,6,...,1] will also make this Optimized Bubble Sort still runs in O(<b>N<\/b><sup>2<\/sup>).<\/p>","title":"The Answer"},{"id":176,"category":"sorting","order":8,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 15:26:17","updated_at":"2022-01-04 14:12:52","section":-1,"code":"$('#title-Selection').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.selectionSort, \"29,10,14,37,13\");","section_order":-1,"value":"8","text":"<p>Given an array of <b>N<\/b> items and <b>L<\/b> = 0, Selection Sort will:<\/p><ol><li>Find the position <b>X<\/b> of the smallest item&nbsp;in the range of [<b>L<\/b>...<b>N<\/b>\u22121],<\/li><li>Swap <b>X<\/b>-th item with the <b>L<\/b>-th item,<\/li><li>Increase the lower-bound <b>L<\/b> by 1 and repeat Step 1 until <b>L<\/b> = <b>N<\/b>-2.<\/li><\/ol><p class=\"notforprint\">Let&#39;s try <span class=\"slide-actions\" onclick=\"doButtonAction8()\">Selection Sort<\/span> on the same small example array [29, 10, 14, 37, 13].<\/p><br><p>Without loss of generality, we can also implement Selection Sort in reverse:<br>Find the position of the largest item <b>Y<\/b> and swap it with the last item.<\/p>","title":"Selection Sort"},{"id":187,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 20:35:19","updated_at":"2022-02-08 05:58:05","section":176,"code":"$('#title-Selection').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.selectionSort, \"29,10,14,37,13\");","section_order":8,"value":"8-1","text":"<pre>void selectionSort(int a[], int N) {<br>  for (int L = 0; L &lt;= N-2; ++L) { \/\/ O(<b>N<\/b>)<br>    int X = min_element(a+L, a+N) - a; \/\/ O(<b>N<\/b>)<br>    swap(a[X], a[L]); \/\/ O(1), X may be equal to L (no actual swap)<br>  }<br>}<\/pre><p>Total: O(<b>N<\/b><sup>2<\/sup>) \u2014 To be precise, it is similar to <a href=\"?slide=7-1\"><u>Bubble Sort analysis<\/u><\/a>.<\/p>","title":"Selection Sort, C++ Code &amp; Analysis"},{"id":202,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:00:02","updated_at":"2022-01-04 14:13:18","section":176,"code":"$('#title-Selection').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.selectionSort, \"29,10,14,37,13\");","section_order":8,"value":"8-2","text":"<span class=\"notforprint\"><input class=\"mcq-answer\" id=\"mcq-answer-4\" value=\"26\" hidden><p>Quiz: <b>How many (real) swaps are required to sort [29, 10, 14, 37, 13] by Selection Sort?<\/b><\/p><form><input type=\"radio\" name=\"mcq-4-choice\" value=\"25\"> 2<br><input type=\"radio\" name=\"mcq-4-choice\" value=\"26\"> 3<br><input type=\"radio\" name=\"mcq-4-choice\" value=\"27\"> 4<br><input type=\"radio\" name=\"mcq-4-choice\" value=\"24\"> 1<br><\/form><button class=\"mcq-submit\" id=\"submit-4\">Submit<\/button> <span id=\"answer-status-4\"><\/span><\/span>","title":"Mini Quiz"},{"id":178,"category":"sorting","order":9,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 18:14:12","updated_at":"2022-01-04 14:14:17","section":-1,"code":"$('#title-Insertion').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.insertionSort, \"40,13,20,8\");","section_order":-1,"value":"9","text":"<p>Insertion sort is similar to how most people arrange a hand of poker cards. <img src=\"https:\/\/puu.sh\/vfi6a\/e532309371.png\" alt=\"Poker hand\"><\/p><ol><li>Start with one card in your hand,<\/li><li>Pick the next card and insert it into its proper sorted order,<\/li><li>Repeat previous step for all cards.<\/li><\/ol><p class=\"notforprint\">Let&#39;s try <span class=\"slide-actions\" onclick=\"doButtonAction10()\">Insertion Sort<\/span> on the small example array [40, 13, 20, 8].<\/p>","title":"Insertion Sort"},{"id":203,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:20:19","updated_at":"2021-12-26 14:26:02","section":178,"code":"$('#title-Insertion').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.insertionSort, \"40,13,20,8\");","section_order":9,"value":"9-1","text":"<pre>void insertionSort(int a[], int N) {<br>  for (int i = 1; i &lt; N; ++i) { \/\/ O(N)<br>    int X = a[i]; \/\/ X is the item to be inserted<br>    int j = i-1;<br>    for (; j &gt;= 0 &amp;&amp; a[j] &gt; X; --j) \/\/ can be fast or slow<br>      a[j+1] = a[j]; \/\/ make a place for X<br>    a[j+1] = X; \/\/ index j+1 is the insertion point<br>  }<br>}<\/pre>","title":"Insertion Sort, C++ Code and Analysis 1"},{"id":204,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:23:45","updated_at":"2021-12-26 14:26:06","section":178,"code":"$('#title-Insertion').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.insertionSort, \"40,13,20,8\");","section_order":9,"value":"9-2","text":"<p>The outer loop executes <b>N<\/b>\u22121 times, that&#39;s quite clear.<\/p><br><p>But the number of times the inner-loop is executed depends on the input:<\/p><ol><li>In best-case scenario, the array is already sorted and (a[j] &gt; X) is always false<br>So no shifting of data is necessary and the inner loop runs in O(<b>1<\/b>),<\/li><li>In worst-case scenario, the array is reverse sorted and (a[j] &gt; X) is always true<br>Insertion always occur at the front of the array and the inner loop runs in O(<b>N<\/b>).<\/li><\/ol><p>Thus, the best-case time is O(<b>N &times;  1<\/b>) = O(<b>N<\/b>) and the worst-case time is O(<b>N &times; N<\/b>) = O(<b>N<\/b><sup>2<\/sup>).<\/p>","title":"Insertion Sort: Analysis 2"},{"id":205,"category":"sorting","order":3,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-10 05:27:56","updated_at":"2022-01-04 14:15:45","section":178,"code":"$('#title-Insertion').click();\n$(\"#sort\").addClass(\"menu-highlighted\");\nchangeSortType(gw.insertionSort, \"40,13,20,8\");","section_order":9,"value":"9-3","text":"<span class=\"notforprint\"><input class=\"mcq-answer\" id=\"mcq-answer-5\" value=\"31\" hidden><p>Quiz: <b>What is the complexity of Insertion Sort on any input array?<\/b><\/p><form><input type=\"radio\" name=\"mcq-5-choice\" value=\"29\"> O(N)<br><input type=\"radio\" name=\"mcq-5-choice\" value=\"31\"> O(N^2)<br><input type=\"radio\" name=\"mcq-5-choice\" value=\"30\"> O(N log N)<br><input type=\"radio\" name=\"mcq-5-choice\" value=\"28\"> O(1)<br><\/form><button class=\"mcq-submit\" id=\"submit-5\">Submit<\/button> <span id=\"answer-status-5\"><\/span><br><br><p>Ask your instructor if you are not clear on this or read similar remarks on <a href=\"?slide=11-10\"><u>this slide<\/u><\/a>.<\/p><\/span>","title":"Mini Quiz"},{"id":555,"category":"sorting","order":10,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:08:40","updated_at":"2022-01-04 14:16:51","section":-1,"code":"","section_order":-1,"value":"10","text":"<p>We will discuss two (and a half) comparison-based sorting algorithms soon:<\/p><ol><li><a href=\"?slide=11\"><u>Merge Sort<\/u><\/a>,<\/li><li><a href=\"?slide=12\"><u>Quick Sort<\/u><\/a> and its <a href=\"?slide=13\"><u>Randomized version<\/u><\/a> (which only has one change).<\/li><\/ol><p>These sorting algorithms are usually implemented recursively, use Divide and Conquer problem solving paradigm, and run in O(<b>N<\/b> log <b>N<\/b>) time for Merge Sort and O(<b>N<\/b> log <b>N<\/b>) time <i>in expectation<\/i> for Randomized Quick Sort.<\/p><br><p>PS: The non-randomized version of Quick Sort runs in O(<b>N<sup>2<\/sup><\/b>) though.<\/p>","title":"2.5 O(N log N) Comparison-based Sorting"},{"id":179,"category":"sorting","order":11,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 18:30:57","updated_at":"2020-10-06 04:41:09","section":-1,"code":"$('#title-Merge').click();","section_order":-1,"value":"11","text":"<p>Given an array of <b>N<\/b> items, Merge Sort will:<\/p><ol><li>Merge each pair of individual element (which is by default, sorted) into sorted arrays of 2 elements,<\/li><li>Merge each pair of sorted arrays of 2 elements into sorted arrays of 4 elements,<br>Repeat the process...,<\/li><li>Final step: Merge 2 sorted arrays of <b>N<\/b>\/2 elements (for simplicity of this discussion, we assume that <b>N<\/b> is even) to obtain a fully sorted array of <b>N<\/b> elements.<\/li><\/ol><p>This is just the general idea and we need a few more details before we can discuss the true form of Merge Sort.<\/p>","title":"Merge Sort"},{"id":546,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 05:12:46","updated_at":"2022-01-04 14:17:39","section":179,"code":"$('#title-Merge').click();\nchangeSortType(gw.mergeSort, \"1,5,19,20,2,11,15,17\");","section_order":11,"value":"11-1","text":"<p>We will dissect this Merge Sort algorithm by first discussing its most important sub-routine: The O(<b>N<\/b>) <samp>merge<\/samp>.<\/p><br><p>Given two sorted array, A and B, of size <b>N<sub>1<\/sub><\/b> and <b>N<sub>2<\/sub><\/b>, we can efficiently merge them into one larger combined sorted array of size <b>N<\/b> = <b>N<sub>1<\/sub><\/b>+<b>N<sub>2<\/sub><\/b>, in O(<b>N<\/b>) time.<\/p><br><p>This is achieved by simply comparing the front of the two arrays and take the smaller of the two at all times. However, this simple but fast O(<b>N<\/b>) <samp>merge<\/samp> sub-routine will need additional array to do this merging correctly.<\/p>","title":"Important Subroutine, O(N) Merge"},{"id":550,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:02:01","updated_at":"2022-02-02 14:33:40","section":179,"code":"$('#title-Merge').click();\nchangeSortType(gw.mergeSort, \"1,5,19,20,2,11,15,17\");","section_order":11,"value":"11-2","text":"<pre>void merge(int a[], int low, int mid, int high) {<br>  \/\/ subarray1 = a[low..mid], subarray2 = a[mid+1..high], both sorted<br>  int N = high-low+1;<br>  int b[N]; \/\/ discuss: why do we need a temporary array b?<br>  int left = low, right = mid+1, bIdx = 0;<br>  while (left &lt;= mid &amp;&amp; right &lt;= high) \/\/ the merging<br>    b[bIdx++] = (a[left] &lt;= a[right]) ? a[left++] : a[right++];<br>  while (left &lt;= mid) b[bIdx++] = a[left++]; \/\/ leftover, if any<br>  while (right &lt;= high) b[bIdx++] = a[right++]; \/\/ leftover, if any<br>  for (int k = 0; k &lt; N; ++k) a[low+k] = b[k]; \/\/ copy back<br>}<br><\/pre><p class=\"notforprint\">Try <span class=\"slide-actions\" onclick=\"doButtonAction12()\">Merge Sort<\/span> on the example array [1, 5, 19, 20, 2, 11, 15, 17] that have its first half already sorted [1, 5, 19, 20] and its second half also already sorted [2, 11, 15, 17]. Concentrate on the last merge of the Merge Sort algorithm.<\/p>","title":"Merge Subroutine C++ Implementation"},{"id":547,"category":"sorting","order":3,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 06:16:03","updated_at":"2017-06-06 03:45:26","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-3","text":"<p>Before we continue, let&#39;s talk about Divide and Conquer (abbreviated as D&amp;C), a powerful problem solving paradigm.<\/p><br><p>Divide and Conquer algorithm solves (certain kind of) problem \u2014 like our sorting problem \u2014 in the following steps:<\/p><ol><li>Divide step: Divide the large, original problem into smaller sub-problems and recursively solve the smaller sub-problems,<\/li><li>Conquer step: Combine the results of the smaller sub-problems to produce the result of the larger, original problem.<\/li><\/ol>","title":"Divide and Conquer Paradigm"},{"id":549,"category":"sorting","order":4,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:01:32","updated_at":"2021-12-26 14:31:25","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-4","text":"<p>Merge Sort is a Divide and Conquer sorting algorithm.<\/p><br><p>The divide step is simple: Divide the current array into two halves (perfectly equal if <b>N<\/b> is even or one side is slightly greater by one element if <b>N<\/b> is odd) and then recursively sort the two halves.<\/p><br><p>The conquer step is the one that does the most work: Merge the two (sorted) halves to form a sorted array, using the merge sub-routine <a href=\"?slide=11-2\"><u>discussed earlier<\/u><\/a>.<\/p>","title":"Merge Sort as a D&C Algorithm"},{"id":567,"category":"sorting","order":5,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 08:28:03","updated_at":"2017-06-06 03:45:29","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-5","text":"<pre>void mergeSort(int a[], int low, int high) {<br>  \/\/ the array to be sorted is a[low..high]<br>  if (low &lt; high) { \/\/ base case: low &gt;= high (0 or 1 item)<br>    int mid = (low+high) \/ 2;\t<br>    mergeSort(a, low  , mid ); \/\/ divide into two halves<br>    mergeSort(a, mid+1, high); \/\/ then recursively sort them<br>    merge(a, low, mid, high); \/\/ conquer: the merge subroutine<br>  }<br>}<\/pre>","title":"Merge Sort C++ Implementation"},{"id":548,"category":"sorting","order":6,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:01:19","updated_at":"2022-01-04 14:19:38","section":179,"code":"$('#title-Merge').click();\nchangeSortType(gw.mergeSort, \"7,2,6,3,8,4,5\");","section_order":11,"value":"11-6","text":"<p>Contrary to what many other CS printed textbooks usually show (as textbooks are static), the actual execution of Merge Sort does <b>not<\/b> split to two subarrays <b>level by level<\/b>, but it will recursively sort the <b>left<\/b> subarray first before dealing with the <b>right<\/b> subarray.<\/p><br><p>That&#39;s it, running <span class=\"slide-actions\" onclick=\"doButtonAction12()\">Merge Sort<\/span> on the example array [7, 2, 6, 3, 8, 4, 5], it will recurse to [7, 2, 6, 3], then [7, 2], then [7] (a single element, sorted by default), backtrack, recurse to [2] (sorted), backtrack, then finally merge [7, 2] into [2, 7], before it continue processing [6, 3] and so on.<\/p>","title":"Demonstration"},{"id":551,"category":"sorting","order":7,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:03:34","updated_at":"2017-06-06 03:46:01","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-7","text":"<p>In Merge Sort, the bulk of work is done in the conquer\/merge step as the divide step does not really do anything (treated as O(<b>1<\/b>)).<\/p><br><p>When we call <samp>merge(a, low, mid, high)<\/samp>, we process <b>k = (high-low+1)<\/b> items.<br>There will be at most <b>k-1<\/b> comparisons.<br>There are <b>k<\/b> moves from original array <b>a<\/b> to temporary array <b>b<\/b> and another <b>k<\/b> moves back.<br>In total, number of operations inside <samp>merge<\/samp> sub-routine is &lt; 3<b>k<\/b>-1 = O(<b>k<\/b>).<\/p><br><p>The important question is how many times this <samp>merge<\/samp> sub-routine is called?<\/p>","title":"Merge Sort: Analysis Part 1"},{"id":552,"category":"sorting","order":8,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:03:58","updated_at":"2017-06-06 03:46:02","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-8","text":"<img src=\"https:\/\/visualgo.net\/img\/merge.png\" width=\"500\" alt=\"The Recursion Tree of Merge Sort\">","title":"Merge Sort: Analysis Part 2"},{"id":553,"category":"sorting","order":9,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:04:24","updated_at":"2022-01-04 14:20:44","section":179,"code":"$('#title-Merge').click();","section_order":11,"value":"11-9","text":"<p>Level 1: 2^0=1 calls to merge() with <b>N<\/b>\/2^1 items each, O(2^0 x 2 x <b>N<\/b>\/2^1) = O(<b>N<\/b>)<br>Level 2: 2^1=2 calls to merge() with <b>N<\/b>\/2^2 items each, O(2^1 x 2 x <b>N<\/b>\/2^2) = O(<b>N<\/b>)<br>Level 3: 2^2=4 calls to merge() with <b>N<\/b>\/2^3 items each, O(2^2 x 2 x <b>N<\/b>\/2^3) = O(<b>N<\/b>)<br>...<br>Level (log <b>N<\/b>): 2^(log <b>N<\/b>-1) (or <b>N<\/b>\/2) calls to merge() with <b>N<\/b>\/2^log <b>N<\/b> (or 1) item each, O(<b>N<\/b>)<\/p><br><p>There are log <b>N<\/b> levels and in each level, we perform O(<b>N<\/b>) work, thus the overall time complexity is O(<b>N<\/b> log <b>N<\/b>). We will <a href=\"?slide=14-1\"><u>later<\/u><\/a> see that this is an optimal (comparison-based) sorting algorithm, i.e., we cannot do better than this.<\/p>","title":"Merge Sort: Analysis Part 3"},{"id":566,"category":"sorting","order":10,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:20:32","updated_at":"2022-01-04 14:21:49","section":179,"code":"","section_order":11,"value":"11-10","text":"<p>The most important good part of Merge Sort is its O(<b>N<\/b> log <b>N<\/b>) performance guarantee, regardless of the original ordering of the input. That&#39;s it, there is <b>no<\/b> adversary test case that can make Merge Sort runs longer than O(<b>N<\/b> log <b>N<\/b>) for <b>any<\/b> array of <b>N<\/b> elements.<\/p><br><p>Merge Sort is therefore very suitable to sort extremely large number of inputs as O(<b>N<\/b> log <b>N<\/b>) grows much slower than the O(<b>N<\/b><sup>2<\/sup>) sorting algorithms that we have <a href=\"?slide=5\"><u>discussed earlier<\/u><\/a>.<\/p><br><p>There are however, several not-so-good parts of Merge Sort. First, it is actually not easy to implement from scratch (<a href=\"?slide=19-3\"><u>but we don&#39;t have to<\/u><\/a>). Second, it requires additional O(<b>N<\/b>) storage during <a href=\"?slide=11-2\"><u>merging operation<\/u><\/a>, thus not really memory efficient and <a href=\"?slide=17-1\"><u>not in-place<\/u><\/a>. Btw, if you are interested to see what have been done to address these (classic) Merge Sort not-so-good parts, you can read <a href=\"https:\/\/en.wikipedia.org\/wiki\/Merge_sort#Variants\" target=\"_blank\"><u>this<\/u><\/a>.<\/p><br><p>Merge Sort is also a <a href=\"?slide=17-2\"><u>stable sort<\/u><\/a> algorithm. Discussion: Why?<\/p>","title":"Pros and Cons"},{"id":775,"category":"sorting","order":11,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2022-01-04 14:22:28","updated_at":"2022-01-04 14:26:06","section":179,"code":"","section_order":11,"value":"11-11","text":"<pre>b[bIdx++] = (a[left] &lt;= a[right]) ? a[left++] : a[right++];<br><\/pre><p>See above. If a = the front of the left subarray is equals to b = the front of the right subarray, the Merge routine will pick a first, thus preserving stability. Note that one character change below (notice &lt; vs &lt;=) makes Merge Sort no longer stable.<\/p><pre>b[bIdx++] = (a[left] &lt; a[right]) ? a[left++] : a[right++];<br><\/pre>","title":"The Answer"},{"id":180,"category":"sorting","order":12,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 19:23:20","updated_at":"2021-12-26 14:33:36","section":-1,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":-1,"value":"12","text":"<p>Quick Sort is another Divide and Conquer sorting algorithm (the other one discussed in this visualization page is <a href=\"?slide=11\"><u>Merge Sort<\/u><\/a>).<\/p><br><p>We will see that this deterministic, non randomized version of Quick Sort can have bad time complexity of O(<b>N<\/b><sup>2<\/sup>) on adversary input before continuing with the <a href=\"?slide=13\"><u>randomized<\/u><\/a> and usable version later.<\/p>","title":"Quick Sort"},{"id":556,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:16:06","updated_at":"2022-01-04 14:39:20","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-1","text":"<p>Divide step: Choose an item <b>p<\/b> (known as the pivot)<br>Then partition the items of <b>a[i..j]<\/b> into three parts: <b>a[i..m-1]<\/b>, <b>a[m]<\/b>, and <b>a[m+1..j]<\/b>.<br><b>a[i..m-1]<\/b> (possibly empty) contains items that are smaller than (or equal to) <b>p<\/b>.<br><b>a[m] = p<\/b>, i.e., index <b>m<\/b> is the correct position for <b>p<\/b> in the sorted order of array <b>a<\/b>.<br><b>a[m+1..j]<\/b> (possibly empty) contains items that are greater than (or equal to) <b>p<\/b>.<br>Then, recursively sort the two parts.<\/p><br><p>Conquer step: Don&#39;t be surprised... We do nothing :O!<\/p><br><p>If you compare this with <a href=\"?slide=11-4\"><u>Merge Sort<\/u><\/a>, you will see that Quick Sort D&amp;C steps are totally opposite with Merge Sort.<\/p>","title":"Quick Sort as a D&amp;C Algorithm"},{"id":574,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:19:13","updated_at":"2022-01-04 14:41:37","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-2","text":"<p>We will dissect this Quick Sort algorithm by first discussing its most important sub-routine: The O(<b>N<\/b>) <samp>partition<\/samp> (classic version).<\/p><br><p>To partition <b>a[i..j]<\/b>, we first choose <b>a[i]<\/b> as the pivot <b>p<\/b>.<br><\/p><p>The remaining items (i.e., <b>a[i+1..j]<\/b>) are divided into 3 regions:<\/p><ol><li><b>S1<\/b> = <b>a[i+1..m]<\/b> where items are &le; <b>p<\/b>,<\/li><li><b>S2<\/b> = <b>a[m+1..k-1]<\/b> where items are &ge; <b>p<\/b>, and<\/li><li>Unknown = <b>a[k..j]<\/b>, where items are yet to be assigned to either <b>S1<\/b> or <b>S2<\/b>.<\/li><\/ol><p>Discussion: Why do we choose <b>p<\/b> = <b>a[i]<\/b>? Are there other choices?<\/p><br><p>Harder Discussion: If <b>a[k] == p<\/b>, should we put it in region S1 or S2?<\/p>","title":"Important Sub-routine, O(N) Partition"},{"id":583,"category":"sorting","order":3,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2017-06-06 03:49:51","updated_at":"2022-01-04 14:42:47","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-3","text":"<p>The choice of <b>p<\/b> = <b>a[i]<\/b> is arbitrary. Any item between <b>a[i..j]<\/b> can be chosen as a pivot.<\/p><br><p>However we will <a href=\"?slide=12-12\"><u>later see<\/u><\/a> that fixing the pivot in deterministic manner can lead to poor time complexity of O(<b>N<\/b><sup>2<\/sup>) so we will later <a href=\"?slide=13\"><u>randomize it<\/u><\/a>.<\/p><br><p>Regarding duplicate items, is it actually <b>not<\/b> good to always put item(s) that is\/are == <b>p<\/b> either region S1 (or S2) at all times as it will make even the Randomized version of Quick Sort runs in O(<b>N<sup>2<\/sup><\/b>). A better implementation is to randomly put item(s) that is\/are == <b>p<\/b> on either S1 or S2, using 50-50 chance (there is another way to do this).<\/p>","title":"The Answer"},{"id":575,"category":"sorting","order":4,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:24:25","updated_at":"2022-01-04 14:45:03","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-4","text":"<p>Initially, both <b>S1<\/b> and <b>S2<\/b> regions are empty, i.e., all items excluding the designated pivot <b>p<\/b> are in the unknown region.<\/p><br><p>Then, for each item <b>a[k]<\/b> in the unknown region, we compare <b>a[k]<\/b> with <b>p<\/b> and decide one of the three cases:<\/p><ol><li>If <b>a[k]<\/b> &gt; <b>p<\/b>, put <b>a[k]<\/b> into <b>S2<\/b>,<\/li><li>If <b>a[k]<\/b> &lt; <b>p<\/b>, put <b>a[k]<\/b> into <b>S1<\/b>,<\/li><li>If <b>a[k]<\/b> == <b>p<\/b>, throw a coin and put <b>a[k]<\/b> into <b>S1<\/b>\/<b>S2<\/b> if it lands head\/tail, respectively.<\/ol><p>These three cases are elaborated in the next two slides.<\/p><br><p>Lastly, we swap <b>a[i]<\/b> and <b>a[m]<\/b> to put pivot <b>p<\/b> right in the middle of <b>S1<\/b> and <b>S2<\/b>.<\/p>","title":"Partition - Continued"},{"id":576,"category":"sorting","order":5,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:25:02","updated_at":"2022-01-04 14:45:32","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-5","text":"<img src=\"https:\/\/visualgo.net\/img\/partition1.png\" width=\"500\" alt=\"Case when a[k] &ge; p, increment k, extend S2 by 1 item\">","title":"Partition - Case when a[k] &gt; p"},{"id":577,"category":"sorting","order":6,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:26:05","updated_at":"2017-06-06 03:49:59","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-6","text":"<img src=\"https:\/\/visualgo.net\/img\/partition2.png\" width=\"500\" alt=\"Case when a[k] &lt; p, increment m, swap a[k] with a[m], increment k, extend S1 by 1 item\">","title":"Partition - Case when a[k] &lt; p"},{"id":579,"category":"sorting","order":7,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:44:26","updated_at":"2022-01-04 14:50:21","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-7","text":"<pre>int partition(int a[], int i, int j) {<br>  int p = a[i]; \/\/ p is the pivot<br>  int m = i; \/\/ S1 and S2 are initially empty<br>  for (int k = i+1; k &lt;= j; ++k) { \/\/ explore the unknown region<br>    if ((a[k] &lt; p) || ((a[k] == p) && (rand()%2 == 0)))  { \/\/ case 2+3<br>      ++m;<br>      swap(a[k], a[m]); \/\/ C++ STL algorithm std::swap<br>    } \/\/ notice that we do nothing in case 1: a[k] &gt; p<br>  }<br>  swap(a[i], a[m]); \/\/ final step, swap pivot with a[m]<br>  return m; \/\/ return the index of pivot<br>}<\/pre>","title":"Partition C++ Implementation"},{"id":578,"category":"sorting","order":8,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:43:05","updated_at":"2017-06-06 03:49:57","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,27,16\");","section_order":12,"value":"12-8","text":"<pre>void quickSort(int a[], int low, int high) {<br>  if (low &lt; high) {<br>    int m = partition(a, low, high); \/\/ O(N)<br>    \/\/ a[low..high] ~&gt; a[low..m\u20131], pivot, a[m+1..high]<br>    quickSort(a, low, m-1); \/\/ recursively sort left subarray<br>    \/\/ a[m] = pivot is already sorted after partition<br>    quickSort(a, m+1, high); \/\/ then sort right subarray<br>  }<br>}<\/pre>","title":"Quick Sort C++ Implementation"},{"id":557,"category":"sorting","order":9,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:16:20","updated_at":"2022-01-04 15:16:55","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"27,38,12,39,29,16\");","section_order":12,"value":"12-9","text":"<p>Try <span class=\"slide-actions\" onclick=\"doButtonAction13()\">Quick Sort<\/span> on example array [27, 38, 12, 39, 29, 16]. We shall elaborate the first partition step as follows:<br>We set <b>p = a[0] = 27<\/b>.<br>We set <b>a[1] = 38<\/b> as part of <b>S2<\/b> so <b>S1 = {}<\/b> and <b>S2 = {38}<\/b>.<br>We swap <b>a[1] = 38<\/b> with <b>a[2] = 12<\/b> so <b>S1 = {12}<\/b> and <b>S2 = {38}<\/b>.<br>We set <b>a[3] = 39<\/b> and later <b>a[4] = 29<\/b> as part of <b>S2<\/b> so <b>S1 = {12}<\/b> and <b>S2 = {38,39,29}<\/b>.<br>We swap <b>a[2] = 38<\/b> with <b>a[5] = 16<\/b> so <b>S1 = {12,16}<\/b> and <b>S2 = {39,29,38}<\/b>.<br>We swap <b>p = a[0] = 27<\/b> with <b>a[2] = 16<\/b> so <b>S1 = {16,12}<\/b>, <b>p = {27}<\/b>, and <b>S2 = {39,29,38}<\/b>.<\/p><br><p>After this, <b>a[2] = 27<\/b> is guaranteed to be sorted and now Quick Sort recursively sorts the left side <b>a[0..1]<\/b> first and later recursively sorts the right side <b>a[3..5]<\/b>.<\/p>","title":"Demonstration"},{"id":558,"category":"sorting","order":10,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:16:37","updated_at":"2021-12-26 14:35:10","section":180,"code":"$('#title-Quick').click();","section_order":12,"value":"12-10","text":"<p>First, we analyze the cost of one call of <samp>partition<\/samp>.<\/p><br><p>Inside <samp>partition(a, i, j)<\/samp>, there is only a single for-loop that iterates through (j-i) times. As j can be as big as <b>N<\/b>-1 and i can be as low as 0, then the time complexity of partition is O(<b>N<\/b>).<\/p><br><p>Similar to <a href=\"?slide=11-7\"><u>Merge Sort analysis<\/u><\/a>, the time complexity of Quick Sort is then dependent on the number of times <samp>partition(a, i, j)<\/samp> is called.<\/p>","title":"Quick Sort: Analysis Part 1"},{"id":559,"category":"sorting","order":11,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:16:53","updated_at":"2022-01-04 15:19:00","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"5,18,23,39,44,50\");","section_order":12,"value":"12-11","text":"<p>When the array <b>a<\/b> is already in ascending order, e.g., <b>a<\/b> = [5, 18, 23, 39, 44, 50], <span class=\"slide-actions\" onclick=\"doButtonAction13()\">Quick Sort<\/span> will set <b>p = a[0] = 5<\/b>, and will return <b>m = 0<\/b>, thereby making <b>S1<\/b> region <b>empty<\/b> and <b>S2<\/b> region: Everything else other than the pivot (<b>N<\/b>-1 items).<\/p>","title":"Quick Sort: Analysis Part 2"},{"id":580,"category":"sorting","order":12,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-05 03:35:23","updated_at":"2021-12-26 14:35:41","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"5,18,23,39,44,50\");","section_order":12,"value":"12-12","text":"<p>On such worst case input scenario, this is what happens:<\/p><br><img src=\"https:\/\/visualgo.net\/img\/qsort_worstcase.png\" width=\"250\" alt=\"Worst Case analysis of Quick Sort\"><br><p>The first partition takes O(<b>N<\/b>) time, splits <b>a<\/b> into 0, 1, <b>N<\/b>-1 items, then recurse right.<br>The second one takes O(<b>N<\/b>-1) time, splits <b>a<\/b> into 0, 1, <b>N<\/b>-2 items, then recurse right again.<br>...<br>Until the last, <b>N<\/b>-th partition splits <b>a<\/b> into 0, 1, 1 item, and Quick Sort recursion stops.<br><\/p><br><p>This is the classic <b>N+(N-1)+(N-2)+...+1<\/b> pattern, which is O(<b>N<\/b><sup>2<\/sup>), similar analysis as the one <a href=\"?slide=7-1\"><u>in this Bubble Sort analysis slide<\/u><\/a>...<\/p>","title":"Quick Sort: Analysis Part 3"},{"id":582,"category":"sorting","order":13,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-05 03:51:20","updated_at":"2021-12-26 14:35:58","section":180,"code":"$('#title-Quick').click();\nchangeSortType(gw.quickSort, \"4,1,3,2,6,5,7\");","section_order":12,"value":"12-13","text":"<p>The best case scenario of Quick Sort occurs when partition always splits the array into <b>two equal halves<\/b>, like <a href=\"?slide=11-8\"><u>Merge Sort<\/u><\/a>.<\/p><br><p>When that happens, the depth of recursion is only O(log <b>N<\/b>).<\/p><br><p>As each level takes O(<b>N<\/b>) comparisons, the time complexity is O(<b>N<\/b> log <b>N<\/b>).<\/p><br><p>Try <span class=\"slide-actions\" onclick=\"doButtonAction13()\">Quick Sort<\/span> on this hand-crafted example input array [4, 1, 3, 2, 6, 5, 7].<br>In practice, this is rare, thus we need to devise a better way: <a href=\"?slide=13\"><u>Randomized Quick Sort<\/u><\/a>.<\/p>","title":"Quick Sort: Best Case (Rare)"},{"id":181,"category":"sorting","order":13,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 19:37:45","updated_at":"2022-01-04 15:25:34","section":-1,"code":"$('#title-RandomizedQuick').click();\nchangeSortType(gw.randomizedQuickSort, DEFAULT_DATA);","section_order":-1,"value":"13","text":"<p>Same as <b>Quick Sort<\/b> except just before executing the partition algorithm, it <b>randomly<\/b> select the pivot between <b>a[i..j]<\/b> instead of always choosing <b>a[i]<\/b> (or any other fixed index between <b>[i..j]<\/b>) deterministically.<\/p><br><p>Mini exercise: Implement the idea above to the implementation shown in <a href=\"?slide=12-7\"><u>this slide<\/u><\/a>!<\/p><br><p>Running <span class=\"slide-actions\" onclick=\"doButtonAction14()\">Random Quick Sort<\/span> on this large and somewhat random example array <b>a<\/b> = [3,44,38,5,47,15,36,26,27,2,46,4,19,50,48] feels fast.<\/p>","title":"Random Quick Sort"},{"id":569,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:07:14","updated_at":"2022-01-04 15:28:42","section":181,"code":"","section_order":13,"value":"13-1","text":"<p>It will take about 1 hour lecture to properly explain why this randomized version of Quick Sort has expected time complexity of O(<b>N<\/b> log <b>N<\/b>) on <b>any<\/b> input array of <b>N<\/b> elements.<\/p><br><p>In this e-Lecture, we will assume that it is true.<\/p><br><p>If you need non formal explanation: Just imagine that on randomized version of Quick Sort that randomizes the pivot selection, we will <b>not<\/b> always get extremely bad split of 0 (empty), 1 (pivot), and <b>N<\/b>-1 other items. This combination of lucky (half-pivot-half), somewhat lucky, somewhat unlucky, and extremely unlucky (empty, pivot, the rest) yields an average time complexity of O(<b>N<\/b> log <b>N<\/b>).<\/p><br><p>Discussion: For the implementation of <a href=\"?slide=12-4\"><u>Partition<\/u><\/a>, what happen if <b>a[k] == p<\/b>, we <i>always<\/i> put <b>a[k]<\/b> on either side (<b>S1<\/b> or <b>S2<\/b>) deterministically?<\/p>","title":"Magical Analysis"},{"id":776,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2022-01-04 15:28:57","updated_at":"2022-01-04 15:29:59","section":181,"code":"","section_order":13,"value":"13-2","text":"<p>If that is the case, the Random Quick Sort degenerates to O(<b>N<\/b><sup>2<\/sup>) again.<\/p>","title":"The Answer"},{"id":560,"category":"sorting","order":14,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:17:28","updated_at":"2021-12-26 14:37:16","section":-1,"code":"$('#title-Counting').click();","section_order":-1,"value":"14","text":"<p>We will discuss two <b>non comparison-based<\/b> sorting algorithms in the next few slides:<\/p><ol><li><a href=\"?slide=15\"><u>Counting Sort<\/u><\/a>,<\/li><li><a href=\"?slide=16\"><u>Radix Sort<\/u><\/a>.<\/li><\/ol><p>These sorting algorithms can be faster than the lower bound of comparison-based sorting algorithm of &Omega;(<b>N<\/b> log <b>N<\/b>) by <b>not<\/b> comparing the items of the array.<\/p>","title":"2 O(N) Non Comparison-based Sorting Algorithms"},{"id":561,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:17:53","updated_at":"2022-01-04 15:30:31","section":560,"code":"$('#title-Counting').click();","section_order":14,"value":"14-1","text":"<p>It is known (also not proven in this visualization as it will take another 1 hour lecture to do so) that all <b>comparison-based<\/b> sorting algorithms have a lower bound time complexity of \u03a9(<b>N<\/b> log <b>N<\/b>).<\/p><br><p>Thus, any comparison-based sorting algorithm with worst-case complexity O(<b>N<\/b> log <b>N<\/b>), like <a href=\"?slide=11-9\"><u>Merge Sort<\/u><\/a> is considered an optimal algorithm, i.e., we cannot do better than that.<\/p><br><p>However, we can achieve faster sorting algorithm &mdash; i.e., in O(<b>N<\/b>) &mdash; if certain assumptions of the input array exist and thus we can avoid comparing the items to determine the sorted order.<\/p>","title":"Lower Bound of Sorting Algorithm"},{"id":182,"category":"sorting","order":15,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 19:43:21","updated_at":"2020-10-06 04:41:06","section":-1,"code":"$('#title-Counting').click();","section_order":-1,"value":"15","text":"<p><b>Assumption<\/b>: If the items to be sorted are <b>Integers with small range<\/b>, we can count the frequency of occurrence of each Integer (in that small range) and then loop through that small range to output the items in sorted order.<\/p><br><p>Try <span class=\"slide-actions\" onclick=\"doButtonAction15()\">Counting Sort<\/span> on the example array above where all Integers are within [1..9], thus we just need to count how many times Integer 1 appears, Integer 2 appears, ..., Integer 9 appears, and then loop through 1 to 9 to print out <b>x<\/b> copies of Integer <b>y<\/b> if frequency[<b>y<\/b>] = <b>x<\/b>.<\/p><br><p>The time complexity is O(<b>N<\/b>) to count the frequencies and O(<b>N+k<\/b>) to print out the output in sorted order where <b>k<\/b> is the range of the input Integers, which is 9-1+1 = 9 in this example. The time complexity of Counting Sort is thus O(<b>N+k<\/b>), which is O(<b>N<\/b>) if <b>k<\/b> is small.<\/p><br><p>We will not be able to do the counting part of Counting Sort when <b>k<\/b> is relatively big due to memory limitation, as we need to store frequencies of those <b>k<\/b> integers.<\/p>","title":"Counting Sort"},{"id":183,"category":"sorting","order":16,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 20:11:59","updated_at":"2021-12-26 14:38:39","section":-1,"code":"$('#title-Radix').click();","section_order":-1,"value":"16","text":"<p><b>Assumption<\/b>: If the items to be sorted are <b>Integers with large range but of few digits<\/b>, we can combine <a href=\"?slide=15\"><u>Counting Sort<\/u><\/a> idea with Radix Sort to achieve the linear time complexity.<\/p><br><p>In Radix Sort, we treat each item to be sorted as a string of <b>w<\/b> digits (we pad Integers that have less than <b>w<\/b> digits with leading zeroes if necessary).<\/p><br><p>For the least significant (rightmost) digit to the most significant digit (leftmost), we pass through the <b>N<\/b> items and put them according to the active digit into 10 Queues (one for each digit [0..9]), which is like a <i>modified<\/i> Counting Sort as this one preserves <a href=\"?slide=17-2\"><u>stability<\/u><\/a>. Then we re-concatenate the groups again for subsequent iteration.<\/p><br><p>Try <span class=\"slide-actions\" onclick=\"doButtonAction16()\">Radix Sort<\/span> on the example array above for clearer explanation.<\/p><br><p>Notice that we only perform O(<b>w &times; (N+k)<\/b>) iterations. In this example, <b>w = 4<\/b> and <b>k = 10<\/b>.<\/p>","title":"Radix Sort"},{"id":638,"category":"sorting","order":1,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-08-30 16:47:08","updated_at":"2021-12-26 14:42:15","section":183,"code":"$('#title-Radix').click();","section_order":16,"value":"16-1","text":"<p>Now, having discussed about Radix Sort, should we use it for <b>every<\/b> sorting situation?<\/p><br><p>For example, it should be theoretically faster to sort many (<b>N<\/b> is very large) 32-bit signed integers as <b>w &le; 10<\/b> digits and <b>k = 10<\/b> if we interpret those 32-bit signed integers in Decimal. O(10 &times; (<b>N<\/b>+10)) = O(<b>N<\/b>).<\/p>","title":"The Best Sorting Algorithm for Integers?"},{"id":770,"category":"sorting","order":2,"top":"310px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2021-12-26 14:38:53","updated_at":"2021-12-26 14:42:51","section":183,"code":"$('#title-Radix').click();","section_order":16,"value":"16-2","text":"<p>The answer is: It depends.<\/p><br><p>If the number of digits of all Integers are small, similar, and there are lots of Integers, Radix Sort can be better than O(<b>N<\/b> log <b>N<\/b>) comparison-based sorting algorithms.<\/p><br><p>However, for cases like sorting <b>A<\/b> = [732834702348928349382734, 1] in ascending order, then any comparison-based sorting algorithm will easily sort <b>A<\/b> while Radix Sort will do more work.<\/p><br><p>Sometimes, we do not sort integers, e.g. sort floating point numbers. In that case, we need to use the more general purpose comparison-based sorting algorithms.<\/p>","title":"The Answer"},{"id":570,"category":"sorting","order":17,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:08:53","updated_at":"2020-10-06 04:41:05","section":-1,"code":"","section_order":-1,"value":"17","text":"<p>There are a few other properties that can be used to differentiate sorting algorithms on top of whether they are comparison or non-comparison, recursive or iterative.<\/p><br><p>In this section, we will talk about in-place versus not in-place, stable versus not stable, and caching performance of sorting algorithms.<\/p>","title":"Additional Properties of Sorting Algorithms"},{"id":571,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:09:15","updated_at":"2021-12-26 14:43:14","section":570,"code":"","section_order":17,"value":"17-1","text":"<p>A sorting algorithm is said to be an <b>in-place sorting<\/b> algorithm if it requires only a constant amount (i.e. O(<b>1<\/b>)) of extra space during the sorting process. That&#39;s it, a few, constant number of extra variables is OK but we are not allowed to have variables that has variable length depending on the input size <b>N<\/b>.<\/p><br><p><a href=\"?slide=11-2\"><u>Merge Sort<\/u><\/a> (the classic version), due to its <samp>merge<\/samp> sub-routine that requires additional temporary array of size <b>N<\/b>, is not in-place.<\/p><br><p>Discussion: How about Bubble Sort, Selection Sort, Insertion Sort, Quick Sort (randomized or not), Counting Sort, and Radix Sort. Which ones are in-place?<\/p>","title":"In-Place Sorting"},{"id":572,"category":"sorting","order":2,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-02 05:09:24","updated_at":"2017-06-02 05:09:24","section":570,"code":"","section_order":17,"value":"17-2","text":"<p>A sorting algorithm is called <b>stable<\/b> if the relative order of elements <b>with the same key value<\/b> is preserved by the algorithm after sorting is performed.<\/p><br><p>Example application of stable sort: Assume that we have student names that have been sorted in alphabetical order. Now, if this list is sorted again by tutorial group number (recall that one tutorial group usually has many students), a stable sort algorithm would ensure that all students in the same tutorial group still appear in alphabetical order of their names.<\/p><br><p>Discussion: Which of the sorting algorithms discussed in this e-Lecture are stable?<br>Try sorting array A = {3, 4a, 2, 4b, 1}, i.e. there are two copies of 4 (4a first, then 4b).<\/p>","title":"Stable Sort"},{"id":573,"category":"sorting","order":3,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2017-06-02 05:09:32","updated_at":"2017-06-02 06:17:16","section":570,"code":"","section_order":17,"value":"17-3","text":"<p>This topic is more relevant if one already understand the concept of how computer manages cache memory. This is one of the topic in another typical Computer Science module: \"Computer Organization\".<\/p><br><p>Basically, the behavior of partition algorithm of Quick Sort is very cache friendly and thus Quick Sort, especially the randomized version, is the typical sorting algorithm used in most sorting libraries, like in C++ STL sort (combined with others).<\/p><br><p>Follow up question: How about other sorting algorithms?<\/p>","title":"Caching Performance"},{"id":164,"category":"sorting","order":18,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-20 04:29:58","updated_at":"2020-10-06 04:41:05","section":-1,"code":"","section_order":-1,"value":"18","text":"<p>We are nearing the end of this e-Lecture.<\/p><br><p>Time for a few simple questions.<\/p>","title":"Quizzes"},{"id":184,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 20:23:35","updated_at":"2017-03-27 04:29:51","section":164,"code":"","section_order":18,"value":"18-1","text":"<input class=\"mcq-answer\" id=\"mcq-answer-1\" value=\"5\" hidden><p>Quiz: <b>Which of these algorithms run in O(N log N) on any input array of size N?<\/b><\/p><form><input type=\"radio\" name=\"mcq-1-choice\" value=\"2\"> Bubble Sort<br><input type=\"radio\" name=\"mcq-1-choice\" value=\"3\"> Insertion Sort<br><input type=\"radio\" name=\"mcq-1-choice\" value=\"4\"> Quick Sort (Deterministic)<br><input type=\"radio\" name=\"mcq-1-choice\" value=\"5\"> Merge Sort<br><\/form><button class=\"mcq-submit\" id=\"submit-1\">Submit<\/button> <span id=\"answer-status-1\"><\/span>","title":"Quiz #1"},{"id":185,"category":"sorting","order":2,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-03-26 20:23:54","updated_at":"2017-03-27 04:30:03","section":164,"code":"","section_order":18,"value":"18-2","text":"<input class=\"msq-answer\" id=\"msq-answer-3\" value=\"13,15,16\" hidden><p>Quiz: <b>Which of these algorithms has worst case time complexity of \u0398(N^2) for sorting N integers?<\/b><\/p><input type=\"checkbox\" class=\"msq-choice\" id=\"msq-3-choice-15\"> Insertion Sort<br><input type=\"checkbox\" class=\"msq-choice\" id=\"msq-3-choice-16\"> Selection Sort<br><input type=\"checkbox\" class=\"msq-choice\" id=\"msq-3-choice-14\"> Merge Sort<br><input type=\"checkbox\" class=\"msq-choice\" id=\"msq-3-choice-23\"> Radix Sort<br><input type=\"checkbox\" class=\"msq-choice\" id=\"msq-3-choice-13\"> Bubble Sort<br><button class=\"msq-submit\" id=\"submit-3\">Submit<\/button> <span id=\"answer-status-3\"><\/span><br><br><p>\u0398 is a tight time complexity analysis where the best case &Omega; and the worst case big-O analysis match.<\/p>","title":"Quiz #2"},{"id":562,"category":"sorting","order":19,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:18:30","updated_at":"2020-10-06 04:41:04","section":-1,"code":"","section_order":-1,"value":"19","text":"<p>We have reached the end of sorting e-Lecture.<\/p><br><p>However, there are two other sorting algorithms in VisuAlgo that are embedded in other data structures: <a href=\".\/heap\"><u>Heap Sort<\/u><\/a> and <a href=\".\/bst\"><u>Balanced BST Sort<\/u><\/a>. We will discuss them when you go through the e-Lecture of those two data structures.<\/p>","title":"Extras"},{"id":568,"category":"sorting","order":1,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2017-06-01 09:00:35","updated_at":"2017-06-02 06:17:34","section":562,"code":"","section_order":19,"value":"19-1","text":"<p>The secret challenge is about comparing various sorting algorithms discussed here using various input types (sorted\/nearly sorted ascending\/descending; or random input).<\/p><br><p>In NUS CS2040\/C, this will be delegated to at-home exercise and discussed during tutorial session.<\/p>","title":"Challenge"},{"id":677,"category":"sorting","order":2,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2018-02-01 12:53:10","updated_at":"2018-02-01 12:53:25","section":562,"code":"","section_order":19,"value":"19-2","text":"<p>Inversion Index\/Count of an array <b>A<\/b> indicates how far\/close <b>A<\/b> is from being sorted.<\/p><br><p>If array <b>A<\/b> is already sorted, then the inversion index is 0.<br>If array <b>A<\/b> is sorted in reverse order, then inversion index is the maximum = <b>N*(N-1)\/2<\/b>.<\/p><br><p>Two elements <b>A[i]<\/b> and <b>A[j]<\/b> form an inversion if <b>A[i] &gt; A[j]<\/b> and <b>i &lt; j<\/b>.<\/p><br><p>We can compute Inversion Index of an array <b>A<\/b> in O(<b>N<\/b><sup>2<\/sup>) by simulating Bubble Sort swaps, or in O(<b>N<\/b> log <b>N<\/b>) by counting the Inversion during the <samp>merge<\/samp> part of Merge Sort.<\/p>","title":"Inversion Index\/Count"},{"id":563,"category":"sorting","order":3,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:18:40","updated_at":"2022-02-02 14:34:17","section":562,"code":"","section_order":19,"value":"19-3","text":"<p>Actually, the C++ source code for many of these basic sorting algorithms are already scattered throughout these e-Lecture slides. For other programming languages, you can translate the given C++ source code to the other programming language.<\/p><br><p>Usually, sorting is just a small part in problem solving process and nowadays, most of programming languages have their own sorting functions so we don&#39;t really have to re-code them <i>unless absolutely necessary<\/i>.<\/p><br><p>In C++, you can use <a href=\"http:\/\/en.cppreference.com\/w\/cpp\/algorithm\/sort\" target=\"_blank\"><u>std::sort<\/u><\/a> (most likely a hybrid sorting algorithm: Introsort), <a href=\"http:\/\/en.cppreference.com\/w\/cpp\/algorithm\/stable_sort\" target=\"_blank\"><u>std::stable_sort<\/u><\/a> (most likely Merge Sort), or <a href=\"http:\/\/en.cppreference.com\/w\/cpp\/algorithm\/partial_sort\" target=\"_blank\"><u>std::partial_sort<\/u><\/a> (most likely Binary Heap) in STL algorithm.<br>In Python, you can use&nbsp;<a href=\"https:\/\/docs.python.org\/3\/library\/stdtypes.html#list.sort\" target=\"_blank\"><u>sort<\/u><\/a>&nbsp;(most likely a hybrid sorting algorithm: Timsort).<br>In Java, you can use <a href=\"https:\/\/docs.oracle.com\/javase\/9\/docs\/api\/java\/util\/Collections.html#sort-java.util.List-\" target=\"_blank\"><u>Collections.sort<\/u><\/a>.<br>In OCaml, you can use <a href=\"https:\/\/caml.inria.fr\/pub\/docs\/manual-ocaml\/libref\/List.html\" target=\"_blank\"><u>List.sort compare list_name<\/u><\/a>.<br><\/p><br><p>If the comparison function is problem-specific, we may need to supply additional comparison function to those built-in sorting routines.<\/p>","title":"Implementation"},{"id":564,"category":"sorting","order":4,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:18:56","updated_at":"2022-01-14 14:11:34","section":562,"code":"","section_order":19,"value":"19-4","text":"<p>Now it is time for you to see if you have understand the basics of various sorting algorithms discussed so far.<\/p><br><p><span class=\"slide-actions\" onclick=\"doButtonAction17()\">Test your understanding here!<\/span><\/p>","title":"Online Quiz"},{"id":565,"category":"sorting","order":5,"top":"60px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-06-01 07:19:17","updated_at":"2018-02-01 12:53:13","section":562,"code":"","section_order":19,"value":"19-5","text":"<p>Now that you have reached the end of this e-Lecture, do you think sorting problem is just as simple as calling built-in sort routine?<\/p><br><p>Try these online judge problems to find out more:<br><a href=\"https:\/\/open.kattis.com\/problems\/mjehuric\" target=\"_blank\"><u>Kattis - mjehuric<\/u><\/a><br><a href=\"https:\/\/open.kattis.com\/problems\/sortofsorting\" target=\"_blank\"><u>Kattis - sortofsorting<\/u><\/a>, or<br><a href=\"https:\/\/open.kattis.com\/problems\/sidewayssorting\" target=\"_blank\"><u>Kattis - sidewayssorting<\/u><\/a><\/p><br><p>This is not the end of the topic of sorting. When you explore other topics in VisuAlgo, you will realise that sorting is a pre-processing step for many other advanced algorithms for harder problems, e.g. as the pre-processing step for <a href=\".\/mst\"><u>Kruskal&#39;s algorithm<\/u><\/a>, creatively used in <a href=\".\/suffixarray\"><u>Suffix Array<\/u><\/a> data structure, etc.<\/p>","title":"Online Judge Exercises"}];
      const numSlides = lectureIds.length;
      var sectorJunction12Section = 0, sectorJunction12Slide = 0;
      var sectorJunction23Section = 0, sectorJunction23Slide = 0;
      var sector1Count = 0, sector2Count = 0, sector3Count = 0;
      const sectorLength = Math.floor(numSlides / 3);
      function createELectureTimelineDisplay() {
        for (let j = 0; j < numSlides; ++j) {
          const currLecture = lectureIds[j].value;
          if (currLecture.includes('-')) {
            $('#e-lecture-timeline').append(
              $(`<div class="e-lecture-timeline-slide" slideNo=${lectureIds[j].value}></div>`)
            );
          } else {
            $('#e-lecture-timeline').append(
              $(`<div class="e-lecture-timeline-checkpoint" slideNo=${lectureIds[j].value}></div>`)
            );
          }
        }
      }

      function setSectorJunctionInfo() {
          //setting the sector junction slide numbers
          const j12 = sectorLength !== 0 ? (sectorLength - 1): 0;
          const j23 = sectorLength !== 0 ? (2 * sectorLength - 1) : 0;

          const sectorJunction12 = lectureIds[j12].value.split('-');
          sectorJunction12Section = parseInt(sectorJunction12[0]);
          sectorJunction12Slide = sectorJunction12.length > 1 ? parseInt(sectorJunction12[1]) : sectorJunction12Slide;

          const sectorJunction23 = lectureIds[j23].value.split('-');
          sectorJunction23Section = parseInt(sectorJunction23[0]);
          sectorJunction23Slide = sectorJunction23.length > 1 ? parseInt(sectorJunction23[1]) : sectorJunction23Slide;
      }

      function runSlide(slide) { // Steven's patch on 28 Jan 2022: Properly remove slide 99, 99-1, 99-2, 99-3, integrate with the earlier slides
        if (slide == '1') {
          $("#e-lecture").html("slide " + slide + " (" + 1 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.bubbleSort, "29,10,14,37,14");
        }
        if (slide == '1-1') {
          $("#e-lecture").html("slide " + slide + " (" + 2 + "%)");
          
        }
        if (slide == '1-2') {
          $("#e-lecture").html("slide " + slide + " (" + 3 + "%)");
          
        }
        if (slide == '1-3') {
          $("#e-lecture").html("slide " + slide + " (" + 4 + "%)");
          
        }
        if (slide == '2') {
          $("#e-lecture").html("slide " + slide + " (" + 6 + "%)");
          $("#create").click().addClass("menu-highlighted");
        }
        if (slide == '2-1') {
          $("#e-lecture").html("slide " + slide + " (" + 7 + "%)");
          $("#create").click().addClass("menu-highlighted");
        }
        if (slide == '2-2') {
          $("#e-lecture").html("slide " + slide + " (" + 8 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
        }
        if (slide == '3') {
          $("#e-lecture").html("slide " + slide + " (" + 9 + "%)");
          
        }
        if (slide == '4') {
          $("#e-lecture").html("slide " + slide + " (" + 10 + "%)");
          
        }
        if (slide == '4-1') {
          $("#e-lecture").html("slide " + slide + " (" + 12 + "%)");
          
        }
        if (slide == '5') {
          $("#e-lecture").html("slide " + slide + " (" + 13 + "%)");
          
        }
        if (slide == '6') {
          $("#e-lecture").html("slide " + slide + " (" + 14 + "%)");
          
        }
        if (slide == '6-1') {
          $("#e-lecture").html("slide " + slide + " (" + 15 + "%)");
          
        }
        if (slide == '6-2') {
          $("#e-lecture").html("slide " + slide + " (" + 16 + "%)");
          
        }
        if (slide == '6-3') {
          $("#e-lecture").html("slide " + slide + " (" + 18 + "%)");
          
        }
        if (slide == '6-4') {
          $("#e-lecture").html("slide " + slide + " (" + 19 + "%)");
          
        }
        if (slide == '6-5') {
          $("#e-lecture").html("slide " + slide + " (" + 20 + "%)");
          
        }
        if (slide == '6-6') {
          $("#e-lecture").html("slide " + slide + " (" + 21 + "%)");
          
        }
        if (slide == '6-7') {
          $("#e-lecture").html("slide " + slide + " (" + 22 + "%)");
          
        }
        if (slide == '6-8') {
          $("#e-lecture").html("slide " + slide + " (" + 24 + "%)");
          
        }
        if (slide == '6-9') {
          $("#e-lecture").html("slide " + slide + " (" + 25 + "%)");
          
        }
        if (slide == '6-10') {
          $("#e-lecture").html("slide " + slide + " (" + 26 + "%)");
          
        }
        if (slide == '6-11') {
          $("#e-lecture").html("slide " + slide + " (" + 27 + "%)");
          
        }
        if (slide == '7') {
          $("#e-lecture").html("slide " + slide + " (" + 28 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.bubbleSort, "29,10,14,37,14");
        }
        if (slide == '7-1') {
          $("#e-lecture").html("slide " + slide + " (" + 30 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.bubbleSort, "29,10,14,37,14");
        }
        if (slide == '7-2') {
          $("#e-lecture").html("slide " + slide + " (" + 31 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.bubbleSort, "3,6,11,25,39");
        }
        if (slide == '7-3') {
          $("#e-lecture").html("slide " + slide + " (" + 32 + "%)");
          $('#title-Bubble').click();
$("#sort").addClass("menu-highlighted");
        }
        if (slide == '8') {
          $("#e-lecture").html("slide " + slide + " (" + 33 + "%)");
          $('#title-Selection').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.selectionSort, "29,10,14,37,13");
        }
        if (slide == '8-1') {
          $("#e-lecture").html("slide " + slide + " (" + 34 + "%)");
          $('#title-Selection').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.selectionSort, "29,10,14,37,13");
        }
        if (slide == '8-2') {
          $("#e-lecture").html("slide " + slide + " (" + 36 + "%)");
          $('#title-Selection').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.selectionSort, "29,10,14,37,13");
        }
        if (slide == '9') {
          $("#e-lecture").html("slide " + slide + " (" + 37 + "%)");
          $('#title-Insertion').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.insertionSort, "40,13,20,8");
        }
        if (slide == '9-1') {
          $("#e-lecture").html("slide " + slide + " (" + 38 + "%)");
          $('#title-Insertion').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.insertionSort, "40,13,20,8");
        }
        if (slide == '9-2') {
          $("#e-lecture").html("slide " + slide + " (" + 39 + "%)");
          $('#title-Insertion').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.insertionSort, "40,13,20,8");
        }
        if (slide == '9-3') {
          $("#e-lecture").html("slide " + slide + " (" + 40 + "%)");
          $('#title-Insertion').click();
$("#sort").addClass("menu-highlighted");
changeSortType(gw.insertionSort, "40,13,20,8");
        }
        if (slide == '10') {
          $("#e-lecture").html("slide " + slide + " (" + 42 + "%)");
          
        }
        if (slide == '11') {
          $("#e-lecture").html("slide " + slide + " (" + 43 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-1') {
          $("#e-lecture").html("slide " + slide + " (" + 44 + "%)");
          $('#title-Merge').click();
changeSortType(gw.mergeSort, "1,5,19,20,2,11,15,17");
        }
        if (slide == '11-2') {
          $("#e-lecture").html("slide " + slide + " (" + 45 + "%)");
          $('#title-Merge').click();
changeSortType(gw.mergeSort, "1,5,19,20,2,11,15,17");
        }
        if (slide == '11-3') {
          $("#e-lecture").html("slide " + slide + " (" + 46 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-4') {
          $("#e-lecture").html("slide " + slide + " (" + 48 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-5') {
          $("#e-lecture").html("slide " + slide + " (" + 49 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-6') {
          $("#e-lecture").html("slide " + slide + " (" + 50 + "%)");
          $('#title-Merge').click();
changeSortType(gw.mergeSort, "7,2,6,3,8,4,5");
        }
        if (slide == '11-7') {
          $("#e-lecture").html("slide " + slide + " (" + 51 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-8') {
          $("#e-lecture").html("slide " + slide + " (" + 53 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-9') {
          $("#e-lecture").html("slide " + slide + " (" + 54 + "%)");
          $('#title-Merge').click();
        }
        if (slide == '11-10') {
          $("#e-lecture").html("slide " + slide + " (" + 55 + "%)");
          
        }
        if (slide == '11-11') {
          $("#e-lecture").html("slide " + slide + " (" + 56 + "%)");
          
        }
        if (slide == '12') {
          $("#e-lecture").html("slide " + slide + " (" + 57 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-1') {
          $("#e-lecture").html("slide " + slide + " (" + 59 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-2') {
          $("#e-lecture").html("slide " + slide + " (" + 60 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-3') {
          $("#e-lecture").html("slide " + slide + " (" + 61 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-4') {
          $("#e-lecture").html("slide " + slide + " (" + 62 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-5') {
          $("#e-lecture").html("slide " + slide + " (" + 63 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-6') {
          $("#e-lecture").html("slide " + slide + " (" + 65 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-7') {
          $("#e-lecture").html("slide " + slide + " (" + 66 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-8') {
          $("#e-lecture").html("slide " + slide + " (" + 67 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,27,16");
        }
        if (slide == '12-9') {
          $("#e-lecture").html("slide " + slide + " (" + 68 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "27,38,12,39,29,16");
        }
        if (slide == '12-10') {
          $("#e-lecture").html("slide " + slide + " (" + 69 + "%)");
          $('#title-Quick').click();
        }
        if (slide == '12-11') {
          $("#e-lecture").html("slide " + slide + " (" + 71 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "5,18,23,39,44,50");
        }
        if (slide == '12-12') {
          $("#e-lecture").html("slide " + slide + " (" + 72 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "5,18,23,39,44,50");
        }
        if (slide == '12-13') {
          $("#e-lecture").html("slide " + slide + " (" + 73 + "%)");
          $('#title-Quick').click();
changeSortType(gw.quickSort, "4,1,3,2,6,5,7");
        }
        if (slide == '13') {
          $("#e-lecture").html("slide " + slide + " (" + 74 + "%)");
          $('#title-RandomizedQuick').click();
changeSortType(gw.randomizedQuickSort, DEFAULT_DATA);
        }
        if (slide == '13-1') {
          $("#e-lecture").html("slide " + slide + " (" + 75 + "%)");
          
        }
        if (slide == '13-2') {
          $("#e-lecture").html("slide " + slide + " (" + 77 + "%)");
          
        }
        if (slide == '14') {
          $("#e-lecture").html("slide " + slide + " (" + 78 + "%)");
          $('#title-Counting').click();
        }
        if (slide == '14-1') {
          $("#e-lecture").html("slide " + slide + " (" + 79 + "%)");
          $('#title-Counting').click();
        }
        if (slide == '15') {
          $("#e-lecture").html("slide " + slide + " (" + 80 + "%)");
          $('#title-Counting').click();
        }
        if (slide == '16') {
          $("#e-lecture").html("slide " + slide + " (" + 81 + "%)");
          $('#title-Radix').click();
        }
        if (slide == '16-1') {
          $("#e-lecture").html("slide " + slide + " (" + 83 + "%)");
          $('#title-Radix').click();
        }
        if (slide == '16-2') {
          $("#e-lecture").html("slide " + slide + " (" + 84 + "%)");
          $('#title-Radix').click();
        }
        if (slide == '17') {
          $("#e-lecture").html("slide " + slide + " (" + 85 + "%)");
          
        }
        if (slide == '17-1') {
          $("#e-lecture").html("slide " + slide + " (" + 86 + "%)");
          
        }
        if (slide == '17-2') {
          $("#e-lecture").html("slide " + slide + " (" + 87 + "%)");
          
        }
        if (slide == '17-3') {
          $("#e-lecture").html("slide " + slide + " (" + 89 + "%)");
          
        }
        if (slide == '18') {
          $("#e-lecture").html("slide " + slide + " (" + 90 + "%)");
          
        }
        if (slide == '18-1') {
          $("#e-lecture").html("slide " + slide + " (" + 91 + "%)");
          
        }
        if (slide == '18-2') {
          $("#e-lecture").html("slide " + slide + " (" + 92 + "%)");
          
        }
        if (slide == '19') {
          $("#e-lecture").html("slide " + slide + " (" + 93 + "%)");
          
        }
        if (slide == '19-1') {
          $("#e-lecture").html("slide " + slide + " (" + 95 + "%)");
          
        }
        if (slide == '19-2') {
          $("#e-lecture").html("slide " + slide + " (" + 96 + "%)");
          
        }
        if (slide == '19-3') {
          $("#e-lecture").html("slide " + slide + " (" + 97 + "%)");
          
        }
        if (slide == '19-4') {
          $("#e-lecture").html("slide " + slide + " (" + 98 + "%)");
          
        }
        if (slide == '19-5') {
          $("#e-lecture").html("slide " + slide + " (" + 100 + "%)");
          
        }
        clearTimeout(currSlideTimer);
      }

      window.onpopstate = function(event) {
        var slide = event.state['slide'];
        openSlide(slide, function() {
          runSlide(slide);
        });
      };

      function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'), sParameterName, i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === sParam) return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      };
      var slideTimeline = {};

      //reads all visited slides in the slideTimeline and gives them their sector color
      function setVisitedSlideTimelineColors() {
        for(const [sectionNo, visitedSlides] of Object.entries(slideTimeline)) {
          const visitedSlides = slideTimeline[sectionNo];
          for(const visitedSlideNo of visitedSlides) {
            setSlideTimelineColor(visitedSlideNo);
          }
        }
      }

      //only called on load if there is nothing in session
      function setTimelineForCompletedSector(sectorNum) {
        let len = sectorLength;
        switch (sectorNum) {
          case 1 : len = sectorLength; break;
          case 2 : len = 2 * sectorLength; break;
          default: len = numSlides;
        }
        let i = 0;
        switch (sectorNum) {
          case 1 : i = 0; break;
          case 2 : i = sectorLength; break;
          default: i = 2 * sectorLength;
        }
        for (; i < len; i++) {
          saveELectureTimeline(lectureIds[i].value, true);
        }
      }

      function getUserSectorHistory(callback) {
        $.ajax({
          type: 'GET',
          url: "https://visualgo.net/section-info",
          data: {
            _token: "Igr1Q7wWkU6FYvLCkaEYAlKzTLWzJqbvb6rmFHPa",
            topic: "/sorting".substring(1)
          }
        }
        ).done(function (data) {
            if (data.data[0] === 1) {
              setF1SectorColor(1);
              setTimelineForCompletedSector(1);
            }
            if (data.data[1] === 1) {
              setF1SectorColor(2);
              setTimelineForCompletedSector(2);
            }
            if (data.data[2] === 1) {
              setF1SectorColor(3);
              setTimelineForCompletedSector(3);
            }
            callback();
        }).fail(function (data) {
            console.log('get user sector history failed!');
        });
      }

      function getELectureTimelineFromSession() {
        const page = "/sorting".substring(1);
        const timelineKey = page + '-slide-timeline';
        const storedTimeline = window.sessionStorage.getItem(timelineKey);
        if (storedTimeline) {
          slideTimeline = JSON.parse(storedTimeline);
        } else {
          return false;
        }
        let slideInfo = [];
        for (const [sectionNum, slides] of Object.entries(slideTimeline)) {
          for (const slide of slides) {
            indicateSlideCompletedUI(slide);
            slideInfo = slide.split('-');
            incrementSectorVisits(parseInt(sectionNum), slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0);
          }
        }
        return true;
      }

      async function initializeELectureTimeline() {
        setSectorJunctionInfo();
        if (!getELectureTimelineFromSession())
          getUserSectorHistory(sectorBasedModeSelection);
        else
          sectorBasedModeSelection();

        createELectureTimelineDisplay();
        setVisitedSlideTimelineColors();
      }

      function setF1SectorColor(sectorNum) {
        $(`[sectorNo="${sectorNum}"]`).css('background', sectorColors[(parseInt(sectorNum) % 3)]);
      }

      function updateSectorInDB(sectorNum) {
        $.ajax({
          type: 'POST',
          url: "https://visualgo.net/section-info",
          data: {
            _token: "Igr1Q7wWkU6FYvLCkaEYAlKzTLWzJqbvb6rmFHPa",
            section: (sectorNum - 1),
            topic: "/sorting".substring(1)
          }
        }
        ).done(function (data) {
            //console.log("Saved the sector " + sectorNum + " as done " + JSON.stringify(data));
        }).fail(function (data) {
            console.log("Setting sector done failed new attempt! "+ JSON.stringify(data));
        });
      }

      //If 87.5% or more of the slides in sector are done
      function setF1SectorCompleted(sectorNum, isInitializationCall) {
        setF1SectorColor(sectorNum);
        //avoid api call on initialization
        if (!isInitializationCall) {
          updateSectorInDB(sectorNum);
          $(`[sectorNo="${sectorNum}"]`).css("animation", "green-pulse 2s 4");
          setTimeout(() => {
            $(`[sectorNo="${sectorNum}"]`).css("animation", "");
          }, 8000);
        }
      }

      function incrementSectorVisits(sectionNum, slideNumWithinSection, isInitializationCall) {
        //updating sector count
        if (sectionNum < sectorJunction12Section
          || (sectionNum === sectorJunction12Section && slideNumWithinSection <= sectorJunction12Slide)) {
          ++sector1Count;
          if (sector1Count >= Math.ceil(0.875 * sectorLength))
            setF1SectorCompleted(1, isInitializationCall);
        } else if (sectionNum < sectorJunction23Section
          || (sectionNum === sectorJunction23Section && slideNumWithinSection <= sectorJunction23Slide)) {
          ++sector2Count;
          if (sector2Count >= Math.ceil(0.875 * sectorLength))
            setF1SectorCompleted(2, isInitializationCall);
        } else {
          ++sector3Count;
          if (sector3Count >= Math.ceil(0.875 * (numSlides - 2 * sectorLength)))
            setF1SectorCompleted(3, isInitializationCall);
        }
      }

      function saveELectureTimeline(slideNo, isInitialization) {
        const slideInfo = slideNo.split('-');
        const sectionNo = slideInfo[0];
        const slideNumWithinSection = slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0;
        if (slideTimeline[sectionNo]) {
          if (!slideTimeline[sectionNo].includes(slideNo)) {
            slideTimeline[sectionNo].push(slideNo);
            const sectionNum = parseInt(sectionNo);
            incrementSectorVisits(sectionNum, slideNumWithinSection, isInitialization);
          }
        } else {
          slideTimeline[sectionNo] = [];
          slideTimeline[sectionNo].push(slideNo);
          const sectionNum = parseInt(sectionNo);
          incrementSectorVisits(sectionNum, slideNumWithinSection, isInitialization);
        }
        setSlideTimelineColor(slideNo);
        indicateSlideCompletedUI(slideNo);
      }

      function saveELectureTimelineToSession() {
        const page = "/sorting".substring(1);
        const timelineKey = page + '-slide-timeline';
        window.sessionStorage.setItem(timelineKey, JSON.stringify(slideTimeline));
      }

      function handleTimelineOnRunSlide(slideValue) {
        const slideInfo = slideValue.split('-');
        const sectionNo = slideInfo[0];
        const slideNumWithinSection = slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0;
        //start timer only if the slide isnt already done
        if (!slideTimeline[sectionNo] || !slideTimeline[sectionNo].includes(slideValue)) {
          const slideTextLength = $('#electure-'+slideValue + " p").text().length + $('#electure-'+slideValue + " li").text().length;
          const CHARS_READ_PER_MS = 0.05; //when fast, 50 characters a second
          //setting max reading time as 10 seconds for around 500 character slide
          const minSlideReadingTime = Math.min(Math.max(2000, (slideTextLength / CHARS_READ_PER_MS) +  + (2000 * $('#electure-'+slideValue + " img").length)), 10000);
          currSlideTimer = setTimeout(() => {
            saveELectureTimeline(slideValue);
          }, minSlideReadingTime);
        }
      }

      function indicateSlideCompletedUI(slide) {
        $('#electure-'+slide).css("box-shadow", "3px 3px 8px green"); //set green shadow for completed slides
        $('#electure-'+slide + ' .electure-read-status').html("&#10004;");
        $('#electure-'+slide + ' .electure-read-status').attr("title", "Slide Completed!");
        $('#electure-'+slide + ' .electure-read-status').css("font-size", "17px");
      }

      function pushState(slideValue) {
        var url = '/en/sorting';
        if (typeof slideValue != 'undefined' && slideValue != null) {
          url += '?slide=' + slideValue;
                  }
        window.history.pushState({slide: slideValue}, "slide " + slideValue, url);
      }

      function showPopup(callback) {
        $('#popup').fadeIn(100, callback);
      }

      function hidePopup(callback) {
        $('#popup').fadeOut(100, callback);
      }

      function showOverlay() {
        $('#overlay').css('opacity', 0.5);
        $('#overlay').show();

        $("#e-lecture-timeline").show();
        $("#e-lecture-f1map").show();
      }

      function hideOverlay() {
        $('#overlay').hide();
        $("#e-lecture").html("");
        $("#e-lecture-timeline").hide();
        $("#e-lecture-f1map").hide();
        clearTimeout(currSlideTimer);
      }

      function makeOverlayTransparent() {
        $('#overlay').css('opacity', 0);
      }

      function hideSlide(callback) {
        isPlaying = true;
        closeSlide(cur_slide, function() {
          makeOverlayTransparent();
          setTimeout(callback, 700); // don't immediately run the animation, wait for 500ms+ first
        });
      }

      function showSlide() {
        isPlaying = false;
        openSlide(cur_slide);
        showOverlay();
      }

      function sectorBasedModeSelection() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        //check params are empty and then that all sectors are completed or not
        if (!Object.keys(params).length
          && sector1Count === sectorLength && sector2Count === sectorLength && sector3Count === (numSlides - 2 * sectorLength)) {
            hideOverlay();
        }
        else
          $('#mode-menu a').click();
      }

      $(function() {
        if (isMobileOS() && portraitMatcher.matches) {
          $('#rotateDeviceOverlay').show();
          $('#rotateDeviceText').show();
          $('#widenDeviceText').hide();
          $('#topbar').css("z-index", 10001);
        } else if (matchMediaNarrow.matches) {
          $('#rotateDeviceOverlay').show();
          $('#rotateDeviceText').hide();
          $('#widenDeviceText').show();
          $('#topbar').css("z-index", 10001);
        } else {
          $('#rotateDeviceOverlay').hide();
          $('#topbar').css("z-index", "");
        }

        matchMediaNarrow.addEventListener('change', e => {
          //screws up for square device! NEED RESIZE EVENT
          if (e.matches) {
            if ($('#rotateDeviceOverlay').is(":hidden")) {
              $('#rotateDeviceOverlay').show();
              $('#rotateDeviceText').hide();
              $('#widenDeviceText').show();
              $('#topbar').css("z-index", 10001);
            }
          } else {
            $('#rotateDeviceOverlay').hide();
            $('#topbar').css("z-index", "");
          }
        });
        portraitMatcher.addEventListener('change', e => {
          if (e.matches && isMobileOS()) {
            if ($('#rotateDeviceOverlay').is(":hidden")) {
              $('#rotateDeviceOverlay').show();
              $('#rotateDeviceText').show();
              $('#widenDeviceText').hide();
              $('#topbar').css("z-index", 10001);
            }
          } else {
            $('#rotateDeviceOverlay').hide();
            $('#topbar').css("z-index", "");
          }
        });
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        let slide = getUrlParameter('slide');
        if (typeof slide !== undefined && slide != null) {
          cur_slide = slide;
        }
        //do all timeline and slide stuff only if specific params not provided
        if (!Object.keys(params).length || params["slide"]) {
          if (!isMobile()) {
                            $('#mode-menu a').click();
                      }
        }
        $('.mcq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#mcq-answer-' + questionId).val();
          var userAnswer = $('input[type=radio][name=mcq-'+questionId+'-choice]:checked').val();

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green"><b>Correct!</b></font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red"><b>Wrong Answer! Try again...</b></font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('.msq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#msq-answer-' + questionId).val();

          var answers = [];
          $('input[type=checkbox][class=msq-choice]:checked').each(function() {
            answers.push($(this).attr('id').split('-')[3]);
          });
          answers.sort();
          var userAnswer = answers.join(',');

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green">Correct!</font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red">Wrong Answer! Try again...</font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('select.lecture-dropdown').change(function() {
          var nextSlide = $(this).val();
          openSlide(nextSlide, function() {
            runSlide(nextSlide);
            pushState(nextSlide);
          });
        });

        $('#hide-popup').click(function() {
          hidePopup();
        });

        $('#popup').hover(function() {
          $('#hide-popup').show();
        }, function() {
          $('#hide-popup').hide();
        });

        $('#electure-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
        $('#electure-1-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
        $('#electure-1-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('1');
          pushState('1');
        });
        $('#electure-1-2 .electure-next').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
        $('#electure-1-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
        $('#electure-1-3 .electure-next').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-1-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
        $('#electure-2 .electure-next').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
        $('#electure-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
        $('#electure-2-1 .electure-next').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
        $('#electure-2-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-2-2 .electure-next').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-2-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
        $('#electure-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
        $('#electure-4 .electure-next').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
        $('#electure-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-4-1 .electure-next').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-4-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-5 .electure-next').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
        $('#electure-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-6-1 .electure-next').click(function() {
          hidePopup();
          runSlide('6-2');
          pushState('6-2');
        });
        $('#electure-6-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-6-2 .electure-next').click(function() {
          hidePopup();
          runSlide('6-3');
          pushState('6-3');
        });
        $('#electure-6-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-6-3 .electure-next').click(function() {
          hidePopup();
          runSlide('6-4');
          pushState('6-4');
        });
        $('#electure-6-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-2');
          pushState('6-2');
        });
        $('#electure-6-4 .electure-next').click(function() {
          hidePopup();
          runSlide('6-5');
          pushState('6-5');
        });
        $('#electure-6-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-3');
          pushState('6-3');
        });
        $('#electure-6-5 .electure-next').click(function() {
          hidePopup();
          runSlide('6-6');
          pushState('6-6');
        });
        $('#electure-6-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-4');
          pushState('6-4');
        });
        $('#electure-6-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-7');
          pushState('6-7');
        });
        $('#electure-6-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-5');
          pushState('6-5');
        });
        $('#electure-6-7 .electure-next').click(function() {
          hidePopup();
          runSlide('6-8');
          pushState('6-8');
        });
        $('#electure-6-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-6');
          pushState('6-6');
        });
        $('#electure-6-8 .electure-next').click(function() {
          hidePopup();
          runSlide('6-9');
          pushState('6-9');
        });
        $('#electure-6-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-7');
          pushState('6-7');
        });
        $('#electure-6-9 .electure-next').click(function() {
          hidePopup();
          runSlide('6-10');
          pushState('6-10');
        });
        $('#electure-6-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-8');
          pushState('6-8');
        });
        $('#electure-6-10 .electure-next').click(function() {
          hidePopup();
          runSlide('6-11');
          pushState('6-11');
        });
        $('#electure-6-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-9');
          pushState('6-9');
        });
        $('#electure-6-11 .electure-next').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-6-11 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-10');
          pushState('6-10');
        });
        $('#electure-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-11');
          pushState('6-11');
        });
        $('#electure-7-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-7-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-7-2 .electure-next').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-7-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7-3 .electure-next').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
        $('#electure-7-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-8 .electure-next').click(function() {
          hidePopup();
          runSlide('8-1');
          pushState('8-1');
        });
        $('#electure-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-8-1 .electure-next').click(function() {
          hidePopup();
          runSlide('8-2');
          pushState('8-2');
        });
        $('#electure-8-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
        $('#electure-8-2 .electure-next').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
        $('#electure-8-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-1');
          pushState('8-1');
        });
        $('#electure-9 .electure-next').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
        $('#electure-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('8-2');
          pushState('8-2');
        });
        $('#electure-9-1 .electure-next').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
        $('#electure-9-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
        $('#electure-9-2 .electure-next').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
        $('#electure-9-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
        $('#electure-9-3 .electure-next').click(function() {
          hidePopup();
          runSlide('10');
          pushState('10');
        });
        $('#electure-9-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
        $('#electure-10 .electure-next').click(function() {
          hidePopup();
          runSlide('11');
          pushState('11');
        });
        $('#electure-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
        $('#electure-11 .electure-next').click(function() {
          hidePopup();
          runSlide('11-1');
          pushState('11-1');
        });
        $('#electure-11 .electure-prev').click(function() {
          hidePopup();
          runSlide('10');
          pushState('10');
        });
        $('#electure-11-1 .electure-next').click(function() {
          hidePopup();
          runSlide('11-2');
          pushState('11-2');
        });
        $('#electure-11-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('11');
          pushState('11');
        });
        $('#electure-11-2 .electure-next').click(function() {
          hidePopup();
          runSlide('11-3');
          pushState('11-3');
        });
        $('#electure-11-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-1');
          pushState('11-1');
        });
        $('#electure-11-3 .electure-next').click(function() {
          hidePopup();
          runSlide('11-4');
          pushState('11-4');
        });
        $('#electure-11-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-2');
          pushState('11-2');
        });
        $('#electure-11-4 .electure-next').click(function() {
          hidePopup();
          runSlide('11-5');
          pushState('11-5');
        });
        $('#electure-11-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-3');
          pushState('11-3');
        });
        $('#electure-11-5 .electure-next').click(function() {
          hidePopup();
          runSlide('11-6');
          pushState('11-6');
        });
        $('#electure-11-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-4');
          pushState('11-4');
        });
        $('#electure-11-6 .electure-next').click(function() {
          hidePopup();
          runSlide('11-7');
          pushState('11-7');
        });
        $('#electure-11-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-5');
          pushState('11-5');
        });
        $('#electure-11-7 .electure-next').click(function() {
          hidePopup();
          runSlide('11-8');
          pushState('11-8');
        });
        $('#electure-11-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-6');
          pushState('11-6');
        });
        $('#electure-11-8 .electure-next').click(function() {
          hidePopup();
          runSlide('11-9');
          pushState('11-9');
        });
        $('#electure-11-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-7');
          pushState('11-7');
        });
        $('#electure-11-9 .electure-next').click(function() {
          hidePopup();
          runSlide('11-10');
          pushState('11-10');
        });
        $('#electure-11-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-8');
          pushState('11-8');
        });
        $('#electure-11-10 .electure-next').click(function() {
          hidePopup();
          runSlide('11-11');
          pushState('11-11');
        });
        $('#electure-11-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-9');
          pushState('11-9');
        });
        $('#electure-11-11 .electure-next').click(function() {
          hidePopup();
          runSlide('12');
          pushState('12');
        });
        $('#electure-11-11 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-10');
          pushState('11-10');
        });
        $('#electure-12 .electure-next').click(function() {
          hidePopup();
          runSlide('12-1');
          pushState('12-1');
        });
        $('#electure-12 .electure-prev').click(function() {
          hidePopup();
          runSlide('11-11');
          pushState('11-11');
        });
        $('#electure-12-1 .electure-next').click(function() {
          hidePopup();
          runSlide('12-2');
          pushState('12-2');
        });
        $('#electure-12-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('12');
          pushState('12');
        });
        $('#electure-12-2 .electure-next').click(function() {
          hidePopup();
          runSlide('12-3');
          pushState('12-3');
        });
        $('#electure-12-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-1');
          pushState('12-1');
        });
        $('#electure-12-3 .electure-next').click(function() {
          hidePopup();
          runSlide('12-4');
          pushState('12-4');
        });
        $('#electure-12-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-2');
          pushState('12-2');
        });
        $('#electure-12-4 .electure-next').click(function() {
          hidePopup();
          runSlide('12-5');
          pushState('12-5');
        });
        $('#electure-12-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-3');
          pushState('12-3');
        });
        $('#electure-12-5 .electure-next').click(function() {
          hidePopup();
          runSlide('12-6');
          pushState('12-6');
        });
        $('#electure-12-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-4');
          pushState('12-4');
        });
        $('#electure-12-6 .electure-next').click(function() {
          hidePopup();
          runSlide('12-7');
          pushState('12-7');
        });
        $('#electure-12-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-5');
          pushState('12-5');
        });
        $('#electure-12-7 .electure-next').click(function() {
          hidePopup();
          runSlide('12-8');
          pushState('12-8');
        });
        $('#electure-12-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-6');
          pushState('12-6');
        });
        $('#electure-12-8 .electure-next').click(function() {
          hidePopup();
          runSlide('12-9');
          pushState('12-9');
        });
        $('#electure-12-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-7');
          pushState('12-7');
        });
        $('#electure-12-9 .electure-next').click(function() {
          hidePopup();
          runSlide('12-10');
          pushState('12-10');
        });
        $('#electure-12-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-8');
          pushState('12-8');
        });
        $('#electure-12-10 .electure-next').click(function() {
          hidePopup();
          runSlide('12-11');
          pushState('12-11');
        });
        $('#electure-12-10 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-9');
          pushState('12-9');
        });
        $('#electure-12-11 .electure-next').click(function() {
          hidePopup();
          runSlide('12-12');
          pushState('12-12');
        });
        $('#electure-12-11 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-10');
          pushState('12-10');
        });
        $('#electure-12-12 .electure-next').click(function() {
          hidePopup();
          runSlide('12-13');
          pushState('12-13');
        });
        $('#electure-12-12 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-11');
          pushState('12-11');
        });
        $('#electure-12-13 .electure-next').click(function() {
          hidePopup();
          runSlide('13');
          pushState('13');
        });
        $('#electure-12-13 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-12');
          pushState('12-12');
        });
        $('#electure-13 .electure-next').click(function() {
          hidePopup();
          runSlide('13-1');
          pushState('13-1');
        });
        $('#electure-13 .electure-prev').click(function() {
          hidePopup();
          runSlide('12-13');
          pushState('12-13');
        });
        $('#electure-13-1 .electure-next').click(function() {
          hidePopup();
          runSlide('13-2');
          pushState('13-2');
        });
        $('#electure-13-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('13');
          pushState('13');
        });
        $('#electure-13-2 .electure-next').click(function() {
          hidePopup();
          runSlide('14');
          pushState('14');
        });
        $('#electure-13-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('13-1');
          pushState('13-1');
        });
        $('#electure-14 .electure-next').click(function() {
          hidePopup();
          runSlide('14-1');
          pushState('14-1');
        });
        $('#electure-14 .electure-prev').click(function() {
          hidePopup();
          runSlide('13-2');
          pushState('13-2');
        });
        $('#electure-14-1 .electure-next').click(function() {
          hidePopup();
          runSlide('15');
          pushState('15');
        });
        $('#electure-14-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('14');
          pushState('14');
        });
        $('#electure-15 .electure-next').click(function() {
          hidePopup();
          runSlide('16');
          pushState('16');
        });
        $('#electure-15 .electure-prev').click(function() {
          hidePopup();
          runSlide('14-1');
          pushState('14-1');
        });
        $('#electure-16 .electure-next').click(function() {
          hidePopup();
          runSlide('16-1');
          pushState('16-1');
        });
        $('#electure-16 .electure-prev').click(function() {
          hidePopup();
          runSlide('15');
          pushState('15');
        });
        $('#electure-16-1 .electure-next').click(function() {
          hidePopup();
          runSlide('16-2');
          pushState('16-2');
        });
        $('#electure-16-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('16');
          pushState('16');
        });
        $('#electure-16-2 .electure-next').click(function() {
          hidePopup();
          runSlide('17');
          pushState('17');
        });
        $('#electure-16-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('16-1');
          pushState('16-1');
        });
        $('#electure-17 .electure-next').click(function() {
          hidePopup();
          runSlide('17-1');
          pushState('17-1');
        });
        $('#electure-17 .electure-prev').click(function() {
          hidePopup();
          runSlide('16-2');
          pushState('16-2');
        });
        $('#electure-17-1 .electure-next').click(function() {
          hidePopup();
          runSlide('17-2');
          pushState('17-2');
        });
        $('#electure-17-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('17');
          pushState('17');
        });
        $('#electure-17-2 .electure-next').click(function() {
          hidePopup();
          runSlide('17-3');
          pushState('17-3');
        });
        $('#electure-17-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('17-1');
          pushState('17-1');
        });
        $('#electure-17-3 .electure-next').click(function() {
          hidePopup();
          runSlide('18');
          pushState('18');
        });
        $('#electure-17-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('17-2');
          pushState('17-2');
        });
        $('#electure-18 .electure-next').click(function() {
          hidePopup();
          runSlide('18-1');
          pushState('18-1');
        });
        $('#electure-18 .electure-prev').click(function() {
          hidePopup();
          runSlide('17-3');
          pushState('17-3');
        });
        $('#electure-18-1 .electure-next').click(function() {
          hidePopup();
          runSlide('18-2');
          pushState('18-2');
        });
        $('#electure-18-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('18');
          pushState('18');
        });
        $('#electure-18-2 .electure-next').click(function() {
          hidePopup();
          runSlide('19');
          pushState('19');
        });
        $('#electure-18-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('18-1');
          pushState('18-1');
        });
        $('#electure-19 .electure-next').click(function() {
          hidePopup();
          runSlide('19-1');
          pushState('19-1');
        });
        $('#electure-19 .electure-prev').click(function() {
          hidePopup();
          runSlide('18-2');
          pushState('18-2');
        });
        $('#electure-19-1 .electure-next').click(function() {
          hidePopup();
          runSlide('19-2');
          pushState('19-2');
        });
        $('#electure-19-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('19');
          pushState('19');
        });
        $('#electure-19-2 .electure-next').click(function() {
          hidePopup();
          runSlide('19-3');
          pushState('19-3');
        });
        $('#electure-19-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('19-1');
          pushState('19-1');
        });
        $('#electure-19-3 .electure-next').click(function() {
          hidePopup();
          runSlide('19-4');
          pushState('19-4');
        });
        $('#electure-19-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('19-2');
          pushState('19-2');
        });
        $('#electure-19-4 .electure-next').click(function() {
          hidePopup();
          runSlide('19-5');
          pushState('19-5');
        });
        $('#electure-19-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('19-3');
          pushState('19-3');
        });
        $('#electure-19-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('19-4');
          pushState('19-4');
        });
      });

      function doButtonAction7() {
        POPUP_IMAGE('https://open.kattis.com/images/site-logo');
      }
      function doButtonAction8() {
        SORT();
      }
      function doButtonAction10() {
        SORT();
      }
      function doButtonAction11() {
        SORT();
      }
      function doButtonAction12() {
        SORT();
      }
      function doButtonAction13() {
        SORT();
      }
      function doButtonAction14() {
        SORT();
      }
      function doButtonAction15() {
        SORT();
      }
      function doButtonAction16() {
        SORT();
      }
      function doButtonAction17() {
        URL('../training?diff=Medium&n=7&tl=0&module=sorting');
      }
      function doButtonAction18() {
        POPUP_IMAGE('https://pbs.twimg.com/profile_images/2618373647/image.jpg');
      }
      function doButtonAction19() {
        URL('../login');
      }
      function doButtonAction20() {
        POPUP_IMAGE('https://puu.sh/vfi6a/e532309371.png');
      }
      function doButtonAction33() {
        changeSortType(gw.bubbleSort, "7,6,5,4,3,2,1");
SORT();
      }
      function doButtonAction95() {
        // add your code here
      }

      $('.electure-print').click(() => {
        window.open(`/en/sorting/print`);
      });
      function adjustPopupToImageSize() {
        var width = $('#popup-image').prop('width');
        var height = $('#popup-image').prop('height');
        $('#popup').width(width + 20);
        $('#popup').height(height + 20);
        if (width == 0 && height == 0) {
          setTimeout(adjustPopupToImageSize, 200);
        } else {
          showPopup();
        }
      }

      function POPUP_IMAGE(url) {
        $('#popup-content').html('<img id="popup-image" src="' + url + '">');
        adjustPopupToImageSize();
      }

      function URL(url) {
        window.open(url, '_blank');
      }

      // Implement these functions in each visualisation
      // This function will be called before entering e-Lecture Mode
      function ENTER_LECTURE_MODE() {}

      // This function will be called before returning to Explore Mode
      function ENTER_EXPLORE_MODE() {}

      // Lecture action functions
      function CUSTOM_ACTION(action, data, mode) {}

      $(document).ready(function () {
        setTimeout(function () {
          $('#change-lang-popup').fadeOut('slow')
        }, 5000)
      })
    </script>
<script type="text/javascript">
    var extraCSS = {"sort":"65px","create":"92px"};
    var actionsIds = {"create":{"p":"Create(A)","parents":["create-sorted","create-nearly-sorted","create-many-duplicates"]},"sort":{"p":"Sort","onClick":"sort()"}};
    var isOpens = {};
    var len = 2;
    var keys = ["create","sort"]; 
    for (i = 0; i < len; i++) {
        var actionDetails = keys[i];
        isOpens[actionDetails] = false;
    }
    function openAction(id) {
        hideThirdTiers(id);
        $("." + id).css("bottom", extraCSS[id]);
        if (!isOpens[id]) {
            $('.' + id).fadeIn('fast');
            isOpens[id] = true;
        }
    }
    function closeAction(id) {
        hideThirdTiers(id);
        if (isOpens[id]) {
            $('.' + id).fadeOut('fast');
            $('#' + id + '-err').html("");
            isOpens[id] = false;
        }
    }

    function hideEntireActionsPanel() {
        //hideAllThirdTiers();
                    closeAction('create');
                    closeAction('sort');
                hideActionsPanel();
    }

    function hideThirdTiers(tier1Action) {
        if ("parents" in actionsIds[tier1Action]) {
            for (const secondTierAction of actionsIds[tier1Action]["parents"]) {
                $('#' + secondTierAction + '-third-tier').fadeOut('fast');
            }
        }
    }

    function hideAllThirdTiers() {
        for (const tier1Action in actionsIds) {
            hideThirdTiers(tier1Action);
        }
    }

    function toggleChildExtras(tier1, selectedParentTier2) {
        hideThirdTiers(tier1);
        //this actionId must have childExtras
        var style = extraCSS[tier1];
        $("." + tier1).css("bottom", (parseInt(style.substring(0, style.length - 2)) - 27));
        //fade ins and outs are done on the ID whereas css class is set on the class
        //fade in the third tier of the selected 2nd tier parent
        $('#' + selectedParentTier2 + '-third-tier').fadeIn('fast');

        // //fade out all other third tiers of that 'action'
        // for (const parent of actions[tier1]["parents"]) {
        //     console.log("parent is " + parent + " for " + selectedParentTier2);
        //     if (parent != selectedParentTier2) {
        //         $('#' + parent + '-third-tier').fadeOut('fast');
        //     }
        // }
    }

    function setActionHeightOriginal(tier1Action) {
        $("." + tier1Action).css("bottom", extraCSS[tier1Action]);
    }

            $('#' + 'create').click(function() {
            openAction('create');
                                                                            closeAction('sort');
                                    });
            $('#' + 'sort').click(function() {
            openAction('sort');
                                                closeAction('create');
                                                                });
    
    //important to have all the input fields in actions menu take an id containing '-input'
    $("[id*='-input']").on("keypress keydown keyup", (event) => {
        event.stopPropagation();
    });
</script>
<script type="text/javascript">
// Sorting Widget
// original author: Ian Leow Tze Wei
// taken over by Steven on Sat 25 Dec 2021 Christmas day to fix randomize Quick Sort on (many) duplicates

var Sorting = function() {
  var computeInversionIndex = true; // Quick hack on 26 Dec 2021, it will be true from now onwards for Bubble and Merge sort...

  // constants
  var HIGHLIGHT_NONE = "lightblue";
  var HIGHLIGHT_STANDARD = "green";
  var HIGHLIGHT_SPECIAL = "#DC143C";
  var HIGHLIGHT_SORTED = "orange";

  var HIGHLIGHT_LEFT = "#3CB371";
  var HIGHLIGHT_RIGHT = "#9932CC";
  var HIGHLIGHT_PIVOT = "yellow";

  var HIGHLIGHT_GRAY = "#CCCCCC";

  var HIGHLIGHT_RAINBOW = [
    "#FF0000",
    "#FF4000",
    "#FF8000",
    "#FFBF00",
    "#FFFF00",
    "#BFFF00",
    "#80FF00",
    "#40FF00",
    //"#00FF00",
    "#00FF40",
    "#00FF80",
    "#00FFBF",
    "#00FFFF",
    "#00BFFF",
    "#0080FF",
    "#0040FF",
    "#0000FF",
    "#4000FF",
    "#8000FF",
    "#BF00FF",
    "#FF00FF"
  ];

  var HIGHLIGHT_BLUESHADES = [
    HIGHLIGHT_GRAY,
    HIGHLIGHT_NONE,
    "#9DC4E8",
    "#8EB1EB",
    "#7E9DED",
    "#6E89EF",
    "#5E76F1",
    "#4F62F4",
    "#3F4FF6",
    "#2F3BF8",
    "#1F27FA",
    "#1014FD",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF",
    "#0000FF"
  ];

  var POSITION_USE_PRIMARY = "a";
  var POSITION_USE_SECONDARY_IN_DEFAULT_POSITION = "b";

  // Objects definition
  var Entry = function(value, highlight, position, secondaryPositionStatus) {
    this.value = value; // number
    this.highlight = highlight; // string, use HIGHLIGHT_ constants
    this.position = position; // number
    this.secondaryPositionStatus = secondaryPositionStatus; // integer, +ve for position overwrite, -ve for absolute postion (-1 for 0th absolution position)
  }

  var Backlink = function(value, highlight, entryPosition, secondaryPositionStatus) {
    this.value = value; // number
    this.highlight = highlight; // string, use HIGHLIGHT_ constants
    this.entryPosition = entryPosition; // number
    this.secondaryPositionStatus = secondaryPositionStatus; // integer, +ve for position overwrite
  }

  var State = function(entries, backlinks, barsCountOffset, status, lineNo) {
    this.entries = entries; // array of Entry's
    this.backlinks = backlinks; // array of Backlink's
    this.barsCountOffset = barsCountOffset; // how many bars to "disregard" (+ve) or to "imagine" (-ve) w.r.t. state.entries.length when calculating the centre position
    this.status = status;
    this.lineNo = lineNo; //integer or array, line of the code to highlight
  }

  //Helpers
  var EntryBacklinkHelper = new Object();
  EntryBacklinkHelper.appendList = function(entries, backlinks, numArray) {
    for (var i = 0; i < numArray.length; ++i) {
      EntryBacklinkHelper.append(entries, backlinks, numArray[i]);
    }
  }

  EntryBacklinkHelper.append = function(entries, backlinks, newNumber) {
    entries.push(new Entry(newNumber, HIGHLIGHT_NONE, entries.length, POSITION_USE_PRIMARY));
    backlinks.push(new Backlink(newNumber, HIGHLIGHT_NONE, backlinks.length, POSITION_USE_PRIMARY));
  }

  EntryBacklinkHelper.update = function(entries, backlinks) {
    for (var i = 0; i < backlinks.length; ++i) {
      entries[backlinks[i].entryPosition].highlight = backlinks[i].highlight;
      entries[backlinks[i].entryPosition].position = i;
      entries[backlinks[i].entryPosition].secondaryPositionStatus = backlinks[i].secondaryPositionStatus;
    }
  }

  EntryBacklinkHelper.copyEntry = function(oldEntry) {
    return new Entry(oldEntry.value, oldEntry.highlight, oldEntry.position, oldEntry.secondaryPositionStatus);
  }

  EntryBacklinkHelper.copyBacklink = function(oldBacklink) {
    return new Backlink(oldBacklink.value, oldBacklink.highlight, oldBacklink.entryPosition, oldBacklink.secondaryPositionStatus);
  }

  EntryBacklinkHelper.swapBacklinks = function(backlinks, i, j) {
    var swaptemp = backlinks[i];
    backlinks[i] = backlinks[j];
    backlinks[j] = swaptemp;
  }

  var StateHelper = new Object();
  StateHelper.createNewState = function(numArray) {
    var entries = new Array();
    var backlinks = new Array();
    EntryBacklinkHelper.appendList(entries, backlinks, numArray);
    return new State(entries, backlinks, 0, "", 0);
  }

  StateHelper.copyState = function(oldState) {
    var newEntries = new Array();
    var newBacklinks = new Array();
    for (var i = 0; i < oldState.backlinks.length; ++i) {
      newEntries.push(EntryBacklinkHelper.copyEntry(oldState.entries[i]));
      newBacklinks.push(EntryBacklinkHelper.copyBacklink(oldState.backlinks[i]));
    }

    var newLineNo = oldState.lineNo;
    if (newLineNo instanceof Array)
      newLineNo = oldState.lineNo.slice();

    return new State(newEntries, newBacklinks, oldState.barsCountOffset, oldState.status, newLineNo);
  }

  StateHelper.updateCopyPush = function(list, stateToPush) {
    EntryBacklinkHelper.update(stateToPush.entries, stateToPush.backlinks);
    list.push(StateHelper.copyState(stateToPush));
  }

  var FunctionList = new Object();
  FunctionList.text_y = function(d) {
    var barHeight = scaler(d.value);
    if (barHeight < 32) return -15;
    return barHeight-15;
  }

  FunctionList.g_transform = function(d) {
    if (d.secondaryPositionStatus == POSITION_USE_PRIMARY)
      return 'translate(' + (centreBarsOffset + d.position * barWidth) + ", " + (maxHeight - scaler(d.value)) + ')';
    else if (d.secondaryPositionStatus == POSITION_USE_SECONDARY_IN_DEFAULT_POSITION)
      return 'translate(' + (centreBarsOffset + d.position * barWidth) + ", " + (maxHeight * 2 + gapBetweenPrimaryAndSecondaryRows - scaler(d.value)) + ')';
    else if (d.secondaryPositionStatus >= 0)
      return 'translate(' + (centreBarsOffset + d.secondaryPositionStatus * barWidth) + ", " + (maxHeight * 2 + gapBetweenPrimaryAndSecondaryRows - scaler(d.value)) + ')';
    else if (d.secondaryPositionStatus < 0)
      return 'translate(' + ((d.secondaryPositionStatus * -1 - 1) * barWidth) + ", " + (maxHeight * 2 + gapBetweenPrimaryAndSecondaryRows - scaler(d.value)) + ')';
    else
      return 'translation(0, 0)'; // error
  }

  FunctionList.radixElement_left = function(d) {
    if (d.secondaryPositionStatus == POSITION_USE_PRIMARY)
      return d.position * 65 + centreBarsOffset + "px";
    return d.secondaryPositionStatus * 65 + 17.5 + "px";
  }

  FunctionList.radixElement_bottom = function(d, i) {
    if (d.secondaryPositionStatus == POSITION_USE_PRIMARY)
      return 500 - 24 + "px";
    //console.log(i + " " + radixSortBucketOrdering[i]);
    return radixSortBucketOrdering[i] * 30 + 5 + "px";
  }

  FunctionList.radixElement_html = function(d) {
    if (d.highlight == HIGHLIGHT_NONE)
      return d.value;

    var text = "" + d.value;
    while (text.length != 4)
      text = " " + text;

    var positionToHighlight = 0; //positionToHighlight = log_to_base_10(d.highlight), assumes d.highlight is power of 10
    var positionCounter = d.highlight;
    while (positionCounter != 1) {
      positionToHighlight++;
      positionCounter /= 10;
    }

    positionToHighlight = 3-positionToHighlight;

    if (text.charAt(positionToHighlight) != " ") {
      text = text.slice(0, positionToHighlight) +
             "<span style='color: #B40404;'>" +
             text.charAt(positionToHighlight) +
             "</span>" +
             text.slice(positionToHighlight+1);
    }

    text = text.trim();
    return text;
  }

  var makePaler = function(hexColor) {
    var red = Math.floor(parseInt(hexColor.slice(1, 3), 16) + 150);
    var green = Math.floor(parseInt(hexColor.slice(3, 5), 16) + 150);
    var blue = Math.floor(parseInt(hexColor.slice(5, 7), 16) + 150);

    if (red > 255) red = 255;
    if (green > 255) green = 255;
    if (blue > 255) blue = 255;

    red = red.toString(16);
    green = green.toString(16);
    blue = blue.toString(16);

    if (red.length == 1) red = "0" + red;
    if (green.length == 1) green = "0" + green;
    if (blue.length == 1) blue = "0" + blue;
    return "#" + red + green + blue;
  }

  // Variables/Settings
  this.currentNumList = [3,44,38,5,47,15,36,26,27,2,46,4,19,50,48]; // the default

  var barWidth = 50;
  var maxHeight = 230;
  var gapBetweenBars = 5;
  var maxNumOfElements = 18; // dropped from 20 to 15 on 25 Feb, changed to 18 on 18 Mar (otherwise too far left after mobile design integration)
  var gapBetweenPrimaryAndSecondaryRows = 120; // 30; // of the bars

  var maxCountingSortElementValue = 9; // Note that this isn't really customizable, as the code for counting sort is written with this value = 9 in mind.
  var maxRadixSortElementValue = 9999; // Note that this isn't really customizable, as the code for radix sort is written with this value = 9999 in mind.
  var maxElementValue = 50; // for all other sorts - this is fully customizable (seriously)

  var graphElementSize = 10; // The width of the square in the side-graph representing 1 element
  var graphElementGap = 2; // The width of the gap between each element in the side-graph
  var graphRowGap = 10; // The height of the gap between each row in the side graph

  //Code body
  var statelist = new Array();
  var secondaryStatelist = new Array();
  var transitionTime = 500;
  var currentStep = 0;
  var animInterval;
  var issPlaying; //so named so as not to mess with the isPlaying in viz.js

  var quickSortUseRandomizedPivot; //true-false flag
  var mergeSortInversionIndexCounter; //used by merge sort to count the inversion index
  var centreBarsOffset; // x offset to centre the bars in the canvas
  var radixSortBucketOrdering; // used to order the elements inside each bucket (for radix sort). for formatting purposes.

  var isRadixSort = false;
  var isCountingSort = false;

  this.selectedSortFunction;
  // this.useEnhancedBubbleSort = false;
  // this.computeInversionIndex = false; // Quick hack on 26 Dec 2021, it will be true from now onwards for Bubble and Merge sort...

  var canvas = d3.select("#viz")
                 .attr("height", maxHeight * 2 + gapBetweenPrimaryAndSecondaryRows)
                 .attr("width", barWidth * maxNumOfElements);

  var countingSortSecondaryCanvas = d3.select("#viz-counting-sort-secondary-canvas")
                                      .attr("height", 30) // 25 Feb, previously 60
                                      .attr("width", barWidth * maxNumOfElements);

  var radixSortCanvas = d3.select("#viz-radix-sort-canvas");

  var scaler = d3.scale
                 .linear()
                 .range([0, maxHeight]);

  var drawState = function(stateIndex) {
    if (isCountingSort)
      maxHeight = 230/2;
    else
      maxHeight = 230;

    if (isRadixSort)
      drawRadixSortCanvas(statelist[stateIndex], secondaryStatelist[stateIndex]);
    else
      drawBars(statelist[stateIndex]);

    $('#status p').html(statelist[stateIndex].status);
    highlightLine(statelist[stateIndex].lineNo);

    if (isCountingSort)
      drawCountingSortCounters(secondaryStatelist[stateIndex]);
  };

  var drawBars = function(state) {
    scaler.domain([0, d3.max(state.entries, function(d) {
      return d.value;
    })]);

    centreBarsOffset = (maxNumOfElements - (state.entries.length - state.barsCountOffset)) * barWidth / 2;

    var canvasData = canvas.selectAll("g").data(state.entries);

    // Exit ==============================
    var exitData = canvasData.exit()
                             .remove();

    // Entry ==============================
    var newData = canvasData.enter()
                            .append("g")
                            .attr("transform", FunctionList.g_transform);

    newData.append("rect")
           .attr("height", 0)
           .attr("width", 0);

    newData.append("text")
           .attr("dy", ".35em")
           .attr("x", (barWidth - gapBetweenBars) / 2)
           .attr("y", FunctionList.text_y)
           .text(function(d) {
             return d.value;
           });

    // Update ==============================
    canvasData.select("text")
              .transition()
              .attr("y", FunctionList.text_y)
              .text(function(d, i) {
                return d.value;
              });

    canvasData.select("rect")
              .transition()
              .attr("height", function(d) {
                return scaler(d.value);
              })
              .attr("width", barWidth - gapBetweenBars)
              .style("fill", function(d) {
                return d.highlight;
              });

    canvasData.transition()
              .attr("transform", FunctionList.g_transform)
  };

  var drawCountingSortCounters = function(state) {
    var canvasData;
    if (state == null)
      canvasData = countingSortSecondaryCanvas.selectAll("text").data([]);
    else
      canvasData = countingSortSecondaryCanvas.selectAll("text").data(state);

    // Exit ==============================
    var exitData = canvasData
            .exit()
            .remove();

    // Entry ==============================

    var newData = canvasData
            .enter()
            .append("text")
            .attr("dy", ".35em")
            .attr("x", function(d, i) {
              return (i + 5) * barWidth + (barWidth - gapBetweenBars) / 2; // this one controls the frequency text for counting sort
            })
            .attr("y", 10) // 25 Feb, previously 20
            .text(function(d) {
              return d;
            });

    // Update ==============================

    canvasData
            .transition()
            .text(function(d) {
              return d;
            });
  };

  var drawRadixSortCanvas = function(state, secondaryState) {
    centreBarsOffset = (1000 - (state.entries.length * 65 - 10)) / 2; //uh, it's not really bars now, but just reusing the variable - same concept still

    var canvasData = radixSortCanvas.selectAll("div").data(state.entries);
    var radixSortBucketCount = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    radixSortBucketOrdering = new Array(state.backlinks.length);

    for (var i = 0; i < state.backlinks.length; ++i) {
      if (state.backlinks.secondaryPositionStatus != POSITION_USE_PRIMARY)
        radixSortBucketOrdering[state.backlinks[i].entryPosition] = radixSortBucketCount[state.backlinks[i].secondaryPositionStatus]++;
    }

    // Handle the buckets' DIV's
    if (secondaryState)
      $("#radix-sort-bucket-labels-collection").show();
    else
      $("#radix-sort-bucket-labels-collection").hide();

    // Exit ==============================
    var exitData = canvasData.exit()
                             .remove();

    // Entry ==============================
    var newData = canvasData.enter()
                            .append("div")
                            .classed({"radix-sort-element": true})
                            .style({
                              "left": FunctionList.radixElement_left,
                              "bottom": FunctionList.radixElement_bottom
                            })
                            .html(FunctionList.radixElement_html);

    // Update ==============================
    canvasData.html(FunctionList.radixElement_html)
              .transition()
              .style({
                "left": FunctionList.radixElement_left,
                "bottom": FunctionList.radixElement_bottom
              });
  };

  var generateRandomNumberArray = function(size, limit) {
    var numArray = new Array();
    for (var i = 0; i < size; ++i) {
      numArray.push(generateRandomNumber(1, limit));
    }
    return numArray;
  };

  var generateRandomNumber = function(min, max) { // generates a random integer between min and max (both inclusive)
    return Math.floor(Math.random() * (max - min + 1)) + min;
  };

  var convertToNumber = function(num) {
    return +num;
  };

  this.createList = function(type) {
    var numArrayMaxListSize = 15; // on 25 Feb 2022, I lower this from 20 down to 15... (to make it nicer on mobile)
    var numArrayMaxElementValue = maxElementValue;
    if (this.selectedSortFunction == this.radixSort) {
      numArrayMaxListSize = 15;
      numArrayMaxElementValue = maxRadixSortElementValue;
    }
    else if (this.selectedSortFunction == this.countingSort) {
      numArrayMaxElementValue = maxCountingSortElementValue;
    }

    var numArray = generateRandomNumberArray(generateRandomNumber(10, numArrayMaxListSize), numArrayMaxElementValue);
    if (type.indexOf("many") != -1) {
      var range = generateRandomNumber(1, 4); // 1, 2, 3, or 4 different numbers only
      numArray = generateRandomNumberArray(generateRandomNumber(10, numArrayMaxListSize), range);
    }

    switch (type) {
      case 'random':
      case 'many-duplicates':
        break; // already done above
      case 'sorted-non-decreasing':
      case 'nearly-sorted-non-decreasing':
        numArray.sort(d3.ascending);
        break;
      case 'sorted-non-increasing':
      case 'nearly-sorted-non-increasing':
        numArray.sort(d3.descending);
        break;
      case 'userdefined':
        numArray = $('#userdefined-input').val().split(",");

        if (numArray.length > numArrayMaxListSize) {
          $("#create-err").html('You can&#39;t have more than {maxSize} elements!'.replace("{maxSize}", numArrayMaxListSize));
          return false;
        }

        for (var i = 0; i < numArray.length; ++i) {
          var temp = convertToNumber(numArray[i]);

          if (numArray[i].trim() == "") {
            $("#create-err").html('There seems to be a missing element (a duplicate comma somewhere perhaps?)');
            return false;
          }
          if (isNaN(temp)) {
            $("#create-err").html('There seems to be an invalid element (not a number): {num}.'.replace("{num}", numArray[i]));
            return false;
          }
          if (temp < 1 || temp > numArrayMaxElementValue) {
            $("#create-err").html('Sorry, you&#39;re restricted to values between 1 and {maxValue} inclusive. (Out of range number: {num}.)'.replace("{maxValue}", numArrayMaxElementValue).replace("{num}", numArray[i]));
            return false;
          }

          numArray[i] = convertToNumber(numArray[i]);
        }
        break;
    }

    if (type.indexOf("nearly") != -1) {
      // To make the list nearly sorted, we take the already sorted list and make swaps
      // such that the list becomes not sorted. The number of such swaps varies from 1 to 2 (customizable).
      // The idea is that the more swaps we make, the less "sorted" the list is.
      //
      // Another limitation is that each swap occurs between elements that are at most 3 positions away.
      while (true) {
        var newNumArray = numArray.slice();

        var numOfSwaps = generateRandomNumber(1, 2);
        for (var i = 0; i < numOfSwaps; ++i) {
          var firstSwappingIndex = generateRandomNumber(0, newNumArray.length - 4);
          var secondSwappingIndex = generateRandomNumber(1, 3) + firstSwappingIndex;

          var temp = numArray[firstSwappingIndex];
          newNumArray[firstSwappingIndex] = numArray[secondSwappingIndex];
          newNumArray[secondSwappingIndex] = temp;
        }

        // We compare the numArray with newNumArray, if they're are the same,
        // we try again, else we reassign numArray to newNumArray and break.
        var isEquals = true;
        for (var i = 0; i < numArray.length; ++i) {
          if (numArray[i] != newNumArray[i]) {
            isEquals = false;
            break;
          }
        }

        if (!isEquals) {
          numArray = newNumArray;
          break;
        }
      }
    }

    this.loadNumberList(numArray);
  }

  this.loadNumberList = function(numArray) {
    $("#create-err").html("");

    issPlaying = false;
    currentStep = 0;
    this.currentNumList = numArray;

    //console.log("numArray: " + numArray);

    statelist = [StateHelper.createNewState(numArray)];
    secondaryStatelist = [null]; // the initial secondary state will be an empty state
    drawState(0);
  }

  this.setSelectedSortFunction = function(f) {
    this.selectedSortFunction = f;
    isRadixSort = (this.selectedSortFunction == this.radixSort);
    isCountingSort = (this.selectedSortFunction == this.countingSort);
  }

  this.sort = function(callback) {
    return this.selectedSortFunction(callback);
  }

  this.radixSort = function(callback) {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);

    populatePseudocode([
      'create 10 buckets (queues) for each digit (0 to 9)',
      'for each digit placing',
      '  for each element in list',
      '    move element into respective bucket',
      '  for each bucket, starting from smallest digit',
      '    while bucket is non-empty',
      '      restore element to list'
    ]);

    secondaryStatelist = [false]; // showBucket flag - if true, shows the DIV's representing the bucketss
    var currentPlacing = 1;
    var targetPlacing = 1;
    var backlinkBuckets = [[], [], [], [], [], [], [], [], [], []];

    var maxValue = d3.max(state.backlinks, function(d) {
      return d.value;
    });
    while (maxValue >= 10) {
      targetPlacing *= 10;
      maxValue = Math.floor(maxValue / 10);
    }

    state.lineNo = 1;

    for (; currentPlacing <= targetPlacing; currentPlacing *= 10) {
      for (var i = 0; i < numElements; ++i)
        state.backlinks[i].highlight = currentPlacing;

      state.lineNo = 2;
      state.status = 'Processing the {currentPlacing}'.replace('{currentPlacing}', currentPlacing == 1 ? 'Ones' : currentPlacing == 10 ? 'Tens' : currentPlacing == 100 ? 'Hundreds' : 'Thousands');
      StateHelper.updateCopyPush(statelist, state);
      secondaryStatelist.push(true);

      for (var i = 0; i < numElements; ++i) {
        var currentDigit = Math.floor(state.backlinks[i].value / currentPlacing) % 10;
        state.backlinks[i].secondaryPositionStatus = currentDigit;
        backlinkBuckets[currentDigit].push(state.backlinks[i]);
        state.lineNo = [3,4];
        state.status = 'Moving {val} to bucket no {bucket}'.replace('{val}', state.backlinks[i].value).replace('{bucket}', currentDigit);
        StateHelper.updateCopyPush(statelist, state);
        secondaryStatelist.push(true);
      }

      for (var i = 0, j = 0; i <= 9; ) {
        if (backlinkBuckets[i].length == 0) {
          ++i;
          continue;
        }

        state.backlinks[j++] = backlinkBuckets[i].shift();
      }

      for (var i = 0; i < numElements; ++i) {
        state.backlinks[i].secondaryPositionStatus = POSITION_USE_PRIMARY;
        state.lineNo = [5,6,7];
        state.status = 'Restoring element to position {i} in the list'.replace('{i}', i); // + state.backlinks[i]; //[i].secondaryPositionStatus;
        StateHelper.updateCopyPush(statelist, state);
        secondaryStatelist.push(true);
      }
    }

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE;
    state.lineNo = [];
    state.status = 'We are done';
    StateHelper.updateCopyPush(statelist, state);
    secondaryStatelist.push(false);

    this.play(callback);
    return true;
  }

  this.countingSort = function(callback) {
    // Note that while we have the maxCountingSortElementValue variable, it isn't really customizable.
    // The code here written is really just for the range 1 to 9.

    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);

    populatePseudocode([
      'create key (counting) array',
      'for each element in list',
      '  increase the respective counter by 1',
      'for each counter, starting from smallest key',
      '  while counter is non-zero',
      '    restore element to list',
      '    decrease counter by 1'
    ]);

    var secondaryState = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    var backlinkBuckets = [[], [], [], [], [], [], [], [], []];

    state.barsCountOffset = maxCountingSortElementValue;

    for (var i = 1; i <= maxCountingSortElementValue; ++i) {
      EntryBacklinkHelper.append(state.entries, state.backlinks, i);
      state.backlinks[numElements+i-1].highlight = HIGHLIGHT_GRAY;
      state.backlinks[numElements+i-1].secondaryPositionStatus = i * -1 - 5;
    }

    state.lineNo = 1;
    state.status = 'Create the key (counting) array (from 1 to 9).';

    StateHelper.updateCopyPush(statelist, state);
    secondaryStatelist.push(secondaryState.slice()); // copy the array and push it into the secondary statelist

    for (var i = 0; i < numElements; ++i) {
      var currentValue = state.backlinks[i].value;

      backlinkBuckets[currentValue-1].push(state.backlinks[i]);

      state.backlinks[i].secondaryPositionStatus = currentValue * -1 - 5;

      ++secondaryState[currentValue-1];

      state.backlinks[currentValue + numElements - 1].highlight = HIGHLIGHT_BLUESHADES[secondaryState[currentValue - 1]];

      state.lineNo = [2, 3];
      state.status = 'Increase the counter with key {curVal} by 1.'.replace("{curVal}", currentValue);

      StateHelper.updateCopyPush(statelist, state);
      secondaryStatelist.push(secondaryState.slice()); // copy the array and push it into the secondary statelist
    }

    for (var i = 0, j = 0; i < maxCountingSortElementValue; ) {
      if (backlinkBuckets[i].length == 0) {
        ++i;
        continue;
      }

      state.backlinks[j++] = backlinkBuckets[i].shift();
    }

    for (var i = 0; i < numElements; ++i) {
      var currentValue = state.backlinks[i].value;

      state.backlinks[i].secondaryPositionStatus = POSITION_USE_PRIMARY;

      --secondaryState[currentValue-1];

      state.backlinks[currentValue+numElements-1].highlight = HIGHLIGHT_BLUESHADES[secondaryState[currentValue-1]];

      state.lineNo = [4, 5, 6, 7];
      state.status = 'Restore element {curVal}, and decrease the counter with that key by 1.'.replace("{curVal}", currentValue);

      StateHelper.updateCopyPush(statelist, state);
      secondaryStatelist.push(secondaryState.slice()); //copy the array and push it into the secondary statelist
    }

    state.barsCountOffset = 0;

    for (var i = 1; i <= maxCountingSortElementValue; ++i) {
      state.entries.pop();
      state.backlinks.pop();
    }

    state.lineNo = 0;
    state.status = 'List is sorted!';
    StateHelper.updateCopyPush(statelist, state);
    secondaryStatelist.push(null); //copy the array and push it into the secondary statelist

    this.play(callback);
    return true;
  }

  this.randomizedQuickSort = function(callback) {
    quickSortUseRandomizedPivot = true;
    quickSortStart();

    this.play(callback);
    return true;
  }

  this.quickSort = function(callback) {
    quickSortUseRandomizedPivot = false;
    quickSortStart();

    this.play(callback);
    return true;
  }

  var quickSortStart = function() {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[statelist.length - 1]);

    populatePseudocode([
      'for each (unsorted) partition',
      (quickSortUseRandomizedPivot) ? 'randomly select pivot, swap with first element' : 'set first element as pivot',
      '  storeIndex = pivotIndex+1',
      '  for i = pivotIndex+1 to rightmostIndex',
      '    if ((a[i] &lt; a[pivot]) or (equal but 50% lucky))',
      '      swap(i, storeIndex); ++storeIndex',
      '  swap(pivot, storeIndex-1)'
    ]);

    quickSortSplit(state, 0, numElements-1);

    state.lineNo = 0;
    state.status = 'List is sorted!';

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; //unhighlight everything
    StateHelper.updateCopyPush(statelist, state);
  }

  var quickSortSplit = function(state, startIndex, endIndex) { //startIndex & endIndex inclusive
    var cur_partition = state.backlinks.slice(startIndex, endIndex+1).map(function(d) {
                    return d.value;
                  });
    if (cur_partition.toString().length > 20)
      cur_partition = cur_partition.toString().substr(0, 20)+'...';
    state.status = 'Working on partition [{partition}] (index {startIndex} to {endIndex}).'
                  .replace("{partition}", cur_partition)
                  .replace("{startIndex}", startIndex).replace("{endIndex}", endIndex);
    state.lineNo = 1;

    if (startIndex > endIndex)
      return;

    if (startIndex == endIndex) {
      state.status += ' Since partition size == 1, element inside partition is necessarily at sorted position.';
      state.backlinks[startIndex].highlight = HIGHLIGHT_SORTED;
      StateHelper.updateCopyPush(statelist, state);
      return;
    }

    var middleIndex = quickSortPartition(state, startIndex, endIndex);
    quickSortSplit(state, startIndex, middleIndex-1);
    quickSortSplit(state, middleIndex+1, endIndex);
  }

  var quickSortPartition = function(state, startIndex, endIndex) {
    var pivotIndex;
    if (quickSortUseRandomizedPivot) {
      pivotIndex = generateRandomNumber(startIndex, endIndex);

      state.status += ' Randomly selected {pivot} (index {index}) as pivot.'.replace("{pivot}", state.backlinks[pivotIndex].value).replace("{index}", pivotIndex);
      state.lineNo = [1, 2];

      state.backlinks[pivotIndex].highlight = HIGHLIGHT_PIVOT;
      StateHelper.updateCopyPush(statelist, state);

      if (pivotIndex != startIndex) {
        state.status = 'Swap pivot ({pivot}, index {index}) with first element ({first}, index {firstIndex}). (storeIndex = {storeIndex}.)'.replace("{pivot}", state.backlinks[pivotIndex].value).replace("{index}", pivotIndex)
              .replace("{first}", state.backlinks[startIndex].value).replace("{firstIndex}", startIndex).replace("{storeIndex}", (startIndex + 1));

        state.lineNo = [2, 3];

        EntryBacklinkHelper.swapBacklinks(state.backlinks, pivotIndex, startIndex);
        pivotIndex = startIndex;
        StateHelper.updateCopyPush(statelist, state);
      }
    }
    else {
      pivotIndex = startIndex;

      state.status += ' Selecting {pivot} as pivot. (storeIndex = {storeIndex}).'.replace("{pivot}", state.backlinks[pivotIndex].value).replace("{storeIndex}", (startIndex + 1));
      state.lineNo = [1, 2, 3];

      state.backlinks[pivotIndex].highlight = HIGHLIGHT_PIVOT;
      StateHelper.updateCopyPush(statelist, state);
    }

    var storeIndex = pivotIndex+1;
    var pivotValue = state.backlinks[pivotIndex].value;

    for (var i = storeIndex; i <= endIndex; ++i) {
      state.status = 'Checking if {val} &lt; {pivot} (pivot) (or if they are equal but 50% lucky).'.replace("{val}", state.backlinks[i].value).replace("{pivot}", pivotValue);
      state.lineNo = [4, 5];

      state.backlinks[i].highlight = HIGHLIGHT_SPECIAL;
      StateHelper.updateCopyPush(statelist, state);
      if ((state.backlinks[i].value < pivotValue) || ((state.backlinks[i].value == pivotValue) && (Math.random() < 0.5))) {
        state.status = '{val} &lt;= {pivot} (pivot) is true. Swapping index {idx} (value = {val}) with element at storeIndex {storeIdx} (value = {storeVal}). (Value of storeIndex is now = {newStoreIdx}).'
          .replace("{val}", state.backlinks[i].value)
          .replace("{pivot}", pivotValue)
          .replace("{idx}", i).replace("{storeIdx}", storeIndex)
          .replace("{val}", state.backlinks[i].value)
          .replace("{storeVal}", state.backlinks[storeIndex].value)
          .replace("{newStoreIdx}", (storeIndex+1));
        state.lineNo = [4, 6];

        //if (i != storeIndex) { // small behavioral fix on 12 Feb 2022, swap with itself is animated
          EntryBacklinkHelper.swapBacklinks(state.backlinks, storeIndex, i);
          StateHelper.updateCopyPush(statelist, state);
        //}

        state.backlinks[storeIndex].highlight = HIGHLIGHT_LEFT;
        ++storeIndex;
      }
      else {
        state.backlinks[i].highlight = HIGHLIGHT_RIGHT;
      }
    }
    state.status = 'Iteration complete.';
    state.lineNo = 4;
    StateHelper.updateCopyPush(statelist, state);
    if (storeIndex - 1 != pivotIndex) {
      state.status = 'Swapping pivot (index = {pivotIdx}, value = {pivot}) with element at storeIndex - 1 (index = {newIdx}, value = {newVal}).'.replace("{pivotIdx}", pivotIndex).replace("{pivot}", pivotValue)
            .replace("{newIdx}", (storeIndex - 1)).replace("{newVal}", state.backlinks[storeIndex - 1].value);
      state.lineNo = 7;
      EntryBacklinkHelper.swapBacklinks(state.backlinks, storeIndex - 1, pivotIndex);
      StateHelper.updateCopyPush(statelist, state);
    }

    state.status = 'Pivot is now at its sorted position.';
    state.lineNo = 7;

    for (var i = startIndex; i <= endIndex; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; //unhighlight everything
    state.backlinks[storeIndex - 1].highlight = HIGHLIGHT_SORTED;
    StateHelper.updateCopyPush(statelist, state);

    return storeIndex - 1;
  }

  this.mergeSort = function(callback) {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);

    populatePseudocode([
      'split each element into partitions of size 1',
      'recursively merge adjacent partitions',
      '  for i = leftPartIdx to rightPartIdx',
      '    if leftPartHeadValue <= rightPartHeadValue',
      '      copy leftPartHeadValue',
      '    else: copy rightPartHeadValue' + (computeInversionIndex ? '; Increase InvIdx' : ""),
      'copy elements back to original array'
    ]);

    mergeSortInversionIndexCounter = 0;

    for (var i = 0; i < numElements; ++i) {
      state.backlinks[i].highlight = HIGHLIGHT_RAINBOW[i];
    }

    state.status = 'We split the array into partitions of 1 (each partition takes on a distinct color).';
    status.lineNo = 1;
    StateHelper.updateCopyPush(statelist, state);

    this.mergeSortSplitMerge(state, 0, numElements);

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; // unhighlight everything

    state.status = 'List is sorted!';
    if (computeInversionIndex)
      state.status += '<br>(Inversion Index = {idx}.)'.replace("{idx}", mergeSortInversionIndexCounter);

    state.lineNo = 0;
    StateHelper.updateCopyPush(statelist, state);

    this.play(callback);
    return true;
  }

  this.mergeSortSplitMerge = function(state, startIndex, endIndex) { // startIndex inclusive, endIndex exclusive
    if (endIndex - startIndex <= 1)
      return;

    var middleIndex = Math.ceil((startIndex + endIndex) / 2);
    this.mergeSortSplitMerge(state, startIndex, middleIndex);
    this.mergeSortSplitMerge(state, middleIndex, endIndex);
    this.mergeSortMerge(state, startIndex, middleIndex, endIndex)

    // Copy array back
    state.status = 'We copy the elements from the new array back into the original array.';
    state.lineNo = 7;

    var duplicateBacklinks = new Array();
    for (var i = startIndex; i < endIndex; ++i) {
      var newPosition = state.backlinks[i].secondaryPositionStatus;
      duplicateBacklinks[newPosition] = state.backlinks[i];
    }

    for (var i = startIndex; i < endIndex; ++i) {
      state.backlinks[i] = duplicateBacklinks[i];
    }

    for (var i = startIndex; i < endIndex; ++i) {
      state.backlinks[i].secondaryPositionStatus = POSITION_USE_PRIMARY;
      StateHelper.updateCopyPush(statelist, state);
    }
  }

  this.mergeSortMerge = function(state, startIndex, middleIndex, endIndex) {
    var leftIndex = startIndex;
    var rightIndex = middleIndex;

    var newHighlightColor = state.backlinks[startIndex].highlight;

    state.status = 'Merge partitions [{partition1}] (index {startIdx1} to {endIdx1}) and [{partition2}] (index {startIdx2} to {endIdx2}).'
        .replace('{partition1}', state.backlinks.slice(startIndex, middleIndex).map(function(d) {
          return d.value;
        }))
        .replace("{startIdx1}", startIndex).replace("{endIdx1}", (middleIndex - 1))
        .replace("{partition2}", state.backlinks.slice(middleIndex, endIndex).map(function(d) {
          return d.value;
        }))
        .replace("{startIdx2}", middleIndex).replace("{endIdx2}", (endIndex - 1));
    state.lineNo = 2;

    state.backlinks[leftIndex].highlight = makePaler(state.backlinks[leftIndex].highlight);
    state.backlinks[rightIndex].highlight = makePaler(state.backlinks[rightIndex].highlight);
    StateHelper.updateCopyPush(statelist, state);

    for (var i = startIndex; i < endIndex; ++i) {
      // Note here we don't actually copy the elements into a new array, like in a usual mergesort.
      // This is left instead to the mergeSortSplitMerge to handle as it's easier there.
      // (We use the useSecondaryPostion property to overcome this lack-of-copying.)
      if (leftIndex < middleIndex && (rightIndex >= endIndex || state.backlinks[leftIndex].value <= state.backlinks[rightIndex].value)) {
        state.backlinks[leftIndex].highlight = newHighlightColor;
        state.backlinks[leftIndex].secondaryPositionStatus = i;

        if (rightIndex < endIndex) {
          state.status = 'Since {leftPart} (left partition) &lt;= {rightPart} (right partition), we take {leftPart}.'
            .replace("{leftPart}", state.backlinks[leftIndex].value)
            .replace("{rightPart}", state.backlinks[rightIndex].value)
            .replace("{leftPart}", state.backlinks[leftIndex].value);
        }
        else {
          state.status = 'Since right partition is empty, we take {leftPart} (left partition).'.replace("{leftPart}", state.backlinks[leftIndex].value);
        }
        state.lineNo = [3, 4, 5];

        leftIndex++;
        if (leftIndex != middleIndex)
          state.backlinks[leftIndex].highlight = makePaler(state.backlinks[leftIndex].highlight);

        StateHelper.updateCopyPush(statelist, state);
      }
      else {
        state.backlinks[rightIndex].highlight = newHighlightColor;
        state.backlinks[rightIndex].secondaryPositionStatus = i;

        if (leftIndex < middleIndex) {
          state.status = 'Since {leftPart} (left partition) &gt; {rightPart} (right partition), we take {rightPart}.'
            .replace("{leftPart}", state.backlinks[leftIndex].value)
            .replace("{rightPart}", state.backlinks[rightIndex].value)
            .replace("{rightPart}", state.backlinks[rightIndex].value);
        }
        else {
          state.status = 'Since left partition is empty, we take {rightPart} (right partition).'.replace("{rightPart}", state.backlinks[rightIndex].value);
        }

        if (computeInversionIndex) {
          mergeSortInversionIndexCounter += middleIndex - leftIndex;
          state.status += '<br>(We add size_of_left_partition (= {sizeofleft}) to <b>InvIdx&nbsp;</b>({inversionidxcounter}).)'
            .replace("{sizeofleft}", (middleIndex - leftIndex)).replace("{inversionidxcounter}", mergeSortInversionIndexCounter);
        }
//        else {
//          state.status += 'weird'; // what is this?
//        }
        state.lineNo = [3, 6];

        ++rightIndex;
        if (rightIndex != endIndex)
          state.backlinks[rightIndex].highlight = makePaler(state.backlinks[rightIndex].highlight);

        StateHelper.updateCopyPush(statelist, state);
      }
    }
  }

  this.insertionSort = function(callback) {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);

    populatePseudocode([
      'mark first element as sorted',
      'for each unsorted element X',
      '  &#39;extract&#39; the element X',
      '  for j = lastSortedIndex down to 0',
      '    if current element j &gt; X',
      '      move sorted element to the right by 1',
      '    break loop and insert X here'
    ]);

    // First element always sorted
    state.lineNo = 1;
    // Mark the first element ({firstVal}) as sorted.
    state.status = 'Mark the first element ({firstVal}) as sorted.'.replace("{firstVal}", state.backlinks[0].value);
    state.backlinks[0].highlight = HIGHLIGHT_SORTED;
    StateHelper.updateCopyPush(statelist, state);

    for (var i = 1; i < numElements; ++i) {
      // Highlight first unsorted element
      state.lineNo = [2, 3];
      // Extract the first unsorted element ({val}).
      state.status = 'Extract the first unsorted element ({val}).'.replace("{val}", state.backlinks[i].value);
      state.backlinks[i].highlight = HIGHLIGHT_SPECIAL;
      state.backlinks[i].secondaryPositionStatus = POSITION_USE_SECONDARY_IN_DEFAULT_POSITION;
      StateHelper.updateCopyPush(statelist, state);

      for (var j = i-1; j >= 0; --j) {
        state.lineNo = 4;
        // Figure where to insert extracted element.
        // Comparing with sorted element {val}.
        state.status = 'Figure where to insert extracted element; comparing with sorted element {val}.'.replace("{val}", state.backlinks[j].value);;
        state.backlinks[j].highlight = HIGHLIGHT_STANDARD;
        StateHelper.updateCopyPush(statelist, state);

        if (state.backlinks[j].value > state.backlinks[j+1].value) {
          state.lineNo = [5, 6];
          // {val1} > {val2} is true.
          // Hence move current sorted element ({val1}) to the right by 1.
          state.status = '{val1} > {val2} is true, hence move current sorted element ({val1}) to the right by 1.'.replace("{val1}", state.backlinks[j].value).replace("{val2}", state.backlinks[j+1].value).replace("{val1}", state.backlinks[j].value);
          EntryBacklinkHelper.swapBacklinks(state.backlinks, j, j+1);
          StateHelper.updateCopyPush(statelist, state);
          state.backlinks[j+1].highlight = HIGHLIGHT_SORTED;
        }
        else {
          state.lineNo = 7;
          // {val1} > {val2} is false.
          // Insert extracted element at current position.
          state.status = '{val1} > {val2} is false, insert element at current position.'.replace("{val1}", state.backlinks[j].value).replace("{val2}", state.backlinks[j+1].value);
          state.backlinks[j].highlight = HIGHLIGHT_SORTED;
          state.backlinks[j+1].secondaryPositionStatus = POSITION_USE_PRIMARY;
          state.backlinks[j+1].highlight = HIGHLIGHT_SORTED;
          StateHelper.updateCopyPush(statelist, state);
          break;
        }
      }

      if (state.backlinks[0].secondaryPositionStatus == POSITION_USE_SECONDARY_IN_DEFAULT_POSITION) {
        state.lineNo = 4;
        // At beginning of array (nothing to compare).
        // Hence insert extracted element at current position.
        state.status = 'At beginning of array (nothing to compare), hence insert element at current position.';
        state.backlinks[0].secondaryPositionStatus = POSITION_USE_PRIMARY;
        state.backlinks[0].highlight = HIGHLIGHT_SORTED;
        StateHelper.updateCopyPush(statelist, state);
      }
    }

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; //unhighlight everything
    state.lineNo = 0;
    // The array/list is now sorted.
    state.status = 'List is sorted!';
    StateHelper.updateCopyPush(statelist, state);

    this.play(callback);
    return true;
  }

  this.selectionSort = function(callback) {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);

    populatePseudocode([
      'repeat (numOfElements - 1) times',
      '  set the first unsorted element as the minimum',
      '  for each of the unsorted elements',
      '    if element < currentMinimum',
      '      set element as new minimum',
      '  swap minimum with first unsorted position'
    ]);

    for (var i = 0; i < numElements-1; ++i) {
      var minPosition = i;

      // Iteration {iteration}: Set {val} as the current minimum.
      // Then iterate through the rest to find the true minimum.
      state.status = 'Iteration {iteration}: Set {val} as the current minimum, then iterate through the remaining unsorted elements to find the true minimum.'.replace("{iteration}", (i+1)).replace("{val}", state.backlinks[i].value);
      state.lineNo = [1, 2, 3];
      state.backlinks[minPosition].highlight = HIGHLIGHT_SPECIAL;

      StateHelper.updateCopyPush(statelist, state);

      for (var j = i+1; j < numElements; ++j) {
        // Check if {val} is smaller than the current minimum ({minVal}).
        state.status = 'Check if {val} is smaller than the current minimum ({minVal}).'.replace("{val}", state.backlinks[j].value).replace("{minVal}", state.backlinks[minPosition].value);
        state.lineNo = 4;
        state.backlinks[j].highlight = HIGHLIGHT_STANDARD;
        StateHelper.updateCopyPush(statelist, state);

        state.backlinks[j].highlight = HIGHLIGHT_NONE;

        if (state.backlinks[j].value < state.backlinks[minPosition].value) {
          state.status = 'Set {val} as the new minimum.'.replace("{val}", state.backlinks[j].value);
          state.lineNo = 5;
          state.backlinks[minPosition].highlight = HIGHLIGHT_NONE;
          state.backlinks[j].highlight = HIGHLIGHT_SPECIAL;

          minPosition = j;
          StateHelper.updateCopyPush(statelist, state);
        }
      }

      if (minPosition != i) { // Highlight the first-most unswapped position, if it isn't the minimum
        // Set {val} as the new minimum.
        state.status = 'Swap the minimum ({minVal}) with the first unsorted element ({element}).'.replace("{minVal}", state.backlinks[minPosition].value).replace("{element}", state.backlinks[i].value);
        state.lineNo = 6;
        state.backlinks[i].highlight = HIGHLIGHT_SPECIAL;
        StateHelper.updateCopyPush(statelist, state);

        EntryBacklinkHelper.swapBacklinks(state.backlinks, minPosition, i);
        StateHelper.updateCopyPush(statelist, state);
      }
      else {
        // As the minimum is the first unsorted element, no swap is necessary.
        state.status = 'As the minimum is the first unsorted element, no swap is necessary.';
        state.lineNo = 6;
        StateHelper.updateCopyPush(statelist, state);
      }

      // {val} is now considered sorted.
      state.status = '{val} is now considered sorted.'.replace("{val}", state.backlinks[i].value);
      state.backlinks[minPosition].highlight = HIGHLIGHT_NONE;
      state.backlinks[i].highlight = HIGHLIGHT_SORTED;
      StateHelper.updateCopyPush(statelist, state);
    }

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; // un-highlight everything
    // The array/list is now sorted.
    // (After all iterations, the last element will naturally be sorted.)
    state.status = 'List is sorted!' + '<br>' + '(After all iterations, the last element will naturally be sorted.)';
    status.lineNo = 0;
    StateHelper.updateCopyPush(statelist, state);

    this.play(callback);
    return true;
  }

  this.bubbleSort = function(callback) {
    var numElements = statelist[0].backlinks.length;
    var state = StateHelper.copyState(statelist[0]);
    var swapCounter = 0;

    populatePseudocode([
      'do',
      '  <b>swapped </b>= false',
      '  for i = 1 to indexOfLastUnsortedElement-1',
      '    if leftElement > rightElement',
      '      swap(leftElement, rightElement)',
      '      <b>swapped </b>= true' + (computeInversionIndex ? '; <b>++swapCounter</b>' : ""),
      'while <b>swapped</b>'
    ]);

    var swapped;
    var indexOfLastUnsortedElement = numElements;
    do {
      swapped = false;

      // Set the swapped flag to false.
      // Then iterate from 1 to {endIdx} inclusive.
      state.status = 'Set the <b>swapped </b>flag to false.<div>Then iterate from index 1 to {endIdx} inclusive.</div>'.replace("{endIdx}", indexOfLastUnsortedElement-1);
      state.lineNo = [2, 3];
      StateHelper.updateCopyPush(statelist, state);

      for (var i = 1; i < indexOfLastUnsortedElement; ++i) {
        state.backlinks[i-1].highlight = HIGHLIGHT_STANDARD;
        state.backlinks[i].highlight = HIGHLIGHT_STANDARD;

        // Checking if {val1} > {val2} and swap them if that is true.
        // The current value of swapped = {swapped}.
        state.status = '<div>Checking if {val1} &gt; {val2} and swap them if that is true;&nbsp;<b>swapped </b>= {swapped}.</div>'.replace("{val1}", state.backlinks[i-1].value).replace("{val2}", state.backlinks[i].value).replace("{swapped}", swapped);
        state.lineNo = 4;
        StateHelper.updateCopyPush(statelist, state);

        if (state.backlinks[i-1].value > state.backlinks[i].value) {
          swapped = true;

          // Swapping the positions of {val1} and {val2}.
          // Set swapped = true.
          state.status = 'Swapping the positions of {val1} and {val2} and set <b>swapped </b>= true.'.replace("{val1}", state.backlinks[i-1].value).replace("{val2}", state.backlinks[i].value);
          if (computeInversionIndex) {
            ++swapCounter;
            // For inversion index computation: Add 1 to swapCounter.
            // The current value of swapCounter = {swapCounter}.
            state.status += '<br>For inversion index: Add 1 to <b>swapCounter</b>, now = {swapCounter}.'.replace("{swapCounter}", swapCounter);
          }

          state.lineNo = [5, 6];

          EntryBacklinkHelper.swapBacklinks(state.backlinks, i, i-1);
          StateHelper.updateCopyPush(statelist, state);
        }

        state.backlinks[i-1].highlight = HIGHLIGHT_NONE;
        state.backlinks[i].highlight = HIGHLIGHT_NONE;
      }

      --indexOfLastUnsortedElement;
      state.backlinks[indexOfLastUnsortedElement].highlight = HIGHLIGHT_SORTED;
      if (swapped == false)
        // No swap is done in this pass.
        // We can terminate Bubble Sort now.
        state.status = 'No swap is done in this pass.<div>We can terminate Bubble Sort now</div>';
      else
        // Mark last unsorted element as sorted now.
        // As at least one swap is done in this pass, we continue.
        state.status = '<div>Mark this element as sorted now.</div><div>As at least one swap is done in this pass, we continue.</div>';

      state.lineNo = 7;
      StateHelper.updateCopyPush(statelist, state);
    }
    while (swapped);

    for (var i = 0; i < numElements; ++i)
      state.backlinks[i].highlight = HIGHLIGHT_NONE; //un-highlight everything

    // The array/list is now sorted.
    state.status = 'List is sorted!';
    if (computeInversionIndex)
      // Inversion Index = {swapCounter}.
      state.status += '<br>Inversion Index = {swapCounter}.'.replace("{swapCounter}", swapCounter);

    state.lineNo = 0;
    StateHelper.updateCopyPush(statelist, state);

    this.play(callback);
    return true;
  }

  this.clearPseudocode = function() { populatePseudocode([]); }

  var populatePseudocode = function(code) {
    var i = 1;
    for (; i <= 7 && i <= code.length; ++i) {
      $("#code" + i).html(
        code[i - 1].replace(
        /^\s+/,
        function(m) { return m.replace(/\s/g, "&nbsp;"); }
        )
      );
    }
    for (; i <= 7; ++i) {
      $("#code" + i).html("");
    }
  }

  //animation functions
  var drawCurrentState = function() {
    if (currentStep < 0)
      currentStep = 0;
    if (currentStep > statelist.length - 1)
      currentStep = statelist.length - 1;
    $('#progress-bar').slider("value", currentStep);
    drawState(currentStep);
    if (currentStep == (statelist.length-1)) {
      pause(); //in html file
      $('#play img').attr('src', 'https://visualgo.net/img/replay.png').attr('alt', 'replay').attr('title', 'replay');
    }
    else
      $('#play img').attr('src', 'https://visualgo.net/img/play.png').attr('alt', 'play').attr('title', 'play');
  }

  this.getAnimationDuration = function() { return transitionTime; }

  this.setAnimationDuration = function(x) {
    transitionTime = x;
    if (issPlaying) {
      clearInterval(animInterval);
      animInterval = setInterval(function() {
        drawCurrentState();
        if (currentStep < (statelist.length-1))
          ++currentStep;
        else
          clearInterval(animInterval);
      }, transitionTime);
    }
  }

  this.getCurrentIteration = function() { return currentStep; }

  this.getTotalIteration = function() { return statelist.length; }

  this.forceNext = function() {
    if ((currentStep + 1) < statelist.length)
      ++currentStep;
    drawCurrentState();
  }

  this.forcePrevious = function() {
    if ((currentStep-1) >= 0)
      --currentStep;
    drawCurrentState();
  }

  this.jumpToIteration = function(n) {
    currentStep = n;
    drawCurrentState();
  }

  this.play = function(callback) {
    issPlaying = true;
    drawCurrentState();
    animInterval = setInterval(function() {
      drawCurrentState();
      if (currentStep < (statelist.length-1))
        ++currentStep;
      else {
        clearInterval(animInterval);
        if (typeof callback == 'function') callback();
      }
    }, transitionTime);
  }

  this.pause = function() {
    issPlaying = false;
    clearInterval(animInterval);
  }

  this.replay = function() {
    issPlaying = true;
    currentStep = 0;
    drawCurrentState();
    animInterval = setInterval(function() {
      drawCurrentState();
      if (currentStep < (statelist.length-1))
        currentStep++;
      else
        clearInterval(animInterval);
    }, transitionTime);
  }

  this.stop = function() {
    issPlaying = false;
    statelist = [statelist[0]]; //clear statelist to original state, instead of new Array();
    secondaryStatelist = [null];
    currentStep = 0;
    drawState(0);
  }
}

// sorting action
var actionsWidth = 150;
var statusCodetraceWidth = 420;

// local
$(function() {
  AbbreviateTitle();
  var eight_modes = ["Bubble", "Selection", "Insertion", "Merge", "Quick", "RandomizedQuick", "Counting", "Radix"];
  $('#title-'+eight_modes[Math.floor(Math.random()*8)]).click(); // randomly open one of the eight sorting algorithm mode every time
  $('#play').hide();

  d3.selectAll("#radix-sort-bucket-labels-collection span")
    .style({"left": function(d, i) {
                  return 17.5 + i * 65 + "px";
          }});
  var sortMode = getQueryVariable("mode");
  if (sortMode.length > 0) {
     $('#title-' + sortMode).click();
  }
  var createArray = getQueryVariable("create");
  if (createArray.length > 0) {
    $('#userdefined-input').val(createArray);
    createList("userdefined");
  }

});

//this viz-specific code
var gw = new Sorting();

const DEFAULT_DATA       = "3,44,38,5,47,15,36,26,27,2,46,4,19,50,48";
const DEFAULT_COUNT_DATA = "2,3,8,7,1,2,2,2,7,3,9,8,2,1,4"; // drop 5 numbers on 25 Feb , 2, 4, 6, 9, 2";
const DEFAULT_RADIX_DATA = "3221, 1, 10, 9680, 577, 9420, 7, 5622, 4793, 2030, 3138, 82, 2599, 743, 4127";

// title changing
function AbbreviateTitle() {
  $('#title-Bubble').text("BUB").attr('title', 'Bubble Sort');
  $('#title-Selection').text("SEL").attr('title', 'Selection Sort');
  $('#title-Insertion').text("INS").attr('title', 'Insertion Sort');
  $('#title-Merge').text("MER").attr('title', 'Merge Sort');
  $('#title-Quick').text("QUI").attr('title', 'Quick Sort');
  $('#title-RandomizedQuick').text("R-Q").attr('title', 'Random Quick Sort');
  $('#title-Counting').text("COU").attr('title', 'Counting Sort');
  $('#title-Radix').text("RAD").attr('title', 'Radix Sort');
}
$('#title-Bubble').click(function() {
  showStandardCanvas();
  $("#sort-bubble-merge-inversion").css("display", "");
  $('#current-action p').html('Bubble Sort');
  changeSortType(gw.bubbleSort);
  AbbreviateTitle();
  $('#title-Bubble').text('Bubble Sort');
});
$('#title-Selection').click(function() {
  showStandardCanvas();
  hideAllSortingOptions();
  $('#current-action p').html('Selection Sort');
  changeSortType(gw.selectionSort);
  AbbreviateTitle();
  $('#title-Selection').text('Selection Sort');
});
$('#title-Insertion').click(function() {
  showStandardCanvas();
  hideAllSortingOptions();
  $('#current-action p').html('Insertion Sort');
  changeSortType(gw.insertionSort);
  AbbreviateTitle();
  $('#title-Insertion').text('Insertion Sort');
});
$('#title-Merge').click(function() {
  showStandardCanvas();
  hideAllSortingOptions();
  $("#sort-bubble-merge-inversion").css("display", "");
  $('#current-action p').html('Merge Sort');
  AbbreviateTitle();
  changeSortType(gw.mergeSort);
  $('#title-Merge').text('Merge Sort');
});
$('#title-Quick').click(function() {
  showStandardCanvas();
  hideAllSortingOptions();
  $('#current-action p').html('Quick Sort');
  changeSortType(gw.quickSort);
  AbbreviateTitle();
  $('#title-Quick').text('Quick Sort');
});
$('#title-RandomizedQuick').click(function() {
  showStandardCanvas();
  hideAllSortingOptions();
  $('#current-action p').html('Random Quick Sort');
  changeSortType(gw.randomizedQuickSort);
  AbbreviateTitle();
  $('#title-RandomizedQuick').text('Random Quick Sort');
});
$('#title-Counting').click(function() {
  showStandardCanvas();
  $("#viz-counting-sort-secondary-canvas").show();
  hideAllSortingOptions();
  $('#current-action p').html('Counting Sort');
  changeSortType(gw.countingSort, DEFAULT_COUNT_DATA);
  AbbreviateTitle();
  $('#title-Counting').text('Counting Sort');
});
$('#title-Radix').click(function() {
  hideAllCanvases();
  $("#viz-radix-sort-canvas").show();
  hideAllSortingOptions();
  $('#current-action p').html('Radix Sort');
  changeSortType(gw.radixSort, DEFAULT_RADIX_DATA);
  AbbreviateTitle();
  $('#title-Radix').text('Radix Sort');
});

function changeSortType(newSortingFunction, customNumberList) {
  if (!customNumberList) {
    // $('#userdefined-input').val(DEFAULT_DATA); // don't use default at all times :O
    createList('random');
  }
  else {
    $('#userdefined-input').val(customNumberList);
    createList('userdefined');
  }

  if (isPlaying) stop();
  showActionsPanel();
  hideStatusPanel();
  hideCodetracePanel();
  gw.clearPseudocode();
  gw.setSelectedSortFunction(newSortingFunction);
}

function createList(type) {
  if (isPlaying) stop();
  setTimeout(function() {
    if (gw.createList(type)) {
      $('#progress-bar').slider("option", "max", 0);
      closeCreate();
      isPlaying = false;
    }
  }, 500);
}

function sort(callback) {
  gw.computeInversionIndex = $('#sort-bubble-merge-inversion-checkbox').prop('checked');
  if (isPlaying) stop();
  setTimeout(function() {
    if (gw.sort(callback)) {
      $('#current-action').show();
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500);
}

// sort options
function hideAllSortingOptions() {
  $("#sort-bubble-merge-inversion").css("display", "none");
}

// canvas
function hideAllCanvases() {
  $("#viz").hide();
  $("#viz-counting-sort-secondary-canvas").hide();
  $("#viz-radix-sort-canvas").hide();
}

function showStandardCanvas() {
  $("#viz").show();
  $("#viz-counting-sort-secondary-canvas").hide();
  $("#viz-radix-sort-canvas").hide();
}

var exploreModeData = [];

// This function will be called before entering E-Lecture Mode
function ENTER_LECTURE_MODE() {
  exploreModeData = gw.currentNumList;
}

// This function will be called before returning to Explore Mode
function ENTER_EXPLORE_MODE() {
  gw.loadNumberList(exploreModeData);
}

// Lecture action functions
function SORT(mode) {
  hideSlide(function() {
    sort(showSlide);
  });
}
function CUSTOM_ACTION(action, data, mode) {}
</script>
</body>
</html>
